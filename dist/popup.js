(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=r[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();var e={};t.r(e),t.d(e,{hasBrowserEnv:()=>Pi,hasStandardBrowserEnv:()=>Ni,hasStandardBrowserWebWorkerEnv:()=>Ii,navigator:()=>Ti,origin:()=>Mi});let n=null;const r=1315;function i(){n=null,o("connecting","Disconnected"),a();const t=document.getElementById("ip-details");t&&(t.innerHTML='\n      <div class="placeholder">\n        <span class="placeholder-icon">🎯</span>\n        <p>Connect wallet and search for an IP Asset to see its relationship graph</p>\n      </div>\n    '),function(){const t=s("🔌 Disconnected from Story Protocol","info");document.body.appendChild(t),setTimeout(()=>{t.remove()},2e3)}()}function a(){const t=document.getElementById("wallet-status"),e=document.getElementById("connection-status"),r=document.getElementById("wallet-address"),i=document.getElementById("wallet-balance"),a=document.getElementById("wallet-network"),o=document.getElementById("connect-wallet"),s=document.getElementById("disconnect-wallet"),c=document.getElementById("wallet-address-item"),l=document.getElementById("wallet-balance-item"),u=document.getElementById("wallet-network-item");n?.connected?(t&&(t.className="wallet-status connected"),e&&(e.textContent="Connected to Story Protocol"),r&&(r.textContent=`${n.address.slice(0,6)}...${n.address.slice(-4)}`),i&&(i.textContent=`${n.balance} IP`),a&&(a.textContent="Story Aeneid Testnet"),c&&(c.style.display="flex"),l&&(l.style.display="flex"),u&&(u.style.display="flex"),o&&(o.style.display="none"),s&&(s.style.display="block")):(t&&(t.className="wallet-status"),e&&(e.textContent="Connect to Story Protocol"),c&&(c.style.display="none"),l&&(l.style.display="none"),u&&(u.style.display="none"),o&&(o.style.display="block"),s&&(s.style.display="none"))}function o(t,e){const n=document.getElementById("wallet-status"),r=document.getElementById("connection-status");n&&(n.className=`wallet-status ${t}`),r&&(r.textContent=e)}function s(t,e){const n=document.createElement("div");return n.className=`notification notification-${e}`,n.textContent=t,n.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 16px 24px;\n    border-radius: 12px;\n    color: white;\n    font-weight: 600;\n    font-size: 14px;\n    z-index: 10001;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n    animation: slideInRight 0.3s ease;\n    max-width: 300px;\n  ",n.style.background={success:"linear-gradient(135deg, #10b981, #059669)",error:"linear-gradient(135deg, #ef4444, #dc2626)",info:"linear-gradient(135deg, #3b82f6, #1d4ed8)"}[e],n}const c=document.createElement("style");function l(){}function u(t){return null==t?l:function(){return this.querySelector(t)}}function d(){return[]}function h(t){return null==t?d:function(){return this.querySelectorAll(t)}}function f(t){return function(){return this.matches(t)}}function p(t){return function(e){return e.matches(t)}}c.textContent="\n  @keyframes slideInRight {\n    from {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n  \n  .user-assets {\n    margin-top: 15px;\n  }\n  \n  .user-assets h3 {\n    margin-bottom: 12px;\n    color: #333;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    gap: 6px;\n  }\n  \n  .assets-list {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .asset-item {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n    padding: 12px;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    border: 1px solid #dee2e6;\n  }\n  \n  .asset-item:hover {\n    background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  }\n  \n  .asset-name {\n    font-weight: 600;\n    font-size: 13px;\n    color: #333;\n    margin-bottom: 6px;\n  }\n  \n  .asset-id {\n    font-family: monospace;\n    font-size: 10px;\n    color: #666;\n    margin-bottom: 8px;\n    background: rgba(255,255,255,0.7);\n    padding: 2px 6px;\n    border-radius: 4px;\n    display: inline-block;\n  }\n  \n  .asset-stats {\n    display: flex;\n    justify-content: space-between;\n    font-size: 11px;\n    color: #555;\n    font-weight: 500;\n  }\n  \n  .asset-stats span {\n    display: flex;\n    align-items: center;\n    gap: 2px;\n  }\n",document.head.appendChild(c);var v=Array.prototype.find;function m(){return this.firstElementChild}var g=Array.prototype.filter;function y(){return Array.from(this.children)}function w(t){return new Array(t.length)}function b(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function x(t,e,n,r,i,a){for(var o,s=0,c=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new b(t,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function _(t,e,n,r,i,a,o){var s,c,l,u=new Map,d=e.length,h=a.length,f=new Array(d);for(s=0;s<d;++s)(c=e[s])&&(f[s]=l=o.call(c,c.__data__,s,e)+"",u.has(l)?i[s]=c:u.set(l,c));for(s=0;s<h;++s)l=o.call(t,a[s],s,a)+"",(c=u.get(l))?(r[s]=c,c.__data__=a[s],u.delete(l)):n[s]=new b(t,a[s]);for(s=0;s<d;++s)(c=e[s])&&u.get(f[s])===c&&(i[s]=c)}function E(t){return t.__data__}function k(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function S(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}b.prototype={constructor:b,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var A="http://www.w3.org/1999/xhtml";const R={svg:"http://www.w3.org/2000/svg",xhtml:A,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function P(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),R.hasOwnProperty(e)?{space:R[e],local:t}:t}function T(t){return function(){this.removeAttribute(t)}}function N(t){return function(){this.removeAttributeNS(t.space,t.local)}}function I(t,e){return function(){this.setAttribute(t,e)}}function M(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function C(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function O(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function z(t){return function(){this.style.removeProperty(t)}}function D(t,e,n){return function(){this.style.setProperty(t,e,n)}}function L(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function B(t,e){return t.style.getPropertyValue(e)||O(t).getComputedStyle(t,null).getPropertyValue(e)}function j(t){return function(){delete this[t]}}function U(t,e){return function(){this[t]=e}}function F(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function q(t){return t.trim().split(/^|\s+/)}function H(t){return t.classList||new G(t)}function G(t){this._node=t,this._names=q(t.getAttribute("class")||"")}function X(t,e){for(var n=H(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function V(t,e){for(var n=H(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Y(t){return function(){X(this,t)}}function W(t){return function(){V(this,t)}}function J(t,e){return function(){(e.apply(this,arguments)?X:V)(this,t)}}function K(){this.textContent=""}function Q(t){return function(){this.textContent=t}}function Z(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function tt(){this.innerHTML=""}function et(t){return function(){this.innerHTML=t}}function nt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function rt(){this.nextSibling&&this.parentNode.appendChild(this)}function it(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function at(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===A&&e.documentElement.namespaceURI===A?e.createElement(t):e.createElementNS(n,t)}}function ot(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function st(t){var e=P(t);return(e.local?ot:at)(e)}function ct(){return null}function lt(){var t=this.parentNode;t&&t.removeChild(this)}function ut(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ht(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function ft(t,e,n){return function(){var r,i=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=e);this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function pt(t,e,n){var r=O(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function vt(t,e){return function(){return pt(this,t,e)}}function mt(t,e){return function(){return pt(this,t,e.apply(this,arguments))}}G.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var gt=[null];function yt(t,e){this._groups=t,this._parents=e}function wt(){return new yt([[document.documentElement]],gt)}yt.prototype=wt.prototype={constructor:yt,select:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],c=s.length,l=r[i]=new Array(c),d=0;d<c;++d)(a=s[d])&&(o=t.call(a,a.__data__,d,s))&&("__data__"in a&&(o.__data__=a.__data__),l[d]=o);return new yt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}(t):h(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],c=s.length,l=0;l<c;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),i.push(o));return new yt(r,i)},selectChild:function(t){return this.select(null==t?m:function(t){return function(){return v.call(this.children,t)}}("function"==typeof t?t:p(t)))},selectChildren:function(t){return this.selectAll(null==t?y:function(t){return function(){return g.call(this.children,t)}}("function"==typeof t?t:p(t)))},filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,c=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new yt(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,E);var n,r=e?_:x,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),c=new Array(o),l=new Array(o),u=0;u<o;++u){var d=i[u],h=a[u],f=h.length,p=k(t.call(d,d&&d.__data__,u,i)),v=p.length,m=c[u]=new Array(v),g=s[u]=new Array(v);r(d,h,m,g,l[u]=new Array(f),p,e);for(var y,w,b=0,S=0;b<v;++b)if(y=m[b]){for(b>=S&&(S=b+1);!(w=g[S])&&++S<v;);y._next=w||null}}return(s=new yt(s,i))._enter=c,s._exit=l,s},enter:function(){return new yt(this._enter||this._groups.map(w),this._parents)},exit:function(){return new yt(this._exit||this._groups.map(w),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),c=0;c<o;++c)for(var l,u=n[c],d=r[c],h=u.length,f=s[c]=new Array(h),p=0;p<h;++p)(l=u[p]||d[p])&&(f[p]=l);for(;c<i;++c)s[c]=n[c];return new yt(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=S);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],c=s.length,l=i[a]=new Array(c),u=0;u<c;++u)(o=s[u])&&(l[u]=o);l.sort(e)}return new yt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=P(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?N:T:"function"==typeof e?n.local?C:$:n.local?M:I)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?z:"function"==typeof e?L:D)(t,e,null==n?"":n)):B(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?j:"function"==typeof e?F:U)(t,e)):this.node()[t]},classed:function(t,e){var n=q(t+"");if(arguments.length<2){for(var r=H(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?J:e?Y:W)(n,e))},text:function(t){return arguments.length?this.each(null==t?K:("function"==typeof t?Z:Q)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?tt:("function"==typeof t?nt:et)(t)):this.node().innerHTML},raise:function(){return this.each(rt)},lower:function(){return this.each(it)},append:function(t){var e="function"==typeof t?t:st(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:st(t),r=null==e?ct:"function"==typeof e?e:u(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(lt)},clone:function(t){return this.select(t?dt:ut)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?ft:ht,r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<o;++r)if((i=a[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?mt:vt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const bt=wt;var xt={value:()=>{}};function _t(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Et(r)}function Et(t){this._=t}function kt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function St(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=xt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Et.prototype=_t.prototype={constructor:Et,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=St(i[n],t.name,e);else if(null==e)for(n in i)i[n]=St(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=kt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Et(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};const At=_t;var Rt,Pt,Tt=0,Nt=0,It=0,Mt=0,$t=0,Ct=0,Ot="object"==typeof performance&&performance.now?performance:Date,zt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Dt(){return $t||(zt(Lt),$t=Ot.now()+Ct)}function Lt(){$t=0}function Bt(){this._call=this._time=this._next=null}function jt(t,e,n){var r=new Bt;return r.restart(t,e,n),r}function Ut(){$t=(Mt=Ot.now())+Ct,Tt=Nt=0;try{!function(){Dt(),++Tt;for(var t,e=Rt;e;)(t=$t-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Tt}()}finally{Tt=0,function(){for(var t,e,n=Rt,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Rt=e);Pt=t,qt(r)}(),$t=0}}function Ft(){var t=Ot.now(),e=t-Mt;e>1e3&&(Ct-=e,Mt=t)}function qt(t){Tt||(Nt&&(Nt=clearTimeout(Nt)),t-$t>24?(t<1/0&&(Nt=setTimeout(Ut,t-Ot.now()-Ct)),It&&(It=clearInterval(It))):(It||(Mt=Ot.now(),It=setInterval(Ft,1e3)),Tt=1,zt(Ut)))}function Ht(t,e,n){var r=new Bt;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r}Bt.prototype=jt.prototype={constructor:Bt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Dt():+n)+(null==e?0:+e),this._next||Pt===this||(Pt?Pt._next=this:Rt=this,Pt=this),this._call=t,this._time=n,qt()},stop:function(){this._call&&(this._call=null,this._time=1/0,qt())}};var Gt=At("start","end","cancel","interrupt"),Xt=[];function Vt(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(c){var l,u,d,h;if(1!==n.state)return s();for(l in i)if((h=i[l]).name===n.name){if(3===h.state)return Ht(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(Ht(function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),l=0,u=-1;l<d;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=jt(function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:Gt,tween:Xt,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function Yt(t,e){var n=Jt(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Wt(t,e){var n=Jt(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Jt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Kt(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}function Qt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Zt,te=180/Math.PI,ee={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ne(t,e,n,r,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*te,skewX:Math.atan(c)*te,scaleX:o,scaleY:s}}function re(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],c=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var c=o.push("translate(",null,e,null,n);s.push({i:c-4,x:Qt(t,i)},{i:c-2,x:Qt(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,c),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Qt(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,c),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Qt(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,c),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Qt(t,n)},{i:s-2,x:Qt(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,c),a=o=null,function(t){for(var e,n=-1,r=c.length;++n<r;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}var ie=re(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ee:ne(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),ae=re(function(t){return null==t?ee:(Zt||(Zt=document.createElementNS("http://www.w3.org/2000/svg","g")),Zt.setAttribute("transform",t),(t=Zt.transform.baseVal.consolidate())?ne((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ee)},", ",")",")");function oe(t,e){var n,r;return function(){var i=Wt(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function se(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Wt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function ce(t,e,n){var r=t._id;return t.each(function(){var t=Wt(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Jt(t,r).value[e]}}function le(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ue(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function de(){}var he=.7,fe=1/he,pe="\\s*([+-]?\\d+)\\s*",ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ge=/^#([0-9a-f]{3,8})$/,ye=new RegExp(`^rgb\\(${pe},${pe},${pe}\\)$`),we=new RegExp(`^rgb\\(${me},${me},${me}\\)$`),be=new RegExp(`^rgba\\(${pe},${pe},${pe},${ve}\\)$`),xe=new RegExp(`^rgba\\(${me},${me},${me},${ve}\\)$`),_e=new RegExp(`^hsl\\(${ve},${me},${me}\\)$`),Ee=new RegExp(`^hsla\\(${ve},${me},${me},${ve}\\)$`),ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Se(){return this.rgb().formatHex()}function Ae(){return this.rgb().formatRgb()}function Re(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ge.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Pe(e):3===n?new Ie(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Te(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Te(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ye.exec(t))?new Ie(e[1],e[2],e[3],1):(e=we.exec(t))?new Ie(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=be.exec(t))?Te(e[1],e[2],e[3],e[4]):(e=xe.exec(t))?Te(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_e.exec(t))?De(e[1],e[2]/100,e[3]/100,1):(e=Ee.exec(t))?De(e[1],e[2]/100,e[3]/100,e[4]):ke.hasOwnProperty(t)?Pe(ke[t]):"transparent"===t?new Ie(NaN,NaN,NaN,0):null}function Pe(t){return new Ie(t>>16&255,t>>8&255,255&t,1)}function Te(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ie(t,e,n,r)}function Ne(t,e,n,r){return 1===arguments.length?((i=t)instanceof de||(i=Re(i)),i?new Ie((i=i.rgb()).r,i.g,i.b,i.opacity):new Ie):new Ie(t,e,n,null==r?1:r);var i}function Ie(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Me(){return`#${ze(this.r)}${ze(this.g)}${ze(this.b)}`}function $e(){const t=Ce(this.opacity);return`${1===t?"rgb(":"rgba("}${Oe(this.r)}, ${Oe(this.g)}, ${Oe(this.b)}${1===t?")":`, ${t})`}`}function Ce(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Oe(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ze(t){return((t=Oe(t))<16?"0":"")+t.toString(16)}function De(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Be(t,e,n,r)}function Le(t){if(t instanceof Be)return new Be(t.h,t.s,t.l,t.opacity);if(t instanceof de||(t=Re(t)),!t)return new Be;if(t instanceof Be)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new Be(o,s,c,t.opacity)}function Be(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function je(t){return(t=(t||0)%360)<0?t+360:t}function Ue(t){return Math.max(0,Math.min(1,t||0))}function Fe(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function qe(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}le(de,Re,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Se,formatHex:Se,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Le(this).formatHsl()},formatRgb:Ae,toString:Ae}),le(Ie,Ne,ue(de,{brighter(t){return t=null==t?fe:Math.pow(fe,t),new Ie(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?he:Math.pow(he,t),new Ie(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ie(Oe(this.r),Oe(this.g),Oe(this.b),Ce(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Me,formatHex:Me,formatHex8:function(){return`#${ze(this.r)}${ze(this.g)}${ze(this.b)}${ze(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:$e,toString:$e})),le(Be,function(t,e,n,r){return 1===arguments.length?Le(t):new Be(t,e,n,null==r?1:r)},ue(de,{brighter(t){return t=null==t?fe:Math.pow(fe,t),new Be(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?he:Math.pow(he,t),new Be(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ie(Fe(t>=240?t-240:t+120,i,r),Fe(t,i,r),Fe(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Be(je(this.h),Ue(this.s),Ue(this.l),Ce(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ce(this.opacity);return`${1===t?"hsl(":"hsla("}${je(this.h)}, ${100*Ue(this.s)}%, ${100*Ue(this.l)}%${1===t?")":`, ${t})`}`}}));const He=t=>()=>t;function Ge(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):He(isNaN(t)?e:t)}const Xe=function t(e){var n=function(t){return 1===(t=+t)?Ge:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):He(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Ne(t)).r,(e=Ne(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Ge(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Ve(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ne(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}Ve(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return qe((n-r/e)*e,o,i,a,s)}}),Ve(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return qe((n-r/e)*e,i,a,o,s)}});var Ye=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,We=new RegExp(Ye.source,"g");function Je(t,e){var n,r,i,a=Ye.lastIndex=We.lastIndex=0,o=-1,s=[],c=[];for(t+="",e+="";(n=Ye.exec(t))&&(r=We.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,c.push({i:o,x:Qt(n,r)})),a=We.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)s[(n=c[r]).i]=n.x(t);return s.join("")})}function Ke(t,e){var n;return("number"==typeof e?Qt:e instanceof Re?Xe:(n=Re(e))?(e=n,Xe):Je)(t,e)}function Qe(t){return function(){this.removeAttribute(t)}}function Ze(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tn(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function en(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function nn(t,e,n){var r,i,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttribute(t))===(s=c+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,c));this.removeAttribute(t)}}function rn(t,e,n){var r,i,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,c));this.removeAttributeNS(t.space,t.local)}}function an(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function on(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function sn(t,e){return function(){Yt(this,t).delay=+e.apply(this,arguments)}}function cn(t,e){return e=+e,function(){Yt(this,t).delay=e}}function ln(t,e){return function(){Wt(this,t).duration=+e.apply(this,arguments)}}function un(t,e){return e=+e,function(){Wt(this,t).duration=e}}var dn=bt.prototype.constructor;function hn(t){return function(){this.style.removeProperty(t)}}var fn=0;function pn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function vn(){return++fn}var mn=bt.prototype;pn.prototype=function(t){return bt().transition(t)}.prototype={constructor:pn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=u(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,c,l=r[o],d=l.length,h=a[o]=new Array(d),f=0;f<d;++f)(s=l[f])&&(c=t.call(s,s.__data__,f,l))&&("__data__"in s&&(c.__data__=s.__data__),h[f]=c,Vt(h[f],e,n,f,h,Jt(s,n)));return new pn(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=h(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c,l=r[s],u=l.length,d=0;d<u;++d)if(c=l[d]){for(var f,p=t.call(c,c.__data__,d,l),v=Jt(c,n),m=0,g=p.length;m<g;++m)(f=p[m])&&Vt(f,e,n,m,p,v);a.push(p),o.push(c)}return new pn(a,o,e,n)},selectChild:mn.selectChild,selectChildren:mn.selectChildren,filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,c=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new pn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c,l=e[s],u=n[s],d=l.length,h=o[s]=new Array(d),f=0;f<d;++f)(c=l[f]||u[f])&&(h[f]=c);for(;s<r;++s)o[s]=e[s];return new pn(o,this._parents,this._name,this._id)},selection:function(){return new dn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=vn(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],c=s.length,l=0;l<c;++l)if(o=s[l]){var u=Jt(o,e);Vt(o,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new pn(r,this._parents,t,n)},call:mn.call,nodes:mn.nodes,node:mn.node,size:mn.size,empty:mn.empty,each:mn.each,on:function(t,e){var n=this._id;return arguments.length<2?Jt(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?Yt:Wt;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=P(t),r="transform"===n?ae:Ke;return this.attrTween(t,"function"==typeof e?(n.local?rn:nn)(n,r,ce(this,"attr."+t,e)):null==e?(n.local?Ze:Qe)(n):(n.local?en:tn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=P(t);return this.tween(n,(r.local?an:on)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ie:Ke;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=B(this,t),o=(this.style.removeProperty(t),B(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,hn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=B(this,t),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=B(this,t)),o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s))}}(t,r,ce(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var c=Wt(this,t),l=c.on,u=null==c.value[o]?a||(a=hn(e)):void 0;l===n&&i===u||(r=(n=l).copy()).on(s,i=u),c.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=B(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ce(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Jt(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?oe:se)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?sn:cn)(e,t)):Jt(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ln:un)(e,t)):Jt(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Wt(this,t).ease=e}}(e,t)):Jt(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Wt(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){0===--i&&a()}};n.each(function(){var n=Wt(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),n.on=e}),0===i&&a()})},[Symbol.iterator]:mn[Symbol.iterator]};var gn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function yn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}bt.prototype.interrupt=function(t){return this.each(function(){Kt(this,t)})},bt.prototype.transition=function(t){var e,n;t instanceof pn?(e=t._id,t=t._name):(e=vn(),(n=gn).time=Dt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],c=s.length,l=0;l<c;++l)(o=s[l])&&Vt(o,t,e,l,s,n||yn(o,e));return new pn(r,this._parents,t,e)};const{abs:wn,max:bn,min:xn}=Math;function _n(t){return{type:t}}function En(t){return"string"==typeof t?new yt([[document.querySelector(t)]],[document.documentElement]):new yt([[t]],gt)}function kn(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}["w","e"].map(_n),["n","s"].map(_n),["n","w","e","s","nw","ne","sw","se"].map(_n);const Sn={passive:!1},An={capture:!0,passive:!1};function Rn(t){t.stopImmediatePropagation()}function Pn(t){t.preventDefault(),t.stopImmediatePropagation()}function Tn(t){var e=t.document.documentElement,n=En(t).on("dragstart.drag",Pn,An);"onselectstart"in e?n.on("selectstart.drag",Pn,An):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Nn(t,e){var n=t.document.documentElement,r=En(t).on("dragstart.drag",null);e&&(r.on("click.drag",Pn,An),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const In=t=>()=>t;function Mn(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}function $n(t){return!t.ctrlKey&&!t.button}function Cn(){return this.parentNode}function On(t,e){return null==e?{x:t.x,y:t.y}:e}function zn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dn(t,e){var n,r=1;function i(){var i,a,o=n.length,s=0,c=0;for(i=0;i<o;++i)s+=(a=n[i]).x,c+=a.y;for(s=(s/o-t)*r,c=(c/o-e)*r,i=0;i<o;++i)(a=n[i]).x-=s,a.y-=c}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function Ln(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,c,l,u,d,h,f=t._root,p={data:r},v=t._x0,m=t._y0,g=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((l=e>=(a=(v+g)/2))?v=a:g=a,(u=n>=(o=(m+y)/2))?m=o:y=o,i=f,!(f=f[d=u<<1|l]))return i[d]=p,t;if(s=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===s&&n===c)return p.next=f,i?i[d]=p:t._root=p,t;do{i=i?i[d]=new Array(4):t._root=new Array(4),(l=e>=(a=(v+g)/2))?v=a:g=a,(u=n>=(o=(m+y)/2))?m=o:y=o}while((d=u<<1|l)==(h=(c>=o)<<1|s>=a));return i[h]=f,i[d]=p,t}function Bn(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function jn(t){return t[0]}function Un(t){return t[1]}function Fn(t,e,n){var r=new qn(null==e?jn:e,null==n?Un:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function qn(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Hn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}Mn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Gn=Fn.prototype=qn.prototype;function Xn(t){return function(){return t}}function Vn(t){return 1e-6*(t()-.5)}function Yn(t){return t.x+t.vx}function Wn(t){return t.y+t.vy}function Jn(t){return t.index}function Kn(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}Gn.copy=function(){var t,e,n=new qn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Hn(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Hn(e));return n},Gn.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Ln(this.cover(e,n),e,n,t)},Gn.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),c=1/0,l=1/0,u=-1/0,d=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<c&&(c=r),r>u&&(u=r),i<l&&(l=i),i>d&&(d=i));if(c>u||l>d)return this;for(this.cover(c,l).cover(u,d),n=0;n<a;++n)Ln(this,o[n],s[n],t[n]);return this},Gn.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,c=i-n||1,l=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=l,l=o,c*=2,s){case 0:i=n+c,a=r+c;break;case 1:n=i-c,a=r+c;break;case 2:i=n+c,r=a-c;break;case 3:n=i-c,r=a-c}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},Gn.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},Gn.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Gn.find=function(t,e,n){var r,i,a,o,s,c,l,u=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],v=this._root;for(v&&p.push(new Bn(v,u,d,h,f)),null==n?n=1/0:(u=t-n,d=e-n,h=t+n,f=e+n,n*=n);c=p.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(a=c.y0)>f||(o=c.x1)<u||(s=c.y1)<d))if(v.length){var m=(i+o)/2,g=(a+s)/2;p.push(new Bn(v[3],m,g,o,s),new Bn(v[2],i,g,m,s),new Bn(v[1],m,a,o,g),new Bn(v[0],i,a,m,g)),(l=(e>=g)<<1|t>=m)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=c)}else{var y=t-+this._x.call(null,v.data),w=e-+this._y.call(null,v.data),b=y*y+w*w;if(b<n){var x=Math.sqrt(n=b);u=t-x,d=e-x,h=t+x,f=e+x,r=v.data}}return r},Gn.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,c,l,u,d,h,f=this._root,p=this._x0,v=this._y0,m=this._x1,g=this._y1;if(!f)return this;if(f.length)for(;;){if((l=a>=(s=(p+m)/2))?p=s:m=s,(u=o>=(c=(v+g)/2))?v=c:g=c,e=f,!(f=f[d=u<<1|l]))return this;if(!f.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,h=d)}for(;f.data!==t;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[d]=i:delete e[d],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=i,this)},Gn.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Gn.root=function(){return this._root},Gn.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},Gn.visit=function(t){var e,n,r,i,a,o,s=[],c=this._root;for(c&&s.push(new Bn(c,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(c=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&c.length){var l=(r+a)/2,u=(i+o)/2;(n=c[3])&&s.push(new Bn(n,l,u,a,o)),(n=c[2])&&s.push(new Bn(n,r,u,l,o)),(n=c[1])&&s.push(new Bn(n,l,i,a,u)),(n=c[0])&&s.push(new Bn(n,r,i,l,u))}return this},Gn.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Bn(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,c=e.x1,l=e.y1,u=(o+c)/2,d=(s+l)/2;(a=i[0])&&n.push(new Bn(a,o,s,u,d)),(a=i[1])&&n.push(new Bn(a,u,s,c,d)),(a=i[2])&&n.push(new Bn(a,o,d,u,l)),(a=i[3])&&n.push(new Bn(a,u,d,c,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Gn.x=function(t){return arguments.length?(this._x=t,this):this._x},Gn.y=function(t){return arguments.length?(this._y=t,this):this._y};const Qn=4294967296;function Zn(t){return t.x}function tr(t){return t.y}var er=Math.PI*(3-Math.sqrt(5));function nr(t){var e,n,r,i=Xn(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=Xn(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:Xn(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:Xn(+e),o(),a):t},a}function rr(t){var e,n,r,i=Xn(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!=typeof t&&(t=Xn(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:Xn(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Xn(+e),o(),a):t},a}function ir(t){return((t=Math.exp(t))+1/t)/2}const ar=function t(e,n,r){function i(t,i){var a,o,s=t[0],c=t[1],l=t[2],u=i[0],d=i[1],h=i[2],f=u-s,p=d-c,v=f*f+p*p;if(v<1e-12)o=Math.log(h/l)/e,a=function(t){return[s+t*f,c+t*p,l*Math.exp(e*t*o)]};else{var m=Math.sqrt(v),g=(h*h-l*l+r*v)/(2*l*n*m),y=(h*h-l*l-r*v)/(2*h*n*m),w=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(y*y+1)-y);o=(b-w)/e,a=function(t){var r,i=t*o,a=ir(w),u=l/(n*m)*(a*(r=e*i+w,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(w));return[s+u*f,c+u*p,l*a/ir(e*i+w)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4),or=t=>()=>t;function sr(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function cr(t,e,n){this.k=t,this.x=e,this.y=n}cr.prototype={constructor:cr,scale:function(t){return 1===t?this:new cr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new cr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lr=new cr(1,0,0);function ur(t){t.stopImmediatePropagation()}function dr(t){t.preventDefault(),t.stopImmediatePropagation()}function hr(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function fr(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function pr(){return this.__zoom||lr}function vr(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function mr(){return navigator.maxTouchPoints||"ontouchstart"in this}function gr(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}cr.prototype;class yr{constructor(t){this.nodes=[],this.links=[],this.container=t,this.width=t.clientWidth||360,this.height=t.clientHeight||280,this.initializeSVG(),this.initializeSimulation(),this.showPlaceholder()}initializeSVG(){En(this.container).selectAll("*").remove(),this.svg=En(this.container).append("svg").attr("width",this.width).attr("height",this.height).style("background","linear-gradient(135deg, #fafbff 0%, #f0f4ff 100%)").style("border-radius","12px");const t=this.svg.append("defs"),e=t.append("linearGradient").attr("id","rootGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");e.append("stop").attr("offset","0%").attr("stop-color","#667eea"),e.append("stop").attr("offset","100%").attr("stop-color","#764ba2");const n=t.append("linearGradient").attr("id","parentGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");n.append("stop").attr("offset","0%").attr("stop-color","#10b981"),n.append("stop").attr("offset","100%").attr("stop-color","#059669");const r=t.append("linearGradient").attr("id","childGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");r.append("stop").attr("offset","0%").attr("stop-color","#f59e0b"),r.append("stop").attr("offset","100%").attr("stop-color","#d97706");const i=t.append("linearGradient").attr("id","derivativeGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");i.append("stop").attr("offset","0%").attr("stop-color","#ef4444"),i.append("stop").attr("offset","100%").attr("stop-color","#dc2626");const a=function(){var t,e,n,r=hr,i=fr,a=gr,o=vr,s=mr,c=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,d=ar,h=At("start","zoom","end"),f=0,p=10;function v(t){t.property("__zoom",pr).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",S).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(c[0],Math.min(c[1],e)))===t.k?t:new cr(e,t.x,t.y)}function g(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new cr(t.k,r,i)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,e,n,r){t.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var t=this,a=arguments,o=b(t,a).event(r),s=i.apply(t,a),c=null==n?y(s):"function"==typeof n?n.apply(t,a):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=t.__zoom,h="function"==typeof e?e.apply(t,a):e,f=d(u.invert(c).concat(l/u.k),h.invert(c).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=l/e[2];t=new cr(n,c[0]-e[0]*n,c[1]-e[1]*n)}o.zoom(null,t)}})}function b(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function _(t,...e){if(r.apply(this,arguments)){var n=b(this,e).event(t),i=this.__zoom,s=Math.max(c[0],Math.min(c[1],i.k*Math.pow(2,o.apply(this,arguments)))),u=kn(t);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=i.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[u,i.invert(u)],Kt(this),n.start()}dr(t),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",a(g(m(i,s),n.mouse[0],n.mouse[1]),n.extent,l))}}function E(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,o=b(this,e,!0).event(t),s=En(t.view).on("mousemove.zoom",function(t){if(dr(t),!o.moved){var e=t.clientX-u,n=t.clientY-d;o.moved=e*e+n*n>f}o.event(t).zoom("mouse",a(g(o.that.__zoom,o.mouse[0]=kn(t,i),o.mouse[1]),o.extent,l))},!0).on("mouseup.zoom",function(t){s.on("mousemove.zoom mouseup.zoom",null),Nn(t.view,o.moved),dr(t),o.event(t).end()},!0),c=kn(t,i),u=t.clientX,d=t.clientY;Tn(t.view),ur(t),o.mouse=[c,this.__zoom.invert(c)],Kt(this),o.start()}}function k(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,o=kn(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(o),c=n.k*(t.shiftKey?.5:2),d=a(g(m(n,c),o,s),i.apply(this,e),l);dr(t),u>0?En(this).transition().duration(u).call(w,d,o,t):En(this).call(v.transform,d,o,t)}}function S(n,...i){if(r.apply(this,arguments)){var a,o,s,c,l=n.touches,u=l.length,d=b(this,i,n.changedTouches.length===u).event(n);for(ur(n),o=0;o<u;++o)c=[c=kn(s=l[o],this),this.__zoom.invert(c),s.identifier],d.touch0?d.touch1||d.touch0[2]===c[2]||(d.touch1=c,d.taps=0):(d.touch0=c,a=!0,d.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(d.taps<2&&(e=c[0],t=setTimeout(function(){t=null},500)),Kt(this),d.start())}}function A(t,...e){if(this.__zooming){var n,r,i,o,s=b(this,e).event(t),c=t.changedTouches,u=c.length;for(dr(t),n=0;n<u;++n)i=kn(r=c[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var d=s.touch0[0],h=s.touch0[1],f=s.touch1[0],p=s.touch1[1],v=(v=f[0]-d[0])*v+(v=f[1]-d[1])*v,y=(y=p[0]-h[0])*y+(y=p[1]-h[1])*y;r=m(r,Math.sqrt(v/y)),i=[(d[0]+f[0])/2,(d[1]+f[1])/2],o=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],o=s.touch0[1]}s.zoom("touch",a(g(r,i,o),s.extent,l))}}function R(t,...r){if(this.__zooming){var i,a,o=b(this,r).event(t),s=t.changedTouches,c=s.length;for(ur(t),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<c;++i)a=s[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=kn(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<p)){var l=En(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return v.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",pr),t!==i?w(t,e,n,r):i.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},v.scaleBy=function(t,e,n,r){v.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,r)},v.scaleTo=function(t,e,n,r){v.transform(t,function(){var t=i.apply(this,arguments),r=this.__zoom,o=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(o),c="function"==typeof e?e.apply(this,arguments):e;return a(g(m(r,c),o,s),t,l)},n,r)},v.translateBy=function(t,e,n,r){v.transform(t,function(){return a(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)},null,r)},v.translateTo=function(t,e,n,r,o){v.transform(t,function(){var t=i.apply(this,arguments),o=this.__zoom,s=null==r?y(t):"function"==typeof r?r.apply(this,arguments):r;return a(lr.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)},r,o)},x.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=En(this.that).datum();h.call(t,this.that,new sr(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:h}),e)}},v.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:or(+t),v):o},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:or(!!t),v):r},v.touchable=function(t){return arguments.length?(s="function"==typeof t?t:or(!!t),v):s},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:or([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],v):[c[0],c[1]]},v.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],v):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},v.constrain=function(t){return arguments.length?(a=t,v):a},v.duration=function(t){return arguments.length?(u=+t,v):u},v.interpolate=function(t){return arguments.length?(d=t,v):d},v.on=function(){var t=h.on.apply(h,arguments);return t===h?v:t},v.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,v):Math.sqrt(f)},v.tapDistance=function(t){return arguments.length?(p=+t,v):p},v}().scaleExtent([.1,4]).on("zoom",t=>{this.svg.select(".main-group").attr("transform",t.transform)});this.svg.call(a),this.svg.append("g").attr("class","main-group")}initializeSimulation(){this.simulation=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,c=jt(d),l=At("tick","end"),u=function(){let t=1;return()=>(t=(1664525*t+1013904223)%Qn)/Qn}();function d(){h(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function h(r){var c,l,u=t.length;void 0===r&&(r=1);for(var d=0;d<r;++d)for(n+=(a-n)*i,s.forEach(function(t){t(n)}),c=0;c<u;++c)null==(l=t[c]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),a=n*er;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return c.restart(d),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(u=t,s.forEach(p),e):u},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,c,l=0,u=t.length;for(null==r?r=1/0:r*=r,l=0;l<u;++l)(o=(i=e-(s=t[l]).x)*i+(a=n-s.y)*a)<r&&(c=s,r=o);return c},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}().force("link",function(t){var e,n,r,i,a,o,s=Jn,c=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=Xn(30),u=1;function d(r){for(var i=0,s=t.length;i<u;++i)for(var c,l,d,h,f,p,v,m=0;m<s;++m)l=(c=t[m]).source,h=(d=c.target).x+d.vx-l.x-l.vx||Vn(o),f=d.y+d.vy-l.y-l.vy||Vn(o),h*=p=((p=Math.sqrt(h*h+f*f))-n[m])/p*r*e[m],f*=p,d.vx-=h*(v=a[m]),d.vy-=f*v,l.vx+=h*(v=1-v),l.vy+=f*v}function h(){if(r){var o,c,l=r.length,u=t.length,d=new Map(r.map((t,e)=>[s(t,e,r),t]));for(o=0,i=new Array(l);o<u;++o)(c=t[o]).index=o,"object"!=typeof c.source&&(c.source=Kn(d,c.source)),"object"!=typeof c.target&&(c.target=Kn(d,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(o=0,a=new Array(u);o<u;++o)c=t[o],a[o]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);e=new Array(u),f(),n=new Array(u),p()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+c(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t,e){r=t,o=e,h()},d.links=function(e){return arguments.length?(t=e,h(),d):t},d.id=function(t){return arguments.length?(s=t,d):s},d.iterations=function(t){return arguments.length?(u=+t,d):u},d.strength=function(t){return arguments.length?(c="function"==typeof t?t:Xn(+t),f(),d):c},d.distance=function(t){return arguments.length?(l="function"==typeof t?t:Xn(+t),p(),d):l},d}().id(t=>t.id).distance(100).strength(.8)).force("charge",function(){var t,e,n,r,i,a=Xn(-30),o=1,s=1/0,c=.81;function l(n){var i,a=t.length,o=Fn(t,Zn,tr).visitAfter(d);for(r=n,i=0;i<a;++i)e=t[i],o.visit(h)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+a(n,e,t)}}function d(t){var e,n,r,a,o,s=0,c=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,c+=n,r+=n*e.x,a+=n*e.y);t.x=r/c,t.y=a/c}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,a,l,u){if(!t.value)return!0;var d=t.x-e.x,h=t.y-e.y,f=u-a,p=d*d+h*h;if(f*f/c<p)return p<s&&(0===d&&(p+=(d=Vn(n))*d),0===h&&(p+=(h=Vn(n))*h),p<o&&(p=Math.sqrt(o*p)),e.vx+=d*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===d&&(p+=(d=Vn(n))*d),0===h&&(p+=(h=Vn(n))*h),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(f=i[t.data.index]*r/p,e.vx+=d*f,e.vy+=h*f)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,u()},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:Xn(+t),u(),l):a},l.distanceMin=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.distanceMax=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.theta=function(t){return arguments.length?(c=t*t,l):Math.sqrt(c)},l}().strength(-400)).force("center",Dn(this.width/2,this.height/2)).force("collision",function(t){var e,n,r,i=1,a=1;function o(){for(var t,o,c,l,u,d,h,f=e.length,p=0;p<a;++p)for(o=Fn(e,Yn,Wn).visitAfter(s),t=0;t<f;++t)c=e[t],d=n[c.index],h=d*d,l=c.x+c.vx,u=c.y+c.vy,o.visit(v);function v(t,e,n,a,o){var s=t.data,f=t.r,p=d+f;if(!s)return e>l+p||a<l-p||n>u+p||o<u-p;if(s.index>c.index){var v=l-s.x-s.vx,m=u-s.y-s.vy,g=v*v+m*m;g<p*p&&(0===v&&(g+=(v=Vn(r))*v),0===m&&(g+=(m=Vn(r))*m),g=(p-(g=Math.sqrt(g)))/g*i,c.vx+=(v*=g)*(p=(f*=f)/(h+f)),c.vy+=(m*=g)*p,s.vx-=v*(p=1-p),s.vy-=m*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function c(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Xn(null==t?1:+t)),o.initialize=function(t,n){e=t,r=n,c()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:Xn(+e),c(),o):t},o}().radius(35)).force("x",nr(this.width/2).strength(.1)).force("y",rr(this.height/2).strength(.1))}async loadIPRelationships(t,e,n){try{console.log("Loading IP relationships for:",t),console.log("IP Data:",e),console.log("Relationships:",n),this.buildGraphData(t,e,n),this.renderGraph()}catch(t){console.error("Failed to load IP relationships:",t),this.showError("Failed to load IP relationships")}}buildGraphData(t,e,n){this.nodes=[],this.links=[],console.log("Building graph data for:",t),this.nodes.push({id:t,name:e.name||"Root IP",type:"root",owner:e.owner||"Unknown",revenue:e.revenue||0,derivatives:n.filter(t=>"derivative"===t.type).length}),n.forEach(e=>{const n=e.target!==t?e.target:e.source;n&&n!==t&&(this.nodes.find(t=>t.id===n)||this.nodes.push({id:n,name:e.name||`IP ${n.slice(0,8)}...`,type:"derivative"===e.type?"child":"parent",owner:e.owner||"Unknown",revenue:e.revenue||0,derivatives:e.derivatives||0}),this.links.push({source:e.source,target:e.target,type:e.type,strength:1,revenue:e.revenue||0}))}),console.log("Built nodes:",this.nodes),console.log("Built links:",this.links),1===this.nodes.length&&this.addDemoNodes(t)}addDemoNodes(t){const e="0x"+Math.random().toString(16).substr(2,40);this.nodes.push({id:e,name:"Parent IP Asset",type:"parent",owner:"0x1234...5678",revenue:150,derivatives:3}),this.links.push({source:e,target:t,type:"parent",strength:1,revenue:25});for(let e=0;e<3;e++){const n="0x"+Math.random().toString(16).substr(2,40);this.nodes.push({id:n,name:`Derivative ${e+1}`,type:"child",owner:`0xabcd...${e}${e}${e}${e}`,revenue:50*Math.random(),derivatives:Math.floor(3*Math.random())}),this.links.push({source:t,target:n,type:"derivative",strength:1,revenue:20*Math.random()})}}renderGraph(){const t=this.svg.select(".main-group");t.selectAll("*").remove(),console.log("Rendering graph with nodes:",this.nodes.length,"links:",this.links.length),this.linkElements=t.append("g").attr("class","links").selectAll("line").data(this.links).enter().append("line").attr("stroke",t=>this.getLinkColor(t.type)).attr("stroke-width",t=>this.calculateLinkWidth(t.revenue||0)).attr("stroke-opacity",.7).attr("marker-end","url(#arrowhead)"),this.nodeElements=t.append("g").attr("class","nodes").selectAll("g").data(this.nodes).enter().append("g").attr("class","node").style("cursor","pointer").call(function(){var t,e,n,r,i=$n,a=Cn,o=On,s=zn,c={},l=At("start","drag","end"),u=0,d=0;function h(t){t.on("mousedown.drag",f).filter(s).on("touchstart.drag",m).on("touchmove.drag",g,Sn).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(o,s){if(!r&&i.call(this,o,s)){var c=w(this,a.call(this,o,s),o,s,"mouse");c&&(En(o.view).on("mousemove.drag",p,An).on("mouseup.drag",v,An),Tn(o.view),Rn(o),n=!1,t=o.clientX,e=o.clientY,c("start",o))}}function p(r){if(Pn(r),!n){var i=r.clientX-t,a=r.clientY-e;n=i*i+a*a>d}c.mouse("drag",r)}function v(t){En(t.view).on("mousemove.drag mouseup.drag",null),Nn(t.view,n),Pn(t),c.mouse("end",t)}function m(t,e){if(i.call(this,t,e)){var n,r,o=t.changedTouches,s=a.call(this,t,e),c=o.length;for(n=0;n<c;++n)(r=w(this,s,t,e,o[n].identifier,o[n]))&&(Rn(t),r("start",t,o[n]))}}function g(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=c[r[e].identifier])&&(Pn(t),n("drag",t,r[e]))}function y(t){var e,n,i=t.changedTouches,a=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<a;++e)(n=c[i[e].identifier])&&(Rn(t),n("end",t,i[e]))}function w(t,e,n,r,i,a){var s,d,f,p=l.copy(),v=kn(a||n,e);if(null!=(f=o.call(t,new Mn("beforestart",{sourceEvent:n,target:h,identifier:i,active:u,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),r)))return s=f.x-v[0]||0,d=f.y-v[1]||0,function n(a,o,l){var m,g=v;switch(a){case"start":c[i]=n,m=u++;break;case"end":delete c[i],--u;case"drag":v=kn(l||o,e),m=u}p.call(a,t,new Mn(a,{sourceEvent:o,subject:f,target:h,identifier:i,active:m,x:v[0]+s,y:v[1]+d,dx:v[0]-g[0],dy:v[1]-g[1],dispatch:p}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:In(!!t),h):i},h.container=function(t){return arguments.length?(a="function"==typeof t?t:In(t),h):a},h.subject=function(t){return arguments.length?(o="function"==typeof t?t:In(t),h):o},h.touchable=function(t){return arguments.length?(s="function"==typeof t?t:In(!!t),h):s},h.on=function(){var t=l.on.apply(l,arguments);return t===l?h:t},h.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,h):Math.sqrt(d)},h}().on("start",(t,e)=>this.dragStarted(t,e)).on("drag",(t,e)=>this.dragged(t,e)).on("end",(t,e)=>this.dragEnded(t,e))),this.nodeElements.append("circle").attr("r",t=>this.getNodeRadius(t.type)).attr("fill",t=>this.getNodeColor(t.type)).attr("stroke","#fff").attr("stroke-width",3).style("filter","drop-shadow(0 2px 4px rgba(0,0,0,0.1))"),this.nodeElements.append("text").text(t=>t.name.length>15?t.name.substring(0,15)+"...":t.name).attr("x",0).attr("y",t=>this.getNodeRadius(t.type)+18).attr("text-anchor","middle").attr("font-size","11px").attr("font-weight","600").attr("fill","#333").style("pointer-events","none"),this.nodeElements.filter(t=>t.revenue&&t.revenue>0).append("text").text(t=>`$${t.revenue?.toFixed(1)}`).attr("x",0).attr("y",t=>this.getNodeRadius(t.type)+32).attr("text-anchor","middle").attr("font-size","9px").attr("font-weight","500").attr("fill","#10b981").style("pointer-events","none"),this.nodeElements.on("click",(t,e)=>{this.handleNodeClick(t,e)}),this.nodeElements.on("mouseenter",(t,e)=>{this.handleNodeHover(t,e,!0)}).on("mouseleave",(t,e)=>{this.handleNodeHover(t,e,!1)}),this.nodeElements.append("title").text(t=>`${t.name}\nOwner: ${t.owner.slice(0,10)}...\nType: ${t.type}\nRevenue: $${t.revenue||0}\nDerivatives: ${t.derivatives||0}`),this.simulation.nodes(this.nodes),this.simulation.force("link").links(this.links),this.simulation.on("tick",()=>{this.linkElements.attr("x1",t=>t.source.x).attr("y1",t=>t.source.y).attr("x2",t=>t.target.x).attr("y2",t=>t.target.y),this.nodeElements.attr("transform",t=>`translate(${t.x},${t.y})`)}),this.simulation.alpha(1).restart()}handleNodeClick(t,e){console.log("Node clicked:",e),this.highlightConnectedNodes(e.id);const n=new CustomEvent("nodeClick",{detail:{node:e,event:t}});this.container.dispatchEvent(n)}handleNodeHover(t,e,n){const r=En(t.currentTarget);n?r.select("circle").transition().duration(200).attr("r",1.2*this.getNodeRadius(e.type)).style("filter","drop-shadow(0 4px 8px rgba(0,0,0,0.2))"):r.select("circle").transition().duration(200).attr("r",this.getNodeRadius(e.type)).style("filter","drop-shadow(0 2px 4px rgba(0,0,0,0.1))")}highlightConnectedNodes(t){this.nodeElements.select("circle").attr("stroke-width",3).attr("stroke","#fff"),this.linkElements.attr("stroke-opacity",.3),this.nodeElements.filter(e=>e.id===t).select("circle").attr("stroke-width",4).attr("stroke","#ff6b6b");const e=this.links.filter(e=>e.source.id===t||e.target.id===t),n=new Set;e.forEach(t=>{n.add(t.source.id),n.add(t.target.id)}),this.nodeElements.filter(t=>n.has(t.id)).select("circle").attr("stroke-width",4).attr("stroke","#4ecdc4"),this.linkElements.filter(e=>e.source.id===t||e.target.id===t).attr("stroke-opacity",1)}getNodeColor(t){return{root:"url(#rootGradient)",parent:"url(#parentGradient)",child:"url(#childGradient)",derivative:"url(#derivativeGradient)"}[t]||"#6b7280"}getNodeRadius(t){return{root:22,parent:18,child:16,derivative:14}[t]||14}getLinkColor(t){return{parent:"#10b981",derivative:"#ef4444",license:"#3b82f6"}[t]||"#6b7280"}calculateLinkWidth(t=0){const e=Math.log10(t+1);return Math.min(8,1.5+2*e)}dragStarted(t,e){t.active||this.simulation.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}dragged(t,e){e.fx=t.x,e.fy=t.y}dragEnded(t,e){t.active||this.simulation.alphaTarget(0),e.fx=null,e.fy=null}showError(t){const e=this.svg.select(".main-group");e.selectAll("*").remove(),e.append("text").text(t).attr("x",this.width/2).attr("y",this.height/2).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#ef4444")}showPlaceholder(){const t=this.svg.select(".main-group");t.selectAll("*").remove();const e=t.append("g").attr("class","placeholder").attr("transform",`translate(${this.width/2}, ${this.height/2})`);e.append("circle").attr("r",30).attr("fill","#f8f9fa").attr("stroke","#dee2e6").attr("stroke-width",2).attr("stroke-dasharray","5,5"),e.append("text").text("🎯").attr("text-anchor","middle").attr("font-size","24px").attr("y",8),e.append("text").text("Search for an IP Asset").attr("text-anchor","middle").attr("font-size","12px").attr("y",50).attr("fill","#6b7280"),e.append("text").text("to visualize relationships").attr("text-anchor","middle").attr("font-size","12px").attr("y",65).attr("fill","#6b7280")}clear(){this.nodes=[],this.links=[],this.simulation.nodes([]),this.simulation.force("link").links([]),this.showPlaceholder()}resize(){this.width=this.container.clientWidth||360,this.height=this.container.clientHeight||280,this.svg.attr("width",this.width).attr("height",this.height),this.simulation.force("center",Dn(this.width/2,this.height/2)).force("x",nr(this.width/2).strength(.1)).force("y",rr(this.height/2).strength(.1)).alpha(1).restart()}}function wr(t,e){return function(){return t.apply(e,arguments)}}const{toString:br}=Object.prototype,{getPrototypeOf:xr}=Object,{iterator:_r,toStringTag:Er}=Symbol,kr=(Sr=Object.create(null),t=>{const e=br.call(t);return Sr[e]||(Sr[e]=e.slice(8,-1).toLowerCase())});var Sr;const Ar=t=>(t=t.toLowerCase(),e=>kr(e)===t),Rr=t=>e=>typeof e===t,{isArray:Pr}=Array,Tr=Rr("undefined");function Nr(t){return null!==t&&!Tr(t)&&null!==t.constructor&&!Tr(t.constructor)&&$r(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ir=Ar("ArrayBuffer"),Mr=Rr("string"),$r=Rr("function"),Cr=Rr("number"),Or=t=>null!==t&&"object"==typeof t,zr=t=>{if("object"!==kr(t))return!1;const e=xr(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Er in t||_r in t)},Dr=Ar("Date"),Lr=Ar("File"),Br=Ar("Blob"),jr=Ar("FileList"),Ur=Ar("URLSearchParams"),[Fr,qr,Hr,Gr]=["ReadableStream","Request","Response","Headers"].map(Ar);function Xr(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let r,i;if("object"!=typeof t&&(t=[t]),Pr(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(Nr(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(r=0;r<a;r++)o=i[r],e.call(null,t[o],o,t)}}function Vr(t,e){if(Nr(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const Yr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Wr=t=>!Tr(t)&&t!==Yr,Jr=(Kr="undefined"!=typeof Uint8Array&&xr(Uint8Array),t=>Kr&&t instanceof Kr);var Kr;const Qr=Ar("HTMLFormElement"),Zr=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),ti=Ar("RegExp"),ei=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Xr(n,(n,i)=>{let a;!1!==(a=e(n,i,t))&&(r[i]=a||n)}),Object.defineProperties(t,r)},ni=Ar("AsyncFunction"),ri=(ii="function"==typeof setImmediate,ai=$r(Yr.postMessage),ii?setImmediate:ai?(oi=`axios@${Math.random()}`,si=[],Yr.addEventListener("message",({source:t,data:e})=>{t===Yr&&e===oi&&si.length&&si.shift()()},!1),t=>{si.push(t),Yr.postMessage(oi,"*")}):t=>setTimeout(t));var ii,ai,oi,si;const ci="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Yr):"undefined"!=typeof process&&process.nextTick||ri,li={isArray:Pr,isArrayBuffer:Ir,isBuffer:Nr,isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||$r(t.append)&&("formdata"===(e=kr(t))||"object"===e&&$r(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Ir(t.buffer),e},isString:Mr,isNumber:Cr,isBoolean:t=>!0===t||!1===t,isObject:Or,isPlainObject:zr,isEmptyObject:t=>{if(!Or(t)||Nr(t))return!1;try{return 0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype}catch(t){return!1}},isReadableStream:Fr,isRequest:qr,isResponse:Hr,isHeaders:Gr,isUndefined:Tr,isDate:Dr,isFile:Lr,isBlob:Br,isRegExp:ti,isFunction:$r,isStream:t=>Or(t)&&$r(t.pipe),isURLSearchParams:Ur,isTypedArray:Jr,isFileList:jr,forEach:Xr,merge:function t(){const{caseless:e}=Wr(this)&&this||{},n={},r=(r,i)=>{const a=e&&Vr(n,i)||i;zr(n[a])&&zr(r)?n[a]=t(n[a],r):zr(r)?n[a]=t({},r):Pr(r)?n[a]=r.slice():n[a]=r};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&Xr(arguments[t],r);return n},extend:(t,e,n,{allOwnKeys:r}={})=>(Xr(e,(e,r)=>{n&&$r(e)?t[r]=wr(e,n):t[r]=e},{allOwnKeys:r}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let i,a,o;const s={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],r&&!r(o,t,e)||s[o]||(e[o]=t[o],s[o]=!0);t=!1!==n&&xr(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:kr,kindOfTest:Ar,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(Pr(t))return t;let e=t.length;if(!Cr(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[_r]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:Qr,hasOwnProperty:Zr,hasOwnProp:Zr,reduceDescriptors:ei,freezeMethods:t=>{ei(t,(e,n)=>{if($r(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];$r(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach(t=>{n[t]=!0})};return Pr(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,n){return e.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:Vr,global:Yr,isContextDefined:Wr,isSpecCompliantForm:function(t){return!!(t&&$r(t.append)&&"FormData"===t[Er]&&t[_r])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(Or(t)){if(e.indexOf(t)>=0)return;if(Nr(t))return t;if(!("toJSON"in t)){e[r]=t;const i=Pr(t)?[]:{};return Xr(t,(t,e)=>{const a=n(t,r+1);!Tr(a)&&(i[e]=a)}),e[r]=void 0,i}}return t};return n(t,0)},isAsyncFn:ni,isThenable:t=>t&&(Or(t)||$r(t))&&$r(t.then)&&$r(t.catch),setImmediate:ri,asap:ci,isIterable:t=>null!=t&&$r(t[_r])};function ui(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}li.inherits(ui,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:li.toJSONObject(this.config),code:this.code,status:this.status}}});const di=ui.prototype,hi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{hi[t]={value:t}}),Object.defineProperties(ui,hi),Object.defineProperty(di,"isAxiosError",{value:!0}),ui.from=(t,e,n,r,i,a)=>{const o=Object.create(di);return li.toFlatObject(t,o,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t),ui.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};const fi=ui;function pi(t){return li.isPlainObject(t)||li.isArray(t)}function vi(t){return li.endsWith(t,"[]")?t.slice(0,-2):t}function mi(t,e,n){return t?t.concat(e).map(function(t,e){return t=vi(t),!n&&e?"["+t+"]":t}).join(n?".":""):e}const gi=li.toFlatObject(li,{},null,function(t){return/^is[A-Z]/.test(t)}),yi=function(t,e,n){if(!li.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=li.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!li.isUndefined(e[t])})).metaTokens,i=n.visitor||l,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&li.isSpecCompliantForm(e);if(!li.isFunction(i))throw new TypeError("visitor must be a function");function c(t){if(null===t)return"";if(li.isDate(t))return t.toISOString();if(li.isBoolean(t))return t.toString();if(!s&&li.isBlob(t))throw new fi("Blob is not supported. Use a Buffer instead.");return li.isArrayBuffer(t)||li.isTypedArray(t)?s&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function l(t,n,i){let s=t;if(t&&!i&&"object"==typeof t)if(li.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(li.isArray(t)&&function(t){return li.isArray(t)&&!t.some(pi)}(t)||(li.isFileList(t)||li.endsWith(n,"[]"))&&(s=li.toArray(t)))return n=vi(n),s.forEach(function(t,r){!li.isUndefined(t)&&null!==t&&e.append(!0===o?mi([n],r,a):null===o?n:n+"[]",c(t))}),!1;return!!pi(t)||(e.append(mi(i,n,a),c(t)),!1)}const u=[],d=Object.assign(gi,{defaultVisitor:l,convertValue:c,isVisitable:pi});if(!li.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!li.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),li.forEach(n,function(n,a){!0===(!(li.isUndefined(n)||null===n)&&i.call(e,n,li.isString(a)?a.trim():a,r,d))&&t(n,r?r.concat(a):[a])}),u.pop()}}(t),e};function wi(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function bi(t,e){this._pairs=[],t&&yi(t,this,e)}const xi=bi.prototype;xi.append=function(t,e){this._pairs.push([t,e])},xi.toString=function(t){const e=t?function(e){return t.call(this,e,wi)}:wi;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};const _i=bi;function Ei(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ki(t,e,n){if(!e)return t;const r=n&&n.encode||Ei;li.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(a=i?i(e,n):li.isURLSearchParams(e)?e.toString():new _i(e,n).toString(r),a){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+a}return t}const Si=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){li.forEach(this.handlers,function(e){null!==e&&t(e)})}},Ai={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ri={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:_i,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Pi="undefined"!=typeof window&&"undefined"!=typeof document,Ti="object"==typeof navigator&&navigator||void 0,Ni=Pi&&(!Ti||["ReactNative","NativeScript","NS"].indexOf(Ti.product)<0),Ii="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Mi=Pi&&window.location.href||"http://localhost",$i={...e,...Ri},Ci=function(t){function e(t,n,r,i){let a=t[i++];if("__proto__"===a)return!0;const o=Number.isFinite(+a),s=i>=t.length;return a=!a&&li.isArray(r)?r.length:a,s?(li.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&li.isObject(r[a])||(r[a]=[]),e(t,n,r[a],i)&&li.isArray(r[a])&&(r[a]=function(t){const e={},n=Object.keys(t);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],e[a]=t[a];return e}(r[a])),!o)}if(li.isFormData(t)&&li.isFunction(t.entries)){const n={};return li.forEachEntry(t,(t,r)=>{e(function(t){return li.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}(t),r,n,0)}),n}return null},Oi={transitional:Ai,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=li.isObject(t);if(i&&li.isHTMLForm(t)&&(t=new FormData(t)),li.isFormData(t))return r?JSON.stringify(Ci(t)):t;if(li.isArrayBuffer(t)||li.isBuffer(t)||li.isStream(t)||li.isFile(t)||li.isBlob(t)||li.isReadableStream(t))return t;if(li.isArrayBufferView(t))return t.buffer;if(li.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return yi(t,new $i.classes.URLSearchParams,{visitor:function(t,e,n,r){return $i.isNode&&li.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}(t,this.formSerializer).toString();if((a=li.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return yi(a?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),function(t){if(li.isString(t))try{return(0,JSON.parse)(t),li.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Oi.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(li.isResponse(t)||li.isReadableStream(t))return t;if(t&&li.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(t){if(n){if("SyntaxError"===t.name)throw fi.from(t,fi.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$i.classes.FormData,Blob:$i.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};li.forEach(["delete","get","head","post","put","patch"],t=>{Oi.headers[t]={}});const zi=Oi,Di=li.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Li=Symbol("internals");function Bi(t){return t&&String(t).trim().toLowerCase()}function ji(t){return!1===t||null==t?t:li.isArray(t)?t.map(ji):String(t)}function Ui(t,e,n,r,i){return li.isFunction(r)?r.call(this,e,n):(i&&(e=n),li.isString(e)?li.isString(r)?-1!==e.indexOf(r):li.isRegExp(r)?r.test(e):void 0:void 0)}class Fi{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=Bi(e);if(!i)throw new Error("header name must be a non-empty string");const a=li.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||e]=ji(t))}const a=(t,e)=>li.forEach(t,(t,n)=>i(t,n,e));if(li.isPlainObject(t)||t instanceof this.constructor)a(t,e);else if(li.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))a((t=>{const e={};let n,r,i;return t&&t.split("\n").forEach(function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&Di[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e})(t),e);else if(li.isObject(t)&&li.isIterable(t)){let n,r,i={};for(const e of t){if(!li.isArray(e))throw TypeError("Object iterator must return a key-value pair");i[r=e[0]]=(n=i[r])?li.isArray(n)?[...n,e[1]]:[n,e[1]]:e[1]}a(i,e)}else null!=t&&i(e,t,n);return this}get(t,e){if(t=Bi(t)){const n=li.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(li.isFunction(e))return e.call(this,t,n);if(li.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Bi(t)){const n=li.findKey(this,t);return!(!n||void 0===this[n]||e&&!Ui(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=Bi(t)){const i=li.findKey(n,t);!i||e&&!Ui(0,n[i],i,e)||(delete n[i],r=!0)}}return li.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const i=e[n];t&&!Ui(0,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return li.forEach(this,(r,i)=>{const a=li.findKey(n,i);if(a)return e[a]=ji(r),void delete e[i];const o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}(i):String(i).trim();o!==i&&delete e[i],e[o]=ji(r),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return li.forEach(this,(n,r)=>{null!=n&&!1!==n&&(e[r]=t&&li.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(t=>n.set(t)),n}static accessor(t){const e=(this[Li]=this[Li]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=Bi(t);e[r]||(function(t,e){const n=li.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})})}(n,t),e[r]=!0)}return li.isArray(t)?t.forEach(r):r(t),this}}Fi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),li.reduceDescriptors(Fi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}}),li.freezeMethods(Fi);const qi=Fi;function Hi(t,e){const n=this||zi,r=e||n,i=qi.from(r.headers);let a=r.data;return li.forEach(t,function(t){a=t.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function Gi(t){return!(!t||!t.__CANCEL__)}function Xi(t,e,n){fi.call(this,null==t?"canceled":t,fi.ERR_CANCELED,e,n),this.name="CanceledError"}li.inherits(Xi,fi,{__CANCEL__:!0});const Vi=Xi;function Yi(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new fi("Request failed with status code "+n.status,[fi.ERR_BAD_REQUEST,fi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}const Wi=(t,e,n=3)=>{let r=0;const i=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,a=0,o=0;return e=void 0!==e?e:1e3,function(s){const c=Date.now(),l=r[o];i||(i=c),n[a]=s,r[a]=c;let u=o,d=0;for(;u!==a;)d+=n[u++],u%=t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),c-i<e)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(t,e){let n,r,i=0,a=1e3/e;const o=(e,a=Date.now())=>{i=a,n=null,r&&(clearTimeout(r),r=null),t(...e)};return[(...t)=>{const e=Date.now(),s=e-i;s>=a?o(t,e):(n=t,r||(r=setTimeout(()=>{r=null,o(n)},a-s)))},()=>n&&o(n)]}(n=>{const a=n.loaded,o=n.lengthComputable?n.total:void 0,s=a-r,c=i(s);r=a,t({loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:c||void 0,estimated:c&&o&&a<=o?(o-a)/c:void 0,event:n,lengthComputable:null!=o,[e?"download":"upload"]:!0})},n)},Ji=(t,e)=>{const n=null!=t;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Ki=t=>(...e)=>li.asap(()=>t(...e)),Qi=$i.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,$i.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL($i.origin),$i.navigator&&/(msie|trident)/i.test($i.navigator.userAgent)):()=>!0,Zi=$i.hasStandardBrowserEnv?{write(t,e,n,r,i,a){const o=[t+"="+encodeURIComponent(e)];li.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),li.isString(r)&&o.push("path="+r),li.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ta(t,e,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);return t&&(r||0==n)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const ea=t=>t instanceof qi?{...t}:t;function na(t,e){e=e||{};const n={};function r(t,e,n,r){return li.isPlainObject(t)&&li.isPlainObject(e)?li.merge.call({caseless:r},t,e):li.isPlainObject(e)?li.merge({},e):li.isArray(e)?e.slice():e}function i(t,e,n,i){return li.isUndefined(e)?li.isUndefined(t)?void 0:r(void 0,t,0,i):r(t,e,0,i)}function a(t,e){if(!li.isUndefined(e))return r(void 0,e)}function o(t,e){return li.isUndefined(e)?li.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function s(n,i,a){return a in e?r(n,i):a in t?r(void 0,n):void 0}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(t,e,n)=>i(ea(t),ea(e),0,!0)};return li.forEach(Object.keys({...t,...e}),function(r){const a=c[r]||i,o=a(t[r],e[r],r);li.isUndefined(o)&&a!==s||(n[r]=o)}),n}const ra=t=>{const e=na({},t);let n,{data:r,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:o,headers:s,auth:c}=e;if(e.headers=s=qi.from(s),e.url=ki(ta(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),li.isFormData(r))if($i.hasStandardBrowserEnv||$i.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[t,...e]=n?n.split(";").map(t=>t.trim()).filter(Boolean):[];s.setContentType([t||"multipart/form-data",...e].join("; "))}if($i.hasStandardBrowserEnv&&(i&&li.isFunction(i)&&(i=i(e)),i||!1!==i&&Qi(e.url))){const t=a&&o&&Zi.read(o);t&&s.set(a,t)}return e},ia="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise(function(e,n){const r=ra(t);let i=r.data;const a=qi.from(r.headers).normalize();let o,s,c,l,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let v=new XMLHttpRequest;function m(){if(!v)return;const r=qi.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders());Yi(function(t){e(t),p()},function(t){n(t),p()},{data:d&&"text"!==d&&"json"!==d?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:t,request:v}),v=null}v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout,"onloadend"in v?v.onloadend=m:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(m)},v.onabort=function(){v&&(n(new fi("Request aborted",fi.ECONNABORTED,t,v)),v=null)},v.onerror=function(){n(new fi("Network Error",fi.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let e=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Ai;r.timeoutErrorMessage&&(e=r.timeoutErrorMessage),n(new fi(e,i.clarifyTimeoutError?fi.ETIMEDOUT:fi.ECONNABORTED,t,v)),v=null},void 0===i&&a.setContentType(null),"setRequestHeader"in v&&li.forEach(a.toJSON(),function(t,e){v.setRequestHeader(e,t)}),li.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),d&&"json"!==d&&(v.responseType=r.responseType),f&&([c,u]=Wi(f,!0),v.addEventListener("progress",c)),h&&v.upload&&([s,l]=Wi(h),v.upload.addEventListener("progress",s),v.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(o=e=>{v&&(n(!e||e.type?new Vi(null,t,v):e),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const g=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(r.url);g&&-1===$i.protocols.indexOf(g)?n(new fi("Unsupported protocol "+g+":",fi.ERR_BAD_REQUEST,t)):v.send(i||null)})},aa=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,r=new AbortController;const i=function(t){if(!n){n=!0,o();const e=t instanceof Error?t:this.reason;r.abort(e instanceof fi?e:new Vi(e instanceof Error?e.message:e))}};let a=e&&setTimeout(()=>{a=null,i(new fi(`timeout ${e} of ms exceeded`,fi.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(t=>{t.unsubscribe?t.unsubscribe(i):t.removeEventListener("abort",i)}),t=null)};t.forEach(t=>t.addEventListener("abort",i));const{signal:s}=r;return s.unsubscribe=()=>li.asap(o),s}},oa=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let r,i=0;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},sa=(t,e,n,r)=>{const i=async function*(t,e){for await(const n of async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}}(t))yield*oa(n,e)}(t,e);let a,o=0,s=t=>{a||(a=!0,r&&r(t))};return new ReadableStream({async pull(t){try{const{done:e,value:r}=await i.next();if(e)return s(),void t.close();let a=r.byteLength;if(n){let t=o+=a;n(t)}t.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:t=>(s(t),i.return())},{highWaterMark:2})},ca="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,la=ca&&"function"==typeof ReadableStream,ua=ca&&("function"==typeof TextEncoder?(da=new TextEncoder,t=>da.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var da;const ha=(t,...e)=>{try{return!!t(...e)}catch(t){return!1}},fa=la&&ha(()=>{let t=!1;const e=new Request($i.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),pa=la&&ha(()=>li.isReadableStream(new Response("").body)),va={stream:pa&&(t=>t.body)};var ma;ca&&(ma=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!va[t]&&(va[t]=li.isFunction(ma[t])?e=>e[t]():(e,n)=>{throw new fi(`Response type '${t}' is not supported`,fi.ERR_NOT_SUPPORT,n)})}));const ga=ca&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=ra(t);l=l?(l+"").toLowerCase():"text";let f,p=aa([i,a&&a.toAbortSignal()],o);const v=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let m;try{if(c&&fa&&"get"!==n&&"head"!==n&&0!==(m=await(async(t,e)=>{const n=li.toFiniteNumber(t.getContentLength());return null==n?(async t=>{if(null==t)return 0;if(li.isBlob(t))return t.size;if(li.isSpecCompliantForm(t)){const e=new Request($i.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return li.isArrayBufferView(t)||li.isArrayBuffer(t)?t.byteLength:(li.isURLSearchParams(t)&&(t+=""),li.isString(t)?(await ua(t)).byteLength:void 0)})(e):n})(u,r))){let t,n=new Request(e,{method:"POST",body:r,duplex:"half"});if(li.isFormData(r)&&(t=n.headers.get("content-type"))&&u.setContentType(t),n.body){const[t,e]=Ji(m,Wi(Ki(c)));r=sa(n.body,65536,t,e)}}li.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;f=new Request(e,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let a=await fetch(f,h);const o=pa&&("stream"===l||"response"===l);if(pa&&(s||o&&v)){const t={};["status","statusText","headers"].forEach(e=>{t[e]=a[e]});const e=li.toFiniteNumber(a.headers.get("content-length")),[n,r]=s&&Ji(e,Wi(Ki(s),!0))||[];a=new Response(sa(a.body,65536,n,()=>{r&&r(),v&&v()}),t)}l=l||"text";let g=await va[li.findKey(va,l)||"text"](a,t);return!o&&v&&v(),await new Promise((e,n)=>{Yi(e,n,{data:g,headers:qi.from(a.headers),status:a.status,statusText:a.statusText,config:t,request:f})})}catch(e){if(v&&v(),e&&"TypeError"===e.name&&/Load failed|fetch/i.test(e.message))throw Object.assign(new fi("Network Error",fi.ERR_NETWORK,t,f),{cause:e.cause||e});throw fi.from(e,e&&e.code,t,f)}}),ya={http:null,xhr:ia,fetch:ga};li.forEach(ya,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}});const wa=t=>`- ${t}`,ba=t=>li.isFunction(t)||null===t||!1===t,xa=t=>{t=li.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let a=0;a<e;a++){let e;if(n=t[a],r=n,!ba(n)&&(r=ya[(e=String(n)).toLowerCase()],void 0===r))throw new fi(`Unknown adapter '${e}'`);if(r)break;i[e||"#"+a]=r}if(!r){const t=Object.entries(i).map(([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build"));let n=e?t.length>1?"since :\n"+t.map(wa).join("\n"):" "+wa(t[0]):"as no adapter specified";throw new fi("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function _a(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Vi(null,t)}function Ea(t){return _a(t),t.headers=qi.from(t.headers),t.data=Hi.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xa(t.adapter||zi.adapter)(t).then(function(e){return _a(t),e.data=Hi.call(t,t.transformResponse,e),e.headers=qi.from(e.headers),e},function(e){return Gi(e)||(_a(t),e&&e.response&&(e.response.data=Hi.call(t,t.transformResponse,e.response),e.response.headers=qi.from(e.response.headers))),Promise.reject(e)})}const ka="1.11.0",Sa={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Sa[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Aa={};Sa.transitional=function(t,e,n){function r(t,e){return"[Axios v"+ka+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,a)=>{if(!1===t)throw new fi(r(i," has been removed"+(e?" in "+e:"")),fi.ERR_DEPRECATED);return e&&!Aa[i]&&(Aa[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,a)}},Sa.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};const Ra={assertOptions:function(t,e,n){if("object"!=typeof t)throw new fi("options must be an object",fi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const a=r[i],o=e[a];if(o){const e=t[a],n=void 0===e||o(e,a,t);if(!0!==n)throw new fi("option "+a+" must be "+n,fi.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new fi("Unknown option "+a,fi.ERR_BAD_OPTION)}},validators:Sa},Pa=Ra.validators;class Ta{constructor(t){this.defaults=t||{},this.interceptors={request:new Si,response:new Si}}async request(t,e){try{return await this._request(t,e)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const n=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?n&&!String(t.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+n):t.stack=n}catch(t){}}throw t}}_request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=na(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;void 0!==n&&Ra.assertOptions(n,{silentJSONParsing:Pa.transitional(Pa.boolean),forcedJSONParsing:Pa.transitional(Pa.boolean),clarifyTimeoutError:Pa.transitional(Pa.boolean)},!1),null!=r&&(li.isFunction(r)?e.paramsSerializer={serialize:r}:Ra.assertOptions(r,{encode:Pa.function,serialize:Pa.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Ra.assertOptions(e,{baseUrl:Pa.spelling("baseURL"),withXsrfToken:Pa.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a=i&&li.merge(i.common,i[e.method]);i&&li.forEach(["delete","get","head","post","put","patch","common"],t=>{delete i[t]}),e.headers=qi.concat(a,i);const o=[];let s=!0;this.interceptors.request.forEach(function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,o.unshift(t.fulfilled,t.rejected))});const c=[];let l;this.interceptors.response.forEach(function(t){c.push(t.fulfilled,t.rejected)});let u,d=0;if(!s){const t=[Ea.bind(this),void 0];for(t.unshift(...o),t.push(...c),u=t.length,l=Promise.resolve(e);d<u;)l=l.then(t[d++],t[d++]);return l}u=o.length;let h=e;for(d=0;d<u;){const t=o[d++],e=o[d++];try{h=t(h)}catch(t){e.call(this,t);break}}try{l=Ea.call(this,h)}catch(t){return Promise.reject(t)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(t){return ki(ta((t=na(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}}li.forEach(["delete","get","head","options"],function(t){Ta.prototype[t]=function(e,n){return this.request(na(n||{},{method:t,url:e,data:(n||{}).data}))}}),li.forEach(["post","put","patch"],function(t){function e(e){return function(n,r,i){return this.request(na(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ta.prototype[t]=e(),Ta.prototype[t+"Form"]=e(!0)});const Na=Ta;class Ia{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(t){e=t});const n=this;this.promise.then(t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null}),this.promise.then=t=>{let e;const r=new Promise(t=>{n.subscribe(t),e=t}).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t(function(t,r,i){n.reason||(n.reason=new Vi(t,r,i),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Ia(function(e){t=e}),cancel:t}}}const Ma=Ia,$a={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($a).forEach(([t,e])=>{$a[e]=t});const Ca=$a,Oa=function t(e){const n=new Na(e),r=wr(Na.prototype.request,n);return li.extend(r,Na.prototype,n,{allOwnKeys:!0}),li.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(na(e,n))},r}(zi);Oa.Axios=Na,Oa.CanceledError=Vi,Oa.CancelToken=Ma,Oa.isCancel=Gi,Oa.VERSION=ka,Oa.toFormData=yi,Oa.AxiosError=fi,Oa.Cancel=Oa.CanceledError,Oa.all=function(t){return Promise.all(t)},Oa.spread=function(t){return function(e){return t.apply(null,e)}},Oa.isAxiosError=function(t){return li.isObject(t)&&!0===t.isAxiosError},Oa.mergeConfig=na,Oa.AxiosHeaders=qi,Oa.formToJSON=t=>Ci(li.isHTMLForm(t)?new FormData(t):t),Oa.getAdapter=xa,Oa.HttpStatusCode=Ca,Oa.default=Oa;const za=Oa;class Da{constructor(){this.apiBaseUrl="https://api.storyapis.com/assets",this.rpcUrl="https://aeneid.storyrpc.io",this.apiHeaders={"X-CHAIN":"story-aeneid","X-API-Key":"MhBsxkU1z9fG6TofE59KqiiWV-YlYE8Q4awlLQehF3U","Content-Type":"application/json"}}async getIPAsset(t){try{const e=(await za.get(`${this.apiBaseUrl}/assets/${t}`,{headers:this.apiHeaders})).data;return{id:e.id||t,name:e.name||e.metadata?.title||`IP Asset ${t.slice(0,8)}...`,owner:e.owner,type:e.type||"IP Asset",revenue:e.revenue||0,derivatives:e.derivatives||0,createdAt:e.createdAt,totalRevenue:e.totalRevenue||0,monthlyRevenue:e.monthlyRevenue||[],licenseTerms:e.licenseTerms||[],tags:e.tags||[],metadata:e.metadata}}catch(e){return console.error("Error fetching IP Asset from API:",e),this.getIPAssetFromBlockchain(t)}}async getIPAssetFromBlockchain(t){try{const e=await za.post(this.rpcUrl,{jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:"0x06fdde03"},"latest"],id:1});if(e.data.result&&"0x"!==e.data.result)return{id:t,name:`IP Asset ${t.slice(0,8)}...`,owner:"Unknown",type:"IP Asset",revenue:0,derivatives:0,createdAt:(new Date).toISOString(),totalRevenue:0,monthlyRevenue:[],licenseTerms:[],tags:["blockchain","story-protocol"],metadata:{title:`IP Asset ${t.slice(0,8)}`,description:"IP Asset registered on Story Protocol",image:"https://via.placeholder.com/300x300?text=Story+IP"}};throw new Error("No data found on blockchain")}catch(e){throw console.error("Error fetching from blockchain:",e),new Error(`Failed to fetch IP Asset ${t} - Asset may not exist`)}}async getIPRelationships(t){try{return(await za.get(`${this.apiBaseUrl}/assets/${t}/relationships`,{headers:this.apiHeaders})).data.map(t=>({type:t.type,source:t.source,target:t.target,name:t.name,owner:t.owner,revenue:t.revenue,derivatives:t.derivatives,licenseType:t.licenseType,royaltyRate:t.royaltyRate,createdAt:t.createdAt}))}catch(e){throw console.error("Error fetching IP relationships:",e),new Error(`Failed to fetch relationships for IP Asset ${t}`)}}async getRandomIP(){return"0xB1D831271A68Db5c18c8F0B69327446f7C8D0A42"}async getRevenueData(t){try{const e=(await za.get(`${this.apiBaseUrl}/assets/${t}/revenue`,{headers:this.apiHeaders})).data;return{totalRevenue:e.totalRevenue||0,monthlyRevenue:e.monthlyRevenue||[],topEarningDerivatives:e.topEarningDerivatives||[],revenueBreakdown:e.revenueBreakdown||{directSales:0,royalties:0,licensing:0}}}catch(e){throw console.error("Error fetching revenue data:",e),new Error(`Failed to fetch revenue data for IP Asset ${t}`)}}async searchIPAssets(t){try{return(await za.get(`${this.apiBaseUrl}/assets/search`,{headers:this.apiHeaders,params:{q:t,limit:10}})).data.map(t=>({id:t.id,name:t.name||t.metadata?.title,owner:t.owner,type:t.type,revenue:t.revenue||0,derivatives:t.derivatives||0,totalRevenue:t.totalRevenue||0,tags:t.tags||[],metadata:t.metadata}))}catch(t){throw console.error("Error searching IP assets:",t),new Error("Failed to search IP assets")}}async getIPAnalytics(t){try{const[e,n]=await Promise.all([this.getRevenueData(t),this.getIPRelationships(t)]);return{totalRevenue:e.totalRevenue,totalDerivatives:n.filter(t=>"derivative"===t.type).length,monthlyRevenue:e.monthlyRevenue,topDerivatives:e.topEarningDerivatives,revenueGrowth:this.calculateRevenueGrowth(e.monthlyRevenue),licenseTypes:n.map(t=>t.licenseType).filter(Boolean),averageRoyaltyRate:n.reduce((t,e)=>t+(e.royaltyRate||0),0)/n.length,creationTrend:this.generateCreationTrend(n)}}catch(t){throw console.error("Error fetching IP analytics:",t),t}}calculateRevenueGrowth(t){if(t.length<2)return 0;const e=t.slice(-3).reduce((t,e)=>t+e,0)/3,n=t.slice(-6,-3).reduce((t,e)=>t+e,0)/3;return n>0?(e-n)/n*100:0}generateCreationTrend(t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(t=>({month:t,count:Math.floor(5*Math.random())}))}isValidIPId(t){return/^0x[a-fA-F0-9]{40}$/.test(t)}getNetworkInfo(){return{name:"Story Aeneid Testnet",chainId:"1315",explorer:"https://aeneid.storyscan.io"}}async getEcosystemOverview(){try{return(await za.get(`${this.apiBaseUrl}/ecosystem/overview`,{headers:this.apiHeaders})).data}catch(t){throw console.error("Error fetching ecosystem overview:",t),new Error("Failed to fetch ecosystem overview")}}}class La{constructor(t){this.charts=new Map,this.container=t,this.data=this.initializeAnalyticsData(),this.setupEventListeners()}initializeAnalyticsData(){const t=localStorage.getItem("ip-graph-analytics");return t?JSON.parse(t):{totalIPs:0,totalRelationships:0,avgDerivatives:0,totalRevenue:0,searchCount:0,visualizationCount:0,topSearchedIPs:[],performanceMetrics:{avgLoadTime:0,successRate:100,errorRate:0},usageStats:{dailyActive:1,weeklyActive:1,totalSessions:1,avgSessionDuration:0},networkStats:{mostConnectedIP:{id:"",name:"",connections:0},largestNetwork:{rootId:"",nodeCount:0,depth:0},averageNetworkSize:0},revenueAnalytics:{totalEcosystemRevenue:0,averageIPRevenue:0,topRevenueGenerators:[],revenueDistribution:{original:0,derivatives:0,licenses:0}},timeSeriesData:{searchActivity:this.generateMockTimeSeriesData("search"),revenueGrowth:this.generateMockTimeSeriesData("revenue"),networkGrowth:this.generateMockTimeSeriesData("network")}}}generateMockTimeSeriesData(t){const e=[],n=new Date;for(let r=29;r>=0;r--){const i=new Date(n.getTime()-24*r*60*60*1e3);switch(t){case"search":e.push({date:i.toISOString().split("T")[0],searches:Math.floor(20*Math.random())+5,visualizations:Math.floor(15*Math.random())+3});break;case"revenue":e.push({month:i.toLocaleDateString("en",{month:"short"}),revenue:1e3*Math.random()+500,growth:20*(Math.random()-.5)});break;case"network":e.push({month:i.toLocaleDateString("en",{month:"short"}),newIPs:Math.floor(10*Math.random())+2,newRelationships:Math.floor(25*Math.random())+5})}}return e}render(){this.container.innerHTML=`\n      <div class="analytics-dashboard">\n        ${this.renderOverviewCards()}\n        ${this.renderPerformanceMetrics()}\n        ${this.renderUsageStatistics()}\n        ${this.renderNetworkAnalytics()}\n        ${this.renderRevenueAnalytics()}\n        ${this.renderTimeSeriesCharts()}\n        ${this.renderTopSearchedIPs()}\n      </div>\n    `,this.addStyles(),this.initializeCharts()}renderOverviewCards(){return`\n      <div class="overview-cards">\n        <div class="analytics-card primary">\n          <div class="card-icon">📊</div>\n          <div class="card-content">\n            <div class="card-value">${this.data.totalIPs.toLocaleString()}</div>\n            <div class="card-label">Total IPs Analyzed</div>\n            <div class="card-change positive">+${Math.floor(20*Math.random())}% this week</div>\n          </div>\n        </div>\n        \n        <div class="analytics-card secondary">\n          <div class="card-icon">🔗</div>\n          <div class="card-content">\n            <div class="card-value">${this.data.totalRelationships.toLocaleString()}</div>\n            <div class="card-label">Relationships Found</div>\n            <div class="card-change positive">+${Math.floor(15*Math.random())}% this week</div>\n          </div>\n        </div>\n        \n        <div class="analytics-card success">\n          <div class="card-icon">💰</div>\n          <div class="card-content">\n            <div class="card-value">$${this.data.totalRevenue.toLocaleString()}</div>\n            <div class="card-label">Total Revenue Tracked</div>\n            <div class="card-change positive">+${Math.floor(25*Math.random())}% this month</div>\n          </div>\n        </div>\n        \n        <div class="analytics-card info">\n          <div class="card-icon">🔍</div>\n          <div class="card-content">\n            <div class="card-value">${this.data.searchCount.toLocaleString()}</div>\n            <div class="card-label">Total Searches</div>\n            <div class="card-change neutral">${this.data.avgDerivatives.toFixed(1)} avg derivatives</div>\n          </div>\n        </div>\n      </div>\n    `}renderPerformanceMetrics(){const t=this.data.performanceMetrics?.avgLoadTime||0,e=this.data.performanceMetrics?.successRate||0,n=this.data.performanceMetrics?.errorRate||0;return`\n    <div class="performance-section">\n      <h3>⚡ Performance Metrics</h3>\n      <div class="metrics-grid">\n        <div class="metric-item">\n          <div class="metric-label">Average Load Time</div>\n          <div class="metric-value">${t.toFixed(2)}s</div>\n          <div class="metric-bar">\n            <div class="metric-fill" style="width: ${Math.min(20*t,100)}%"></div>\n          </div>\n        </div>\n        \n        <div class="metric-item">\n          <div class="metric-label">Success Rate</div>\n          <div class="metric-value">${e.toFixed(1)}%</div>\n          <div class="metric-bar">\n            <div class="metric-fill success" style="width: ${Math.max(0,Math.min(e,100))}%"></div>\n          </div>\n        </div>\n        \n        <div class="metric-item">\n          <div class="metric-label">Error Rate</div>\n          <div class="metric-value">${n.toFixed(1)}%</div>\n          <div class="metric-bar">\n            <div class="metric-fill error" style="width: ${Math.max(0,Math.min(n,100))}%"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `}renderUsageStatistics(){return`\n      <div class="usage-section">\n        <h3>👥 Usage Statistics</h3>\n        <div class="usage-stats">\n          <div class="usage-stat">\n            <div class="stat-icon">📅</div>\n            <div class="stat-content">\n              <div class="stat-value">${this.data.usageStats.dailyActive}</div>\n              <div class="stat-label">Daily Active</div>\n            </div>\n          </div>\n          \n          <div class="usage-stat">\n            <div class="stat-icon">📊</div>\n            <div class="stat-content">\n              <div class="stat-value">${this.data.usageStats.totalSessions}</div>\n              <div class="stat-label">Total Sessions</div>\n            </div>\n          </div>\n          \n          <div class="usage-stat">\n            <div class="stat-icon">⏱️</div>\n            <div class="stat-content">\n              <div class="stat-value">${Math.floor(this.data.usageStats.avgSessionDuration/60)}m</div>\n              <div class="stat-label">Avg Session</div>\n            </div>\n          </div>\n          \n          <div class="usage-stat">\n            <div class="stat-icon">🎯</div>\n            <div class="stat-content">\n              <div class="stat-value">${this.data.visualizationCount}</div>\n              <div class="stat-label">Visualizations</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}renderNetworkAnalytics(){const t=this.data.networkStats,e=t.averageNetworkSize||0;return`\n    <div class="network-section">\n      <h3>🌐 Network Analytics</h3>\n      <div class="network-stats">\n        <div class="network-stat-card">\n          <h4>Most Connected IP</h4>\n          <div class="network-detail">\n            <div class="ip-name">${t.mostConnectedIP.name||"Digital Art Masterpiece"}</div>\n            <div class="ip-id">${t.mostConnectedIP.id||"0x1234...7890"}</div>\n            <div class="connection-count">${t.mostConnectedIP.connections||8} connections</div>\n          </div>\n        </div>\n        \n        <div class="network-stat-card">\n          <h4>Largest Network</h4>\n          <div class="network-detail">\n            <div class="network-size">${t.largestNetwork.nodeCount||12} nodes</div>\n            <div class="network-depth">Depth: ${t.largestNetwork.depth||4} levels</div>\n            <div class="network-root">Root: ${(t.largestNetwork.rootId||"0x4567...0123").slice(0,10)}...</div>\n          </div>\n        </div>\n        \n        <div class="network-stat-card">\n          <h4>Average Network Size</h4>\n          <div class="network-detail">\n            <div class="avg-size">${e.toFixed(1)} nodes</div>\n            <div class="network-trend">📈 Growing</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `}renderRevenueAnalytics(){const t=this.data.revenueAnalytics;return`\n      <div class="revenue-section">\n        <h3>💎 Revenue Analytics</h3>\n        <div class="revenue-overview">\n          <div class="revenue-total">\n            <div class="total-amount">$${t.totalEcosystemRevenue.toLocaleString()||"24,580"}</div>\n            <div class="total-label">Total Ecosystem Revenue</div>\n          </div>\n          \n          <div class="revenue-distribution">\n            <div class="distribution-item">\n              <span class="dist-label">Original Works</span>\n              <span class="dist-value">$${t.revenueDistribution.original.toLocaleString()||"15,200"}</span>\n              <div class="dist-bar">\n                <div class="dist-fill original" style="width: ${t.revenueDistribution.original/t.totalEcosystemRevenue*100||62}%"></div>\n              </div>\n            </div>\n            \n            <div class="distribution-item">\n              <span class="dist-label">Derivatives</span>\n              <span class="dist-value">$${t.revenueDistribution.derivatives.toLocaleString()||"7,380"}</span>\n              <div class="dist-bar">\n                <div class="dist-fill derivative" style="width: ${t.revenueDistribution.derivatives/t.totalEcosystemRevenue*100||30}%"></div>\n              </div>\n            </div>\n            \n            <div class="distribution-item">\n              <span class="dist-label">Licenses</span>\n              <span class="dist-value">$${t.revenueDistribution.licenses.toLocaleString()||"2,000"}</span>\n              <div class="dist-bar">\n                <div class="dist-fill license" style="width: ${t.revenueDistribution.licenses/t.totalEcosystemRevenue*100||8}%"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}renderTimeSeriesCharts(){return'\n      <div class="charts-section">\n        <h3>📈 Activity Trends</h3>\n        <div class="charts-container">\n          <div class="chart-card">\n            <h4>Search Activity (Last 30 Days)</h4>\n            <div id="search-activity-chart" class="chart-placeholder">\n              <div class="chart-loading">Loading chart...</div>\n            </div>\n          </div>\n          \n          <div class="chart-card">\n            <h4>Network Growth</h4>\n            <div id="network-growth-chart" class="chart-placeholder">\n              <div class="chart-loading">Loading chart...</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '}renderTopSearchedIPs(){return`\n      <div class="top-searches-section">\n        <h3>🔥 Most Searched IPs</h3>\n        <div class="top-searches-list">\n          ${(this.data.topSearchedIPs.length>0?this.data.topSearchedIPs:[{id:"0x1234567890123456789012345678901234567890",name:"Digital Art Masterpiece",searchCount:15,lastSearched:"2024-08-05T10:30:00Z"},{id:"0x4567890123456789012345678901234567890123",name:"NFT Collection Genesis",searchCount:12,lastSearched:"2024-08-05T09:15:00Z"},{id:"0x6789012345678901234567890123456789012345",name:"AI Generated Art Series",searchCount:8,lastSearched:"2024-08-05T08:45:00Z"}]).map((t,e)=>`\n            <div class="search-item" data-ip-id="${t.id}">\n              <div class="search-rank">#${e+1}</div>\n              <div class="search-details">\n                <div class="search-name">${t.name}</div>\n                <div class="search-id">${t.id.slice(0,10)}...${t.id.slice(-8)}</div>\n                <div class="search-meta">\n                  <span class="search-count">${t.searchCount} searches</span>\n                  <span class="last-searched">Last: ${new Date(t.lastSearched).toLocaleDateString()}</span>\n                </div>\n              </div>\n              <div class="search-actions">\n                <button class="search-again-btn" data-ip-id="${t.id}">🔍</button>\n              </div>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    `}initializeCharts(){this.renderSearchActivityChart(),this.renderNetworkGrowthChart()}renderSearchActivityChart(){const t=document.getElementById("search-activity-chart");if(!t)return;const e=this.data.timeSeriesData.searchActivity.slice(-7),n=Math.max(...e.map(t=>Math.max(t.searches,t.visualizations)));t.innerHTML=`\n      <div class="simple-chart">\n        ${e.map((t,e)=>`\n          <div class="chart-day">\n            <div class="chart-bars">\n              <div class="chart-bar searches" style="height: ${t.searches/n*100}%" title="Searches: ${t.searches}"></div>\n              <div class="chart-bar visualizations" style="height: ${t.visualizations/n*100}%" title="Visualizations: ${t.visualizations}"></div>\n            </div>\n            <div class="chart-label">${new Date(t.date).toLocaleDateString("en",{weekday:"short"})}</div>\n          </div>\n        `).join("")}\n      </div>\n      <div class="chart-legend">\n        <div class="legend-item">\n          <div class="legend-color searches"></div>\n          <span>Searches</span>\n        </div>\n        <div class="legend-item">\n          <div class="legend-color visualizations"></div>\n          <span>Visualizations</span>\n        </div>\n      </div>\n    `}renderNetworkGrowthChart(){const t=document.getElementById("network-growth-chart");if(!t)return;const e=this.data.timeSeriesData.networkGrowth.slice(-6),n=Math.max(...e.map(t=>Math.max(t.newIPs,t.newRelationships)));t.innerHTML=`\n      <div class="simple-chart">\n        ${e.map((t,e)=>`\n          <div class="chart-month">\n            <div class="chart-bars">\n              <div class="chart-bar new-ips" style="height: ${t.newIPs/n*100}%" title="New IPs: ${t.newIPs}"></div>\n              <div class="chart-bar new-relationships" style="height: ${t.newRelationships/n*100}%" title="New Relationships: ${t.newRelationships}"></div>\n            </div>\n            <div class="chart-label">${t.month}</div>\n          </div>\n        `).join("")}\n      </div>\n      <div class="chart-legend">\n        <div class="legend-item">\n          <div class="legend-color new-ips"></div>\n          <span>New IPs</span>\n        </div>\n        <div class="legend-item">\n          <div class="legend-color new-relationships"></div>\n          <span>New Relationships</span>\n        </div>\n      </div>\n    `}setupEventListeners(){document.addEventListener("click",t=>{const e=t.target;if(e.classList.contains("search-again-btn")){const t=e.getAttribute("data-ip-id");t&&this.handleSearchAgain(t)}})}handleSearchAgain(t){const e=new CustomEvent("searchIP",{detail:{ipId:t}});document.dispatchEvent(e)}trackSearch(t,e){this.data.searchCount++,this.data.totalIPs++;const n=this.data.topSearchedIPs.findIndex(e=>e.id===t);n>=0?(this.data.topSearchedIPs[n].searchCount++,this.data.topSearchedIPs[n].lastSearched=(new Date).toISOString()):this.data.topSearchedIPs.push({id:t,name:e,searchCount:1,lastSearched:(new Date).toISOString()}),this.data.topSearchedIPs.sort((t,e)=>e.searchCount-t.searchCount),this.data.topSearchedIPs=this.data.topSearchedIPs.slice(0,10),this.saveData()}trackVisualization(t){this.data.visualizationCount++,this.data.totalRelationships+=t,this.data.avgDerivatives=this.data.totalRelationships/this.data.totalIPs,this.saveData()}trackPerformance(t,e){const n=this.data.performanceMetrics.avgLoadTime,r=this.data.searchCount;this.data.performanceMetrics.avgLoadTime=(n*(r-1)+t)/r,e?this.data.performanceMetrics.successRate=(this.data.performanceMetrics.successRate*(r-1)+100)/r:this.data.performanceMetrics.errorRate=(this.data.performanceMetrics.errorRate*(r-1)+100)/r,this.saveData()}updateRevenue(t){this.data.totalRevenue+=t,this.data.revenueAnalytics.totalEcosystemRevenue+=t,this.data.revenueAnalytics.averageIPRevenue=this.data.revenueAnalytics.totalEcosystemRevenue/this.data.totalIPs,this.saveData()}saveData(){localStorage.setItem("ip-graph-analytics",JSON.stringify(this.data))}exportData(){return JSON.stringify(this.data,null,2)}clearData(){localStorage.removeItem("ip-graph-analytics"),this.data=this.initializeAnalyticsData(),this.render()}addStyles(){if(document.getElementById("analytics-dashboard-styles"))return;const t=document.createElement("style");t.id="analytics-dashboard-styles",t.textContent="\n      .analytics-dashboard {\n        padding: 20px;\n        background: #f8f9fa;\n        border-radius: 12px;\n        margin: 15px 0;\n      }\n\n      .overview-cards {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 15px;\n        margin-bottom: 25px;\n      }\n\n      .analytics-card {\n        background: white;\n        border-radius: 12px;\n        padding: 20px;\n        display: flex;\n        align-items: center;\n        gap: 15px;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n        transition: transform 0.2s ease;\n      }\n\n      .analytics-card:hover {\n        transform: translateY(-2px);\n      }\n\n      .analytics-card.primary { border-left: 4px solid #667eea; }\n      .analytics-card.secondary { border-left: 4px solid #764ba2; }\n      .analytics-card.success { border-left: 4px solid #10b981; }\n      .analytics-card.info { border-left: 4px solid #3b82f6; }\n\n      .card-icon {\n        font-size: 24px;\n        opacity: 0.8;\n      }\n\n      .card-content {\n        flex: 1;\n      }\n\n      .card-value {\n        font-size: 24px;\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 4px;\n      }\n\n      .card-label {\n        font-size: 12px;\n        color: #666;\n        margin-bottom: 4px;\n      }\n\n      .card-change {\n        font-size: 11px;\n        font-weight: 600;\n      }\n\n      .card-change.positive { color: #10b981; }\n      .card-change.negative { color: #ef4444; }\n      .card-change.neutral { color: #6b7280; }\n\n      .performance-section,\n      .usage-section,\n      .network-section,\n      .revenue-section,\n      .charts-section,\n      .top-searches-section {\n        background: white;\n        border-radius: 12px;\n        padding: 20px;\n        margin-bottom: 20px;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n      }\n\n      .performance-section h3,\n      .usage-section h3,\n      .network-section h3,\n      .revenue-section h3,\n      .charts-section h3,\n      .top-searches-section h3 {\n        margin: 0 0 20px 0;\n        color: #333;\n        font-size: 16px;\n      }\n\n      .metrics-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 15px;\n      }\n\n      .metric-item {\n        padding: 15px;\n        background: #f8f9fa;\n        border-radius: 8px;\n      }\n\n      .metric-label {\n        font-size: 12px;\n        color: #666;\n        margin-bottom: 8px;\n      }\n\n      .metric-value {\n        font-size: 18px;\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 10px;\n      }\n\n      .metric-bar {\n        height: 6px;\n        background: #e5e7eb;\n        border-radius: 3px;\n        overflow: hidden;\n      }\n\n      .metric-fill {\n        height: 100%;\n        background: #667eea;\n        transition: width 0.3s ease;\n      }\n\n      .metric-fill.success { background: #10b981; }\n      .metric-fill.error { background: #ef4444; }\n\n      .usage-stats {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n        gap: 15px;\n      }\n\n      .usage-stat {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 15px;\n        background: #f8f9fa;\n        border-radius: 8px;\n      }\n\n      .stat-icon {\n        font-size: 20px;\n        opacity: 0.8;\n      }\n\n      .stat-value {\n        font-size: 20px;\n        font-weight: bold;\n        color: #333;\n      }\n\n      .stat-label {\n        font-size: 11px;\n        color: #666;\n      }\n\n      .network-stats {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 15px;\n      }\n\n      .network-stat-card {\n        padding: 15px;\n        background: #f8f9fa;\n        border-radius: 8px;\n      }\n\n      .network-stat-card h4 {\n        margin: 0 0 12px 0;\n        font-size: 14px;\n        color: #333;\n      }\n\n      .network-detail {\n        font-size: 12px;\n      }\n\n      .ip-name, .network-size, .avg-size {\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 4px;\n      }\n\n      .ip-id, .network-depth, .network-root, .network-trend {\n        color: #666;\n        margin-bottom: 2px;\n      }\n\n      .revenue-overview {\n        display: grid;\n        grid-template-columns: 1fr 2fr;\n        gap: 20px;\n        align-items: start;\n      }\n\n      .revenue-total {\n        text-align: center;\n        padding: 20px;\n        background: linear-gradient(135deg, #667eea, #764ba2);\n        color: white;\n        border-radius: 12px;\n      }\n\n      .total-amount {\n        font-size: 28px;\n        font-weight: bold;\n        margin-bottom: 8px;\n      }\n\n      .total-label {\n        font-size: 12px;\n        opacity: 0.9;\n      }\n\n      .revenue-distribution {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n      }\n\n      .distribution-item {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n      }\n\n      .dist-label {\n        flex: 1;\n        font-size: 12px;\n        color: #666;\n      }\n\n      .dist-value {\n        font-size: 12px;\n        font-weight: 600;\n        color: #333;\n        min-width: 80px;\n        text-align: right;\n      }\n\n      .dist-bar {\n        flex: 2;\n        height: 8px;\n        background: #e5e7eb;\n        border-radius: 4px;\n        overflow: hidden;\n      }\n\n      .dist-fill {\n        height: 100%;\n        transition: width 0.3s ease;\n      }\n\n      .dist-fill.original { background: #667eea; }\n      .dist-fill.derivative { background: #10b981; }\n      .dist-fill.license { background: #f59e0b; }\n\n      .charts-container {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n        gap: 20px;\n      }\n\n      .chart-card {\n        background: #f8f9fa;\n        border-radius: 8px;\n        padding: 15px;\n      }\n\n      .chart-card h4 {\n        margin: 0 0 15px 0;\n        font-size: 14px;\n        color: #333;\n      }\n\n      .chart-placeholder {\n        height: 200px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: white;\n        border-radius: 6px;\n      }\n\n      .simple-chart {\n        display: flex;\n        align-items: end;\n        gap: 8px;\n        height: 150px;\n        padding: 10px;\n      }\n\n      .chart-day, .chart-month {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 5px;\n      }\n\n      .chart-bars {\n        display: flex;\n        align-items: end;\n        gap: 2px;\n        height: 120px;\n      }\n\n      .chart-bar {\n        width: 12px;\n        border-radius: 2px 2px 0 0;\n        min-height: 2px;\n        transition: all 0.3s ease;\n      }\n\n      .chart-bar.searches, .chart-bar.new-ips { background: #667eea; }\n      .chart-bar.visualizations, .chart-bar.new-relationships { background: #10b981; }\n\n      .chart-label {\n        font-size: 10px;\n        color: #666;\n        text-align: center;\n      }\n\n      .chart-legend {\n        display: flex;\n        justify-content: center;\n        gap: 20px;\n        margin-top: 10px;\n      }\n\n      .legend-item {\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        font-size: 11px;\n        color: #666;\n      }\n\n      .legend-color {\n        width: 12px;\n        height: 12px;\n        border-radius: 2px;\n      }\n\n      .legend-color.searches, .legend-color.new-ips { background: #667eea; }\n      .legend-color.visualizations, .legend-color.new-relationships { background: #10b981; }\n\n      .top-searches-list {\n        display: flex;\n        flex-direction: column;\n        gap: 10px;\n      }\n\n      .search-item {\n        display: flex;\n        align-items: center;\n        gap: 15px;\n        padding: 15px;\n        background: #f8f9fa;\n        border-radius: 8px;\n        cursor: pointer;\n        transition: background 0.2s ease;\n      }\n\n      .search-item:hover {\n        background: #e9ecef;\n      }\n\n      .search-rank {\n        font-size: 16px;\n        font-weight: bold;\n        color: #667eea;\n        min-width: 30px;\n      }\n\n      .search-details {\n        flex: 1;\n      }\n\n      .search-name {\n        font-size: 13px;\n        font-weight: 600;\n        color: #333;\n        margin-bottom: 4px;\n      }\n\n      .search-id {\n        font-size: 11px;\n        font-family: monospace;\n        color: #666;\n        margin-bottom: 4px;\n      }\n\n      .search-meta {\n        display: flex;\n        gap: 15px;\n        font-size: 10px;\n        color: #888;\n      }\n\n      .search-actions {\n        display: flex;\n        gap: 8px;\n      }\n\n      .search-again-btn {\n        background: #667eea;\n        color: white;\n        border: none;\n        border-radius: 6px;\n        padding: 8px 12px;\n        cursor: pointer;\n        font-size: 12px;\n        transition: background 0.2s ease;\n      }\n\n      .search-again-btn:hover {\n        background: #5a67d8;\n      }\n\n      @media (max-width: 768px) {\n        .overview-cards {\n          grid-template-columns: 1fr;\n        }\n        \n        .revenue-overview {\n          grid-template-columns: 1fr;\n        }\n        \n        .charts-container {\n          grid-template-columns: 1fr;\n          max-width: 100%;\n          overflow-x: auto;\n        }\n      }\n    ",document.head.appendChild(t)}}const Ba=t.p+"assets/5aa84849832f7c5978fb.png";let ja=null,Ua=null,Fa=null,qa={totalIPs:0,totalRelationships:0,avgDerivatives:0};async function Ha(t){if(!ja||!Ua)return;const e=performance.now();let n=!1;try{Xa(!0);const e=await Ua.getIPAsset(t),r=await Ua.getIPRelationships(t);Fa&&(Fa.trackSearch(t,e.name||"Unknown IP"),Fa.trackVisualization(r.length),Fa.updateRevenue(e.revenue||0)),qa.totalIPs++,qa.totalRelationships+=r.length,qa.avgDerivatives=qa.totalRelationships/qa.totalIPs,function(){const t=document.getElementById("total-ips"),e=document.getElementById("total-relationships"),n=document.getElementById("avg-derivatives");if(t&&(t.textContent=qa.totalIPs.toString()),e&&(e.textContent=qa.totalRelationships.toString()),n){const t=qa.totalIPs>0?(qa.totalRelationships/qa.totalIPs).toFixed(1):"0";n.textContent=t}}(),await ja.loadIPRelationships(t,e,r),function(t,e){const n=document.getElementById("ip-details");if(!n)return;let r=`\n    <div class="ip-info">\n      <h3>📋 IP Asset Details</h3>\n      <div class="info-grid">\n        <div class="info-item">\n          <span class="label">ID:</span>\n          <span class="value">${t.id}</span>\n        </div>\n        <div class="info-item">\n          <span class="label">Name:</span>\n          <span class="value">${t.name||"Unknown"}</span>\n        </div>\n        <div class="info-item">\n          <span class="label">Owner:</span>\n          <span class="value">${t.owner||"Unknown"}</span>\n        </div>\n        <div class="info-item">\n          <span class="label">Type:</span>\n          <span class="value">${t.type||"IP Asset"}</span>\n        </div>\n        <div class="info-item">\n          <span class="label">Created:</span>\n          <span class="value">${t.createdAt?new Date(t.createdAt).toLocaleDateString():"Unknown"}</span>\n        </div>\n        <div class="info-item">\n          <span class="label">Revenue:</span>\n          <span class="value">$${(t.revenue||0).toLocaleString()}</span>\n        </div>\n        <div class="info-item">\n          <span class="label">Derivatives:</span>\n          <span class="value">${e.filter(t=>"derivative"===t.type).length}</span>\n        </div>\n      </div>\n    </div>\n  `;t.metadata&&(r+='\n      <div class="metadata-section">\n        <h4>📝 Metadata</h4>\n        <div class="metadata-grid">\n    ',t.metadata.title&&(r+=`\n        <div class="metadata-item">\n          <span class="metadata-label">Title:</span>\n          <span class="metadata-value">${t.metadata.title}</span>\n        </div>\n      `),t.metadata.description&&(r+=`\n        <div class="metadata-item">\n          <span class="metadata-label">Description:</span>\n          <span class="metadata-value">${t.metadata.description}</span>\n        </div>\n      `),t.metadata.image&&(r+=`\n        <div class="metadata-item full-width">\n          <span class="metadata-label">Image:</span>\n          <div class="metadata-image">\n            <img src="${t.metadata.image}" alt="IP Asset Image" style="max-width: 200px; max-height: 200px; border-radius: 8px; margin-top: 8px;">\n          </div>\n        </div>\n      `),t.metadata.mediaUrl&&(r+=`\n        <div class="metadata-item">\n          <span class="metadata-label">Media URL:</span>\n          <span class="metadata-value">\n            <a href="${t.metadata.mediaUrl}" target="_blank" style="color: #667eea; text-decoration: none;">\n              ${t.metadata.mediaUrl.length>50?t.metadata.mediaUrl.substring(0,50)+"...":t.metadata.mediaUrl}\n            </a>\n          </span>\n        </div>\n      `),t.metadata.mediaType&&(r+=`\n        <div class="metadata-item">\n          <span class="metadata-label">Media Type:</span>\n          <span class="metadata-value">${t.metadata.mediaType}</span>\n        </div>\n      `),t.metadata.creators&&t.metadata.creators.length>0&&(r+='\n        <div class="metadata-item full-width">\n          <span class="metadata-label">Creators:</span>\n          <div class="creators-list">\n      ',t.metadata.creators.forEach(t=>{r+=`\n          <div class="creator-item">\n            <div class="creator-name">${t.name}</div>\n            <div class="creator-address">${t.address}</div>\n            ${t.contributionPercent?`<div class="creator-contribution">${t.contributionPercent}% contribution</div>`:""}\n          </div>\n        `}),r+="\n          </div>\n        </div>\n      "),t.tags&&t.tags.length>0&&(r+=`\n        <div class="metadata-item full-width">\n          <span class="metadata-label">Tags:</span>\n          <div class="tags-container">\n            ${t.tags.map(t=>`<span class="tag">${t}</span>`).join("")}\n          </div>\n        </div>\n      `),r+="\n        </div>\n      </div>\n    "),e.length>0&&(r+=`\n      <div class="relationships">\n        <h4>🔗 Relationships (${e.length})</h4>\n        <div class="relationship-list">\n    `,e.forEach(t=>{r+=`\n        <div class="relationship-item">\n          <span class="rel-type">${t.type}</span>\n          <span class="rel-target">${t.target.slice(0,10)}...${t.target.slice(-8)}</span>\n          ${t.name?`<span class="rel-name">${t.name}</span>`:""}\n          ${t.revenue?`<span class="rel-revenue">$${t.revenue.toLocaleString()}</span>`:""}\n        </div>\n      `}),r+="\n        </div>\n      </div>\n    "),n.innerHTML=r}(e,r),n=!0,Xa(!1)}catch(t){console.error("Failed to analyze IP:",t),function(){const t=document.getElementById("ip-details");t&&(t.innerHTML='\n      <div class="error-message">\n        <span class="error-icon">❌</span>\n        <p>Failed to analyze IP. Please check the ID and try again.</p>\n      </div>\n    ')}(),Xa(!1)}finally{const t=(performance.now()-e)/1e3;Fa&&Fa.trackPerformance(t,n)}}function Ga(){ja&&ja.clear();const t=document.getElementById("ip-details");t&&(t.innerHTML='\n      <div class="placeholder">\n        <span class="placeholder-icon">🎯</span>\n        <p>Search for an IP Asset to see its relationship graph</p>\n      </div>\n    ');const e=document.getElementById("search");e&&(e.value="")}function Xa(t){const e=document.getElementById("graph-loading");e&&e.classList.toggle("hidden",!t)}function Va(t){const e=document.createElement("div");e.className="detected-ips-panel",e.innerHTML=`\n    <div class="detected-header">\n      <span class="detected-icon">🔍</span>\n      <span class="detected-title">Detected IPs (${t.length})</span>\n      <button class="detected-close">✕</button>\n    </div>\n    <div class="detected-list">\n      ${t.slice(0,10).map((t,e)=>`\n        <div class="detected-item" data-ip="${t.ip}">\n          <div class="detected-ip">${t.ip.slice(0,12)}...${t.ip.slice(-8)}</div>\n          <div class="detected-type">${t.type}</div>\n          <div class="detected-context">${t.context?.slice(0,40)}...</div>\n          <button class="analyze-ip-btn" data-ip="${t.ip}">🔍</button>\n        </div>\n      `).join("")}\n      ${t.length>10?`<div class="detected-more">+${t.length-10} more IPs detected</div>`:""}\n    </div>\n  `,e.style.cssText="\n    background: white;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    margin: 10px 0;\n    max-height: 300px;\n    overflow-y: auto;\n  ";const n=document.querySelector(".search-section");n&&n.parentNode?.insertBefore(e,n.nextSibling),e.querySelectorAll(".analyze-ip-btn").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();const n=t.getAttribute("data-ip");if(n){const t=document.getElementById("search");t&&(t.value=n,Ha(n))}})});const r=e.querySelector(".detected-close");r?.addEventListener("click",()=>{e.remove()})}document.addEventListener("DOMContentLoaded",async()=>{console.log("IP Graph Extension popup loaded"),"true"===localStorage.getItem("darkMode")&&document.body.classList.add("dark-mode");const t=document.getElementById("logo-icon");t&&(t.src=Ba),function(){const t=document.querySelectorAll(".tab-button"),e=document.querySelectorAll(".tab-content");t.forEach(n=>{n.addEventListener("click",r=>{const i=r.target.getAttribute("data-tab");t.forEach(t=>t.classList.remove("active")),e.forEach(t=>t.classList.remove("active")),n.classList.add("active");const a=document.getElementById(i);a&&a.classList.add("active")})})}(),function(){const t=document.getElementById("search"),e=document.getElementById("visualize"),n=document.getElementById("random-ip"),r=document.getElementById("clear-graph");e?.addEventListener("click",async()=>{const e=t?.value.trim();e&&await Ha(e)}),t?.addEventListener("keypress",async e=>{if("Enter"===e.key){const e=t.value.trim();e&&await Ha(e)}}),n?.addEventListener("click",async()=>{const e=await async function(){if(!Ua)return console.error("StoryAPI not initialized"),`0x${Array.from({length:40},()=>Math.floor(16*Math.random()).toString(16)).join("")}`;try{return await Ua.getRandomIP()}catch(t){return console.error("Error fetching random IP:",t),`0x${Array.from({length:40},()=>Math.floor(16*Math.random()).toString(16)).join("")}`}}();e&&t&&(t.value=e,await Ha(e))}),r?.addEventListener("click",()=>{Ga()})}(),function(){const t=document.getElementById("connect-wallet"),e=document.getElementById("disconnect-wallet");t?.addEventListener("click",async()=>{try{await async function(){try{if(o("connecting","Connecting to MetaMask..."),void 0===window.ethereum)throw new Error("MetaMask not found. Please install MetaMask extension.");const t=window.ethereum,e=await t.request({method:"eth_requestAccounts"});if(0===e.length)throw new Error("No accounts found. Please unlock your wallet.");const c=e[0],l=await t.request({method:"eth_chainId"});parseInt(l,16)!==r&&await async function(t){try{await t.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${r.toString(16)}`}]})}catch(e){if(4902!==e.code)throw e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${r.toString(16)}`,chainName:"Story Aeneid Testnet",nativeCurrency:{name:"IP",symbol:"IP",decimals:18},rpcUrls:["https://aeneid.storyrpc.io"],blockExplorerUrls:["https://aeneid.storyscan.io"]}]})}}(t);const u=await t.request({method:"eth_getBalance",params:[c,"latest"]}),d=parseInt(u,16)/Math.pow(10,18);n={address:c,balance:d.toFixed(4),connected:!0,chainId:r,provider:"MetaMask",network:"Story Aeneid Testnet"},o("connected","Connected to Story Protocol"),a(),await async function(){if(n?.connected)try{!function(t){const e=document.getElementById("ip-details");if(!e)return;let n='<div class="user-assets">';n+="<h3>📋 Your Story IP Assets</h3>",0===t.length?n+="<p>You don't own any IP Assets on Story Protocol yet.</p>":(n+='<div class="assets-list">',t.forEach(t=>{n+=`\n        <div class="asset-item" data-ip-id="${t.id}">\n          <div class="asset-name">${t.name||"Unnamed IP"}</div>\n          <div class="asset-id">${t.id.slice(0,10)}...${t.id.slice(-8)}</div>\n          <div class="asset-stats">\n            <span>📊 Derivatives: ${t.derivatives?.length||0}</span>\n            <span>💰 Revenue: ${t.totalRevenue||"0"} IP</span>\n          </div>\n        </div>\n      `}),n+="</div>"),n+="</div>",e.innerHTML=n,document.querySelectorAll(".asset-item").forEach(t=>{t.addEventListener("click",t=>{const e=t.currentTarget.getAttribute("data-ip-id");e&&function(t){const e=document.getElementById("search"),n=document.getElementById("visualize");e&&(e.value=t),n&&n.click()}(e)})})}([{id:"0x1234567890123456789012345678901234567890",name:"My Story IP #1",derivatives:[],totalRevenue:"12.5"},{id:"0x2345678901234567890123456789012345678901",name:"Creative Collection",derivatives:[{id:"0x3456"},{id:"0x7890"}],totalRevenue:"28.7"},{id:"0x3456789012345678901234567890123456789012",name:"Digital Art Series",derivatives:[{id:"0xabcd"}],totalRevenue:"15.3"}])}catch(t){console.error("Failed to load user IP assets:",t)}}(),function(){const t=s("✅ Connected to Story Protocol!","success");document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}(),function(t){t.on("accountsChanged",t=>{if(0===t.length)i();else{const e=t[0];n&&(n.address=e,a())}}),t.on("chainChanged",t=>{parseInt(t,16)!==r&&function(){const t=s("⚠️ Please switch to Story Aeneid Testnet","error");document.body.appendChild(t),setTimeout(()=>{t.remove()},5e3)}()})}(t)}catch(t){console.error("Wallet connection failed:",t),o("error","Connection failed"),function(t){let e="Connection failed. Please try again.";t.message&&(t.message.includes("User rejected")?e="Connection cancelled by user.":t.message.includes("MetaMask not found")?e="Please install MetaMask extension.":t.message.includes("No accounts found")&&(e="Please unlock your wallet and try again."));const n=s(`❌ ${e}`,"error");document.body.appendChild(n),setTimeout(()=>{n.remove()},4e3)}(t)}}()}catch(t){console.error("Failed to connect wallet:",t)}}),e?.addEventListener("click",async()=>{try{await async function(){try{i()}catch(t){console.error("Error disconnecting:",t)}}()}catch(t){console.error("Failed to disconnect wallet:",t)}})}(),function(){const t=document.getElementById("analytics-content");t&&(Fa=new La(t),Fa.render()),document.addEventListener("searchIP",t=>{const{ipId:e}=t.detail,n=document.getElementById("search");n&&(n.value=e,Ha(e))})}(),Ua=new Da;const e=document.getElementById("graph-canvas");e&&(ja=new yr(e)),async function(){try{const t=await chrome.runtime.sendMessage({action:"getStoredIP"});if(console.log("Stored IP data:",t),t.selectedIP){const e=document.getElementById("search");e&&(e.value=t.selectedIP,t.fromContextMenu&&function(t){const e=document.createElement("div");e.className="context-info-panel",e.innerHTML=`\n    <div class="context-header">\n      <span class="context-icon">🎯</span>\n      <span class="context-title">IP Detected from Context Menu</span>\n      <button class="context-close">✕</button>\n    </div>\n    <div class="context-details">\n      ${t.sourceTitle?`<div class="context-item"><strong>Source:</strong> ${t.sourceTitle}</div>`:""}\n      ${t.sourceUrl?`<div class="context-item"><strong>URL:</strong> ${t.sourceUrl}</div>`:""}\n      ${t.ipType?`<div class="context-item"><strong>Type:</strong> ${t.ipType}</div>`:""}\n      ${t.selectionContext?`<div class="context-item"><strong>Context:</strong> "${t.selectionContext}"</div>`:""}\n      <div class="context-item"><strong>Detected:</strong> ${new Date(t.timestamp).toLocaleString()}</div>\n    </div>\n  `,e.style.cssText="\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    color: white;\n    border-radius: 8px;\n    padding: 15px;\n    margin: 10px 0;\n    font-size: 12px;\n  ";const n=document.querySelector(".search-section");n&&n.parentNode?.insertBefore(e,n);const r=e.querySelector(".context-close");r?.addEventListener("click",()=>{e.remove()}),setTimeout(()=>{e.parentNode&&e.remove()},1e4)}(t),t.fromPageDetection&&t.detectedIPs&&Va(t.detectedIPs),await Ha(t.selectedIP))}t.detectedIPs&&t.detectedIPs.length>0&&Va(t.detectedIPs)}catch(t){console.error("Failed to check stored IP:",t)}}(),a()});const Ya=document.getElementById("dark-mode-toggle");Ya?.addEventListener("click",()=>{const t=document.body.classList.toggle("dark-mode");localStorage.setItem("darkMode",t.toString())}),window.analyzeIP=Ha,window.clearGraph=Ga})();
//# sourceMappingURL=popup.js.map