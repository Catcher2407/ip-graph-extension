{"version":3,"file":"popup.js","mappings":"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","sources":["webpack://ip-graph-extension/webpack/bootstrap","webpack://ip-graph-extension/webpack/runtime/global","webpack://ip-graph-extension/webpack/runtime/publicPath","webpack://ip-graph-extension/./src/popup/modules/wallet-integration.ts","webpack://ip-graph-extension/./node_modules/d3-selection/src/selector.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selectorAll.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/matcher.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/selectChild.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/selectChildren.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/sparse.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/enter.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/data.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/sort.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/namespaces.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/namespace.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/attr.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/window.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/style.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/property.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/classed.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/text.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/html.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/raise.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/lower.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/creator.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/insert.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/remove.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/clone.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/on.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/dispatch.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/index.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/select.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/selectAll.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/array.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/filter.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/constant.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/exit.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/join.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/merge.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/order.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/call.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/nodes.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/node.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/size.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/empty.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/each.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/append.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/datum.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/selection/iterator.js","webpack://ip-graph-extension/./node_modules/d3-dispatch/src/dispatch.js","webpack://ip-graph-extension/./node_modules/d3-timer/src/timer.js","webpack://ip-graph-extension/./node_modules/d3-timer/src/timeout.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/schedule.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/interrupt.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/number.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/transform/decompose.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/transform/parse.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/transform/index.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/tween.js","webpack://ip-graph-extension/./node_modules/d3-color/src/define.js","webpack://ip-graph-extension/./node_modules/d3-color/src/color.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/basis.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/constant.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/color.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/rgb.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/basisClosed.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/string.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/interpolate.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/attr.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/attrTween.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/delay.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/duration.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/selection.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/style.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/index.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/select.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/selectAll.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/filter.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/merge.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/transition.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/on.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/styleTween.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/text.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/textTween.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/remove.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/ease.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/easeVarying.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/transition/end.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/selection/transition.js","webpack://ip-graph-extension/./node_modules/d3-ease/src/cubic.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/selection/index.js","webpack://ip-graph-extension/./node_modules/d3-transition/src/selection/interrupt.js","webpack://ip-graph-extension/./node_modules/d3-brush/src/brush.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/select.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/pointer.js","webpack://ip-graph-extension/./node_modules/d3-selection/src/sourceEvent.js","webpack://ip-graph-extension/./node_modules/d3-drag/src/noevent.js","webpack://ip-graph-extension/./node_modules/d3-drag/src/nodrag.js","webpack://ip-graph-extension/./node_modules/d3-drag/src/constant.js","webpack://ip-graph-extension/./node_modules/d3-drag/src/event.js","webpack://ip-graph-extension/./node_modules/d3-drag/src/drag.js","webpack://ip-graph-extension/./node_modules/d3-force/src/center.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/add.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/quad.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/x.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/y.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/quadtree.js","webpack://ip-graph-extension/./node_modules/d3-force/src/constant.js","webpack://ip-graph-extension/./node_modules/d3-force/src/jiggle.js","webpack://ip-graph-extension/./node_modules/d3-force/src/collide.js","webpack://ip-graph-extension/./node_modules/d3-force/src/link.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/cover.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/data.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/extent.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/find.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/remove.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/root.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/size.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/visit.js","webpack://ip-graph-extension/./node_modules/d3-quadtree/src/visitAfter.js","webpack://ip-graph-extension/./node_modules/d3-force/src/lcg.js","webpack://ip-graph-extension/./node_modules/d3-force/src/simulation.js","webpack://ip-graph-extension/./node_modules/d3-force/src/x.js","webpack://ip-graph-extension/./node_modules/d3-force/src/y.js","webpack://ip-graph-extension/./node_modules/d3-interpolate/src/zoom.js","webpack://ip-graph-extension/./node_modules/d3-zoom/src/constant.js","webpack://ip-graph-extension/./node_modules/d3-zoom/src/event.js","webpack://ip-graph-extension/./node_modules/d3-zoom/src/transform.js","webpack://ip-graph-extension/./node_modules/d3-zoom/src/noevent.js","webpack://ip-graph-extension/./node_modules/d3-zoom/src/zoom.js","webpack://ip-graph-extension/./src/popup/modules/ip-graph-visualizer.ts","webpack://ip-graph-extension/./node_modules/d3-force/src/manyBody.js","webpack://ip-graph-extension/./src/popup/modules/story-api.ts","webpack://ip-graph-extension/./src/popup/modules/analytics-dashboard.ts","webpack://ip-graph-extension/./src/popup/popup.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// src/popup/modules/wallet-integration.ts\ninterface WalletInfo {\n  address: string;\n  balance: string;\n  connected: boolean;\n  chainId: number;\n  provider: string;\n  network: string;\n}\n\nlet currentWallet: WalletInfo | null = null;\n\n// Story Aeneid Testnet configuration\nconst STORY_AENEID_CHAIN_ID = 1315;\nconst STORY_AENEID_RPC = 'https://aeneid.storyrpc.io';\n\n// Main connect function - MetaMask only for now\nexport async function connectWallet(): Promise<void> {\n  try {\n    updateConnectionStatus('connecting', 'Connecting to MetaMask...');\n    \n    // Check if MetaMask is available\n    if (typeof (window as any).ethereum === 'undefined') {\n      throw new Error('MetaMask not found. Please install MetaMask extension.');\n    }\n\n    const ethereum = (window as any).ethereum;\n    \n    // Request account access\n    const accounts = await ethereum.request({ \n      method: 'eth_requestAccounts' \n    });\n    \n    if (accounts.length === 0) {\n      throw new Error('No accounts found. Please unlock your wallet.');\n    }\n\n    const address = accounts[0];\n    \n    // Get current chain ID\n    const chainId = await ethereum.request({ \n      method: 'eth_chainId' \n    });\n    \n    const currentChainId = parseInt(chainId, 16);\n    \n    // Check if we're on Story Aeneid, if not, try to switch\n    if (currentChainId !== STORY_AENEID_CHAIN_ID) {\n      await switchToStoryAeneid(ethereum);\n    }\n    \n    // Get balance\n    const balance = await ethereum.request({\n      method: 'eth_getBalance',\n      params: [address, 'latest']\n    });\n    \n    // Convert balance from wei to ether\n    const balanceInEth = parseInt(balance, 16) / Math.pow(10, 18);\n    \n    currentWallet = {\n      address: address,\n      balance: balanceInEth.toFixed(4),\n      connected: true,\n      chainId: STORY_AENEID_CHAIN_ID,\n      provider: 'MetaMask',\n      network: 'Story Aeneid Testnet'\n    };\n    \n    updateConnectionStatus('connected', 'Connected to Story Protocol');\n    updateWalletUI();\n    await loadUserIPAssets();\n    showSuccessMessage();\n    \n    // Listen for account/chain changes\n    setupWalletEventListeners(ethereum);\n    \n  } catch (error: any) {\n    console.error('Wallet connection failed:', error);\n    updateConnectionStatus('error', 'Connection failed');\n    showConnectionError(error);\n  }\n}\n\nasync function switchToStoryAeneid(ethereum: any): Promise<void> {\n  try {\n    // Try to switch to Story Aeneid\n    await ethereum.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{ chainId: `0x${STORY_AENEID_CHAIN_ID.toString(16)}` }],\n    });\n  } catch (switchError: any) {\n    // If chain doesn't exist, add it\n    if (switchError.code === 4902) {\n      await ethereum.request({\n        method: 'wallet_addEthereumChain',\n        params: [{\n          chainId: `0x${STORY_AENEID_CHAIN_ID.toString(16)}`,\n          chainName: 'Story Aeneid Testnet',\n          nativeCurrency: {\n            name: 'IP',\n            symbol: 'IP',\n            decimals: 18,\n          },\n          rpcUrls: [STORY_AENEID_RPC],\n          blockExplorerUrls: ['https://aeneid.storyscan.io'],\n        }],\n      });\n    } else {\n      throw switchError;\n    }\n  }\n}\n\nfunction setupWalletEventListeners(ethereum: any): void {\n  // Listen for account changes\n  ethereum.on('accountsChanged', (accounts: string[]) => {\n    if (accounts.length === 0) {\n      handleDisconnection();\n    } else {\n      // Account changed, update wallet info\n      const newAddress = accounts[0];\n      if (currentWallet) {\n        currentWallet.address = newAddress;\n        updateWalletUI();\n      }\n    }\n  });\n\n  // Listen for chain changes\n  ethereum.on('chainChanged', (chainId: string) => {\n    const newChainId = parseInt(chainId, 16);\n    if (newChainId !== STORY_AENEID_CHAIN_ID) {\n      showNetworkWarning();\n    }\n  });\n}\n\nfunction showNetworkWarning(): void {\n  const notification = createNotification(' Please switch to Story Aeneid Testnet', 'error');\n  document.body.appendChild(notification);\n  \n  setTimeout(() => {\n    notification.remove();\n  }, 5000);\n}\n\nfunction handleDisconnection(): void {\n  currentWallet = null;\n  updateConnectionStatus('connecting', 'Disconnected');\n  updateWalletUI();\n  \n  const ipDetails = document.getElementById('ip-details');\n  if (ipDetails) {\n    ipDetails.innerHTML = `\n      <div class=\"placeholder\">\n        <span class=\"placeholder-icon\"></span>\n        <p>Connect wallet and search for an IP Asset to see its relationship graph</p>\n      </div>\n    `;\n  }\n  \n  showDisconnectionMessage();\n}\n\n// Disconnect wallet\nexport async function disconnectWallet(): Promise<void> {\n  try {\n    handleDisconnection();\n  } catch (error) {\n    console.error('Error disconnecting:', error);\n  }\n}\n\nexport function updateWalletUI(): void {\n  const walletStatus = document.getElementById('wallet-status');\n  const connectionStatus = document.getElementById('connection-status');\n  const walletAddress = document.getElementById('wallet-address');\n  const walletBalance = document.getElementById('wallet-balance');\n  const walletNetwork = document.getElementById('wallet-network');\n  const connectBtn = document.getElementById('connect-wallet');\n  const disconnectBtn = document.getElementById('disconnect-wallet');\n  \n  const addressItem = document.getElementById('wallet-address-item');\n  const balanceItem = document.getElementById('wallet-balance-item');\n  const networkItem = document.getElementById('wallet-network-item');\n  \n  if (currentWallet?.connected) {\n    if (walletStatus) {\n      walletStatus.className = 'wallet-status connected';\n    }\n    \n    if (connectionStatus) {\n      connectionStatus.textContent = 'Connected to Story Protocol';\n    }\n    \n    if (walletAddress) {\n      walletAddress.textContent = `${currentWallet.address.slice(0, 6)}...${currentWallet.address.slice(-4)}`;\n    }\n    \n    if (walletBalance) {\n      walletBalance.textContent = `${currentWallet.balance} IP`;\n    }\n    \n    if (walletNetwork) {\n      walletNetwork.textContent = 'Story Aeneid Testnet';\n    }\n    \n    if (addressItem) addressItem.style.display = 'flex';\n    if (balanceItem) balanceItem.style.display = 'flex';\n    if (networkItem) networkItem.style.display = 'flex';\n    \n    if (connectBtn) connectBtn.style.display = 'none';\n    if (disconnectBtn) disconnectBtn.style.display = 'block';\n  } else {\n    if (walletStatus) {\n      walletStatus.className = 'wallet-status';\n    }\n    \n    if (connectionStatus) {\n      connectionStatus.textContent = 'Connect to Story Protocol';\n    }\n    \n    if (addressItem) addressItem.style.display = 'none';\n    if (balanceItem) balanceItem.style.display = 'none';\n    if (networkItem) networkItem.style.display = 'none';\n    \n    if (connectBtn) connectBtn.style.display = 'block';\n    if (disconnectBtn) disconnectBtn.style.display = 'none';\n  }\n}\n\nfunction updateConnectionStatus(status: 'connecting' | 'connected' | 'error', message: string): void {\n  const walletStatus = document.getElementById('wallet-status');\n  const connectionStatus = document.getElementById('connection-status');\n  \n  if (walletStatus) {\n    walletStatus.className = `wallet-status ${status}`;\n  }\n  \n  if (connectionStatus) {\n    connectionStatus.textContent = message;\n  }\n}\n\nfunction showSuccessMessage(): void {\n  const notification = createNotification(' Connected to Story Protocol!', 'success');\n  document.body.appendChild(notification);\n  \n  setTimeout(() => {\n    notification.remove();\n  }, 3000);\n}\n\nfunction showDisconnectionMessage(): void {\n  const notification = createNotification(' Disconnected from Story Protocol', 'info');\n  document.body.appendChild(notification);\n  \n  setTimeout(() => {\n    notification.remove();\n  }, 2000);\n}\n\nfunction showConnectionError(error: any): void {\n  let message = 'Connection failed. Please try again.';\n  \n  if (error.message) {\n    if (error.message.includes('User rejected')) {\n      message = 'Connection cancelled by user.';\n    } else if (error.message.includes('MetaMask not found')) {\n      message = 'Please install MetaMask extension.';\n    } else if (error.message.includes('No accounts found')) {\n      message = 'Please unlock your wallet and try again.';\n    }\n  }\n  \n  const notification = createNotification(` ${message}`, 'error');\n  document.body.appendChild(notification);\n  \n  setTimeout(() => {\n    notification.remove();\n  }, 4000);\n}\n\nfunction createNotification(message: string, type: 'success' | 'error' | 'info'): HTMLElement {\n  const notification = document.createElement('div');\n  notification.className = `notification notification-${type}`;\n  notification.textContent = message;\n  \n  notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 16px 24px;\n    border-radius: 12px;\n    color: white;\n    font-weight: 600;\n    font-size: 14px;\n    z-index: 10001;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n    animation: slideInRight 0.3s ease;\n    max-width: 300px;\n  `;\n  \n  const colors = {\n    success: 'linear-gradient(135deg, #10b981, #059669)',\n    error: 'linear-gradient(135deg, #ef4444, #dc2626)',\n    info: 'linear-gradient(135deg, #3b82f6, #1d4ed8)'\n  };\n  \n  notification.style.background = colors[type];\n  \n  return notification;\n}\n\nexport async function loadUserIPAssets(): Promise<void> {\n  if (!currentWallet?.connected) return;\n  \n  try {\n    // Mock user IP assets on Story Protocol\n    const userAssets = [\n      {\n        id: '0x1234567890123456789012345678901234567890',\n        name: 'My Story IP #1',\n        derivatives: [],\n        totalRevenue: '12.5'\n      },\n      {\n        id: '0x2345678901234567890123456789012345678901',\n        name: 'Creative Collection',\n        derivatives: [{ id: '0x3456' }, { id: '0x7890' }],\n        totalRevenue: '28.7'\n      },\n      {\n        id: '0x3456789012345678901234567890123456789012',\n        name: 'Digital Art Series',\n        derivatives: [{ id: '0xabcd' }],\n        totalRevenue: '15.3'\n      }\n    ];\n    \n    displayUserAssets(userAssets);\n  } catch (error) {\n    console.error('Failed to load user IP assets:', error);\n  }\n}\n\nfunction displayUserAssets(assets: any[]): void {\n  const ipDetails = document.getElementById('ip-details');\n  if (!ipDetails) return;\n  \n  let html = '<div class=\"user-assets\">';\n  html += '<h3> Your Story IP Assets</h3>';\n  \n  if (assets.length === 0) {\n    html += '<p>You don\\'t own any IP Assets on Story Protocol yet.</p>';\n  } else {\n    html += '<div class=\"assets-list\">';\n    assets.forEach(asset => {\n      html += `\n        <div class=\"asset-item\" data-ip-id=\"${asset.id}\">\n          <div class=\"asset-name\">${asset.name || 'Unnamed IP'}</div>\n          <div class=\"asset-id\">${asset.id.slice(0, 10)}...${asset.id.slice(-8)}</div>\n          <div class=\"asset-stats\">\n            <span> Derivatives: ${asset.derivatives?.length || 0}</span>\n            <span> Revenue: ${asset.totalRevenue || '0'} IP</span>\n          </div>\n        </div>\n      `;\n    });\n    html += '</div>';\n  }\n  \n  html += '</div>';\n  ipDetails.innerHTML = html;\n  \n  const assetItems = document.querySelectorAll('.asset-item');\n  assetItems.forEach(item => {\n    item.addEventListener('click', (e) => {\n      const ipId = (e.currentTarget as HTMLElement).getAttribute('data-ip-id');\n      if (ipId) {\n        searchIP(ipId);\n      }\n    });\n  });\n}\n\nexport function getCurrentWallet(): WalletInfo | null {\n  return currentWallet;\n}\n\nfunction searchIP(ipId: string): void {\n  const searchInput = document.getElementById('search') as HTMLInputElement;\n  const visualizeBtn = document.getElementById('visualize') as HTMLButtonElement;\n  \n  if (searchInput) {\n    searchInput.value = ipId;\n  }\n  if (visualizeBtn) {\n    visualizeBtn.click();\n  }\n}\n\nexport { searchIP };\n\n// Add notification animations and styles\nconst style = document.createElement('style');\nstyle.textContent = `\n  @keyframes slideInRight {\n    from {\n      transform: translateX(100%);\n      opacity: 0;\n    }\n    to {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n  \n  .user-assets {\n    margin-top: 15px;\n  }\n  \n  .user-assets h3 {\n    margin-bottom: 12px;\n    color: #333;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    gap: 6px;\n  }\n  \n  .assets-list {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n  }\n  \n  .asset-item {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n    padding: 12px;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    border: 1px solid #dee2e6;\n  }\n  \n  .asset-item:hover {\n    background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  }\n  \n  .asset-name {\n    font-weight: 600;\n    font-size: 13px;\n    color: #333;\n    margin-bottom: 6px;\n  }\n  \n  .asset-id {\n    font-family: monospace;\n    font-size: 10px;\n    color: #666;\n    margin-bottom: 8px;\n    background: rgba(255,255,255,0.7);\n    padding: 2px 6px;\n    border-radius: 4px;\n    display: inline-block;\n  }\n  \n  .asset-stats {\n    display: flex;\n    justify-content: space-between;\n    font-size: 11px;\n    color: #555;\n    font-weight: 500;\n  }\n  \n  .asset-stats span {\n    display: flex;\n    align-items: center;\n    gap: 2px;\n  }\n`;\ndocument.head.appendChild(style);","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name __brush rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(x, y) {\n  var nodes, strength = 1;\n\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = (sx / n - x) * strength, sy = (sy / n - y) * strength, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  return force;\n}\n","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function(radius) {\n  var nodes,\n      radii,\n      random,\n      strength = 1,\n      iterations = 1;\n\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i, n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data, rj = quad.r, r = ri + rj;\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n          if (l < r * r) {\n            if (x === 0) x = jiggle(random), l += x * x;\n            if (y === 0) y = jiggle(random), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n        return;\n      }\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    radii = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","import constant from \"./constant.js\";\n\nexport default function(x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","// src/popup/modules/ip-graph-visualizer.ts\nimport * as d3 from 'd3';\n\ninterface IPNode {\n  id: string;\n  name: string;\n  type: 'root' | 'parent' | 'child' | 'derivative';\n  owner: string;\n  revenue?: number;\n  derivatives?: number;\n  x?: number;\n  y?: number;\n  fx?: number | null;\n  fy?: number | null;\n  vx?: number;\n  vy?: number;\n}\n\ninterface IPLink {\n  source: string | IPNode;\n  target: string | IPNode;\n  type: 'parent' | 'derivative' | 'license';\n  strength?: number;\n  revenue?: number;\n}\n\nexport class IPGraphVisualizer {\n  private container: HTMLElement;\n  private svg!: d3.Selection<SVGSVGElement, unknown, null, undefined>;\n  private width: number;\n  private height: number;\n  private simulation!: d3.Simulation<IPNode, IPLink>;\n  private nodes: IPNode[] = [];\n  private links: IPLink[] = [];\n  private nodeElements!: d3.Selection<SVGGElement, IPNode, SVGGElement, unknown>;\n  private linkElements!: d3.Selection<SVGLineElement, IPLink, SVGGElement, unknown>;\n\n  constructor(container: HTMLElement) {\n    this.container = container;\n    this.width = container.clientWidth || 360;\n    this.height = container.clientHeight || 280;\n    \n    this.initializeSVG();\n    this.initializeSimulation();\n    this.showPlaceholder();\n  }\n\n  private initializeSVG(): void {\n  // Clear existing content\n  d3.select(this.container).selectAll('*').remove();\n  \n  this.svg = d3.select(this.container)\n    .append('svg')\n    .attr('width', this.width)\n    .attr('height', this.height)\n    .style('background', 'linear-gradient(135deg, #fafbff 0%, #f0f4ff 100%)')\n    .style('border-radius', '12px');\n\n  // Add definitions for gradients\n  const defs = this.svg.append('defs');\n  \n  // Root gradient\n  const rootGradient = defs.append('linearGradient')\n    .attr('id', 'rootGradient')\n    .attr('x1', '0%').attr('y1', '0%')\n    .attr('x2', '100%').attr('y2', '100%');\n  rootGradient.append('stop').attr('offset', '0%').attr('stop-color', '#667eea');\n  rootGradient.append('stop').attr('offset', '100%').attr('stop-color', '#764ba2');\n  \n  // Parent gradient\n  const parentGradient = defs.append('linearGradient')\n    .attr('id', 'parentGradient')\n    .attr('x1', '0%').attr('y1', '0%')\n    .attr('x2', '100%').attr('y2', '100%');\n  parentGradient.append('stop').attr('offset', '0%').attr('stop-color', '#10b981');\n  parentGradient.append('stop').attr('offset', '100%').attr('stop-color', '#059669');\n  \n  // Child gradient\n  const childGradient = defs.append('linearGradient')\n    .attr('id', 'childGradient')\n    .attr('x1', '0%').attr('y1', '0%')\n    .attr('x2', '100%').attr('y2', '100%');\n  childGradient.append('stop').attr('offset', '0%').attr('stop-color', '#f59e0b');\n  childGradient.append('stop').attr('offset', '100%').attr('stop-color', '#d97706');\n  \n  // Derivative gradient\n  const derivativeGradient = defs.append('linearGradient')\n    .attr('id', 'derivativeGradient')\n    .attr('x1', '0%').attr('y1', '0%')\n    .attr('x2', '100%').attr('y2', '100%');\n  derivativeGradient.append('stop').attr('offset', '0%').attr('stop-color', '#ef4444');\n  derivativeGradient.append('stop').attr('offset', '100%').attr('stop-color', '#dc2626');\n\n  // Add zoom behavior\n  const zoom = d3.zoom<SVGSVGElement, unknown>()\n    .scaleExtent([0.1, 4])\n    .on('zoom', (event) => {\n      this.svg.select('.main-group').attr('transform', event.transform);\n    });\n\n  this.svg.call(zoom);\n  this.svg.append('g').attr('class', 'main-group');\n}\n\n  private initializeSimulation(): void {\n    this.simulation = d3.forceSimulation<IPNode>()\n      .force('link', d3.forceLink<IPNode, IPLink>().id(d => d.id).distance(100).strength(0.8))\n      .force('charge', d3.forceManyBody().strength(-400))\n      .force('center', d3.forceCenter(this.width / 2, this.height / 2))\n      .force('collision', d3.forceCollide().radius(35))\n      .force('x', d3.forceX(this.width / 2).strength(0.1))\n      .force('y', d3.forceY(this.height / 2).strength(0.1));\n  }\n\n  async loadIPRelationships(ipId: string, ipData: any, relationships: any[]): Promise<void> {\n    try {\n      console.log('Loading IP relationships for:', ipId);\n      console.log('IP Data:', ipData);\n      console.log('Relationships:', relationships);\n      \n      // Build nodes and links from the data\n      this.buildGraphData(ipId, ipData, relationships);\n      \n      // Render the graph\n      this.renderGraph();\n      \n    } catch (error) {\n      console.error('Failed to load IP relationships:', error);\n      this.showError('Failed to load IP relationships');\n    }\n  }\n\n  private buildGraphData(rootIpId: string, rootData: any, relationships: any[]): void {\n    this.nodes = [];\n    this.links = [];\n\n    console.log('Building graph data for:', rootIpId);\n\n    // Add root node\n    this.nodes.push({\n      id: rootIpId,\n      name: rootData.name || 'Root IP',\n      type: 'root',\n      owner: rootData.owner || 'Unknown',\n      revenue: rootData.revenue || 0,\n      derivatives: relationships.filter(r => r.type === 'derivative').length\n    });\n\n    // Add related nodes\n    relationships.forEach(rel => {\n      const nodeId = rel.target !== rootIpId ? rel.target : rel.source;\n      if (nodeId && nodeId !== rootIpId) {\n        // Check if node already exists\n        if (!this.nodes.find(n => n.id === nodeId)) {\n          this.nodes.push({\n            id: nodeId,\n            name: rel.name || `IP ${nodeId.slice(0, 8)}...`,\n            type: rel.type === 'derivative' ? 'child' : 'parent',\n            owner: rel.owner || 'Unknown',\n            revenue: rel.revenue || 0,\n            derivatives: rel.derivatives || 0\n          });\n        }\n\n        // Add link\n        this.links.push({\n          source: rel.source,\n          target: rel.target,\n          type: rel.type,\n          strength: 1,\n          revenue: rel.revenue || 0\n        });\n      }\n    });\n\n    console.log('Built nodes:', this.nodes);\n    console.log('Built links:', this.links);\n\n    // If no relationships, add some demo nodes\n    if (this.nodes.length === 1) {\n      this.addDemoNodes(rootIpId);\n    }\n  }\n\n  private addDemoNodes(rootIpId: string): void {\n    // Add demo parent\n    const parentId = '0x' + Math.random().toString(16).substr(2, 40);\n    this.nodes.push({\n      id: parentId,\n      name: 'Parent IP Asset',\n      type: 'parent',\n      owner: '0x1234...5678',\n      revenue: 150,\n      derivatives: 3\n    });\n\n    this.links.push({\n      source: parentId,\n      target: rootIpId,\n      type: 'parent',\n      strength: 1,\n      revenue: 25\n    });\n\n    // Add demo derivatives\n    for (let i = 0; i < 3; i++) {\n      const derivativeId = '0x' + Math.random().toString(16).substr(2, 40);\n      this.nodes.push({\n        id: derivativeId,\n        name: `Derivative ${i + 1}`,\n        type: 'child',\n        owner: `0xabcd...${i}${i}${i}${i}`,\n        revenue: Math.random() * 50,\n        derivatives: Math.floor(Math.random() * 3)\n      });\n\n      this.links.push({\n        source: rootIpId,\n        target: derivativeId,\n        type: 'derivative',\n        strength: 1,\n        revenue: Math.random() * 20\n      });\n    }\n  }\n\n  private renderGraph(): void {\n    const mainGroup = this.svg.select('.main-group');\n    \n    // Clear existing elements\n    mainGroup.selectAll('*').remove();\n\n    console.log('Rendering graph with nodes:', this.nodes.length, 'links:', this.links.length);\n\n    // Create links\n    this.linkElements = mainGroup.append('g')\n      .attr('class', 'links')\n      .selectAll('line')\n      .data(this.links)\n      .enter().append('line')\n      .attr('stroke', d => this.getLinkColor(d.type))\n      .attr('stroke-width', d => this.calculateLinkWidth(d.revenue || 0))      .attr('stroke-opacity', 0.7)\n      .attr('marker-end', 'url(#arrowhead)');\n\n    // Create nodes\n    this.nodeElements = mainGroup.append('g')\n      .attr('class', 'nodes')\n      .selectAll('g')\n      .data(this.nodes)\n      .enter().append('g')\n      .attr('class', 'node')\n      .style('cursor', 'pointer')\n      .call(d3.drag<SVGGElement, IPNode>()\n        .on('start', (event, d) => this.dragStarted(event, d))\n        .on('drag', (event, d) => this.dragged(event, d))\n        .on('end', (event, d) => this.dragEnded(event, d)));\n\n    // Add circles to nodes\n    this.nodeElements.append('circle')\n      .attr('r', d => this.getNodeRadius(d.type))\n      .attr('fill', d => this.getNodeColor(d.type))\n      .attr('stroke', '#fff')\n      .attr('stroke-width', 3)\n      .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.1))');\n\n    // Add labels to nodes\n    this.nodeElements.append('text')\n      .text(d => d.name.length > 15 ? d.name.substring(0, 15) + '...' : d.name)\n      .attr('x', 0)\n      .attr('y', d => this.getNodeRadius(d.type) + 18)\n      .attr('text-anchor', 'middle')\n      .attr('font-size', '11px')\n      .attr('font-weight', '600')\n      .attr('fill', '#333')\n      .style('pointer-events', 'none');\n\n    // Add revenue labels for nodes with revenue\n    this.nodeElements.filter(d => d.revenue && d.revenue > 0)\n      .append('text')\n      .text(d => `$${d.revenue?.toFixed(1)}`)\n      .attr('x', 0)\n      .attr('y', d => this.getNodeRadius(d.type) + 32)\n      .attr('text-anchor', 'middle')\n      .attr('font-size', '9px')\n      .attr('font-weight', '500')\n      .attr('fill', '#10b981')\n      .style('pointer-events', 'none');\n\n    // Add click handlers\n    this.nodeElements.on('click', (event, d) => {\n      this.handleNodeClick(event, d);\n    });\n\n    // Add hover effects\n    this.nodeElements\n      .on('mouseenter', (event, d) => {\n        this.handleNodeHover(event, d, true);\n      })\n      .on('mouseleave', (event, d) => {\n        this.handleNodeHover(event, d, false);\n      });\n\n    // Add tooltips\n    this.nodeElements.append('title')\n      .text(d => `${d.name}\\nOwner: ${d.owner.slice(0, 10)}...\\nType: ${d.type}\\nRevenue: $${d.revenue || 0}\\nDerivatives: ${d.derivatives || 0}`);\n\n    // Update simulation\n    this.simulation.nodes(this.nodes);\n    (this.simulation.force('link') as d3.ForceLink<IPNode, IPLink>).links(this.links);\n\n    // Set up tick function\n    this.simulation.on('tick', () => {\n      this.linkElements\n        .attr('x1', d => (d.source as IPNode).x!)\n        .attr('y1', d => (d.source as IPNode).y!)\n        .attr('x2', d => (d.target as IPNode).x!)\n        .attr('y2', d => (d.target as IPNode).y!);\n\n      this.nodeElements\n        .attr('transform', d => `translate(${d.x},${d.y})`);\n    });\n\n    // Restart simulation\n    this.simulation.alpha(1).restart();\n  }\n\n  private handleNodeClick(event: MouseEvent, d: IPNode): void {\n    console.log('Node clicked:', d);\n    \n    // Highlight connected nodes\n    this.highlightConnectedNodes(d.id);\n    \n    // Dispatch custom event for external handling\n    const customEvent = new CustomEvent('nodeClick', {\n      detail: { node: d, event }\n    });\n    this.container.dispatchEvent(customEvent);\n  }\n\n  private handleNodeHover(event: MouseEvent, d: IPNode, isEntering: boolean): void {\n    const node = d3.select(event.currentTarget as SVGGElement);\n    \n    if (isEntering) {\n      node.select('circle')\n        .transition()\n        .duration(200)\n        .attr('r', this.getNodeRadius(d.type) * 1.2)\n        .style('filter', 'drop-shadow(0 4px 8px rgba(0,0,0,0.2))');\n    } else {\n      node.select('circle')\n        .transition()\n        .duration(200)\n        .attr('r', this.getNodeRadius(d.type))\n        .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.1))');\n    }\n  }\n\n  private highlightConnectedNodes(nodeId: string): void {\n    // Reset all nodes\n    this.nodeElements.select('circle')\n      .attr('stroke-width', 3)\n      .attr('stroke', '#fff');\n\n    this.linkElements\n      .attr('stroke-opacity', 0.3);\n\n    // Highlight selected node\n    this.nodeElements.filter(d => d.id === nodeId)\n      .select('circle')\n      .attr('stroke-width', 4)\n      .attr('stroke', '#ff6b6b');\n\n    // Highlight connected nodes and links\n    const connectedLinks = this.links.filter(l => \n      (l.source as IPNode).id === nodeId || (l.target as IPNode).id === nodeId\n    );\n\n    const connectedNodeIds = new Set<string>();\n    connectedLinks.forEach(link => {\n      connectedNodeIds.add((link.source as IPNode).id);\n      connectedNodeIds.add((link.target as IPNode).id);\n    });\n\n    this.nodeElements.filter(d => connectedNodeIds.has(d.id))\n      .select('circle')\n      .attr('stroke-width', 4)\n      .attr('stroke', '#4ecdc4');\n\n    this.linkElements.filter(d => \n      (d.source as IPNode).id === nodeId || (d.target as IPNode).id === nodeId\n    ).attr('stroke-opacity', 1);\n  }\n\n  private getNodeColor(type: string): string {\n  const colors = {\n    root: 'url(#rootGradient)',\n    parent: 'url(#parentGradient)', \n    child: 'url(#childGradient)',\n    derivative: 'url(#derivativeGradient)'\n  };\n  return colors[type as keyof typeof colors] || '#6b7280';\n}\n\n  private getNodeRadius(type: string): number {\n    const sizes = {\n      root: 22,\n      parent: 18,\n      child: 16,\n      derivative: 14\n    };\n    return sizes[type as keyof typeof sizes] || 14;\n  }\n\n  private getLinkColor(type: string): string {\n    const colors = {\n      parent: '#10b981',\n      derivative: '#ef4444',\n      license: '#3b82f6'\n    };\n    return colors[type as keyof typeof colors] || '#6b7280';\n  }\n\n  private calculateLinkWidth(revenue: number = 0): number {\n  const minWidth = 1.5;\n  const maxWidth = 8;\n  const logRevenue = Math.log10(revenue + 1); // hindari log(0)\n  return Math.min(maxWidth, minWidth + logRevenue * 2);\n}\n\n  private dragStarted(event: d3.D3DragEvent<SVGGElement, IPNode, IPNode>, d: IPNode): void {\n    if (!event.active) this.simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n\n  private dragged(event: d3.D3DragEvent<SVGGElement, IPNode, IPNode>, d: IPNode): void {\n    d.fx = event.x;\n    d.fy = event.y;\n  }\n\n  private dragEnded(event: d3.D3DragEvent<SVGGElement, IPNode, IPNode>, d: IPNode): void {\n    if (!event.active) this.simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n  }\n\n  private showError(message: string): void {\n    const mainGroup = this.svg.select('.main-group');\n    mainGroup.selectAll('*').remove();\n    \n    mainGroup.append('text')\n      .text(message)\n      .attr('x', this.width / 2)\n      .attr('y', this.height / 2)\n      .attr('text-anchor', 'middle')\n      .attr('font-size', '14px')\n      .attr('fill', '#ef4444');\n  }\n\n  private showPlaceholder(): void {\n    const mainGroup = this.svg.select('.main-group');\n    mainGroup.selectAll('*').remove();\n    \n    const placeholder = mainGroup.append('g')\n      .attr('class', 'placeholder')\n      .attr('transform', `translate(${this.width / 2}, ${this.height / 2})`);\n\n    placeholder.append('circle')\n      .attr('r', 30)\n      .attr('fill', '#f8f9fa')\n      .attr('stroke', '#dee2e6')\n      .attr('stroke-width', 2)\n      .attr('stroke-dasharray', '5,5');\n\n    placeholder.append('text')\n      .text('')\n      .attr('text-anchor', 'middle')\n      .attr('font-size', '24px')\n      .attr('y', 8);\n\n    placeholder.append('text')\n      .text('Search for an IP Asset')\n      .attr('text-anchor', 'middle')\n      .attr('font-size', '12px')\n      .attr('y', 50)\n      .attr('fill', '#6b7280');\n\n    placeholder.append('text')\n      .text('to visualize relationships')\n      .attr('text-anchor', 'middle')\n      .attr('font-size', '12px')\n      .attr('y', 65)\n      .attr('fill', '#6b7280');\n  }\n\n  public clear(): void {\n    this.nodes = [];\n    this.links = [];\n    this.simulation.nodes([]);\n    (this.simulation.force('link') as d3.ForceLink<IPNode, IPLink>).links([]);\n    this.showPlaceholder();\n  }\n\n  public resize(): void {\n    this.width = this.container.clientWidth || 360;\n    this.height = this.container.clientHeight || 280;\n    \n    this.svg\n      .attr('width', this.width)\n      .attr('height', this.height);\n    \n    this.simulation\n      .force('center', d3.forceCenter(this.width / 2, this.height / 2))\n      .force('x', d3.forceX(this.width / 2).strength(0.1))\n      .force('y', d3.forceY(this.height / 2).strength(0.1))\n      .alpha(1)\n      .restart();\n  }\n}","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      node,\n      random,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i, n = nodes.length, tree = quadtree(nodes, x, y).visitAfter(accumulate);\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(quad) {\n    var strength = 0, q, c, weight = 0, x, y, i;\n\n    // For internal nodes, accumulate forces from child quadrants.\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n      quad.x = x / weight;\n      quad.y = y / weight;\n    }\n\n    // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n      q = quad;\n      q.x = q.data.x;\n      q.y = q.data.y;\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(random), l += x * x;\n        if (y === 0) y = jiggle(random), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(random), l += x * x;\n      if (y === 0) y = jiggle(random), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (quad.data !== node) {\n      w = strengths[quad.data.index] * alpha / l;\n      node.vx += x * w;\n      node.vy += y * w;\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n","// src/popup/modules/story-api.ts\ninterface IPAssetData {\n  id: string;\n  name?: string;\n  owner?: string;\n  type?: string;\n  revenue?: number;\n  derivatives?: number;\n  metadata?: any;\n  createdAt?: string;\n  totalRevenue?: number;\n  monthlyRevenue?: number[];\n  licenseTerms?: string[];\n  tags?: string[];\n}\n\ninterface IPRelationship {\n  type: 'parent' | 'derivative' | 'license' | 'remix' | 'commercial';\n  source: string;\n  target: string;\n  name?: string;\n  owner?: string;\n  revenue?: number;\n  derivatives?: number;\n  licenseType?: string;\n  royaltyRate?: number;\n  createdAt?: string;\n}\n\ninterface RevenueData {\n  totalRevenue: number;\n  monthlyRevenue: number[];\n  topEarningDerivatives: Array<{\n    id: string;\n    name: string;\n    revenue: number;\n    royaltyPaid: number;\n  }>;\n  revenueBreakdown: {\n    directSales: number;\n    royalties: number;\n    licensing: number;\n  };\n}\n\nexport class StoryAPI {\n  private mockDatabase: Map<string, IPAssetData> = new Map();\n  private relationshipDatabase: Map<string, IPRelationship[]> = new Map();\n  private revenueDatabase: Map<string, RevenueData> = new Map();\n\n  constructor() {\n    this.initializeMockData();\n  }\n\n  private initializeMockData(): void {\n    // Create comprehensive IP ecosystem\n    const mockIPs = [\n      {\n        id: '0x1234567890123456789012345678901234567890',\n        name: 'Digital Art Masterpiece',\n        owner: '0xabcd1234567890123456789012345678901234abcd',\n        type: 'Original Artwork',\n        revenue: 2450.75,\n        derivatives: 8,\n        createdAt: '2024-01-15T10:30:00Z',\n        totalRevenue: 3200.50,\n        monthlyRevenue: [150, 280, 420, 380, 290, 310, 450, 380, 290, 310, 280, 250],\n        licenseTerms: ['Commercial Use', 'Attribution Required', 'Share Alike'],\n        tags: ['digital-art', 'nft', 'collectible', 'original']\n      },\n      {\n        id: '0x2345678901234567890123456789012345678901',\n        name: 'Remix Collection #1',\n        owner: '0xbcde2345678901234567890123456789012345bcde',\n        type: 'Derivative Work',\n        revenue: 890.25,\n        derivatives: 3,\n        createdAt: '2024-02-20T14:15:00Z',\n        totalRevenue: 1150.80,\n        monthlyRevenue: [0, 120, 180, 150, 140, 160, 200, 150, 120, 80, 60, 40],\n        licenseTerms: ['Non-Commercial', 'Attribution Required'],\n        tags: ['remix', 'derivative', 'music', 'creative']\n      },\n      {\n        id: '0x3456789012345678901234567890123456789012',\n        name: 'Commercial License Pro',\n        owner: '0xcdef3456789012345678901234567890123456cdef',\n        type: 'License Agreement',\n        revenue: 1580.90,\n        derivatives: 0,\n        createdAt: '2024-01-28T09:45:00Z',\n        totalRevenue: 1580.90,\n        monthlyRevenue: [200, 180, 160, 140, 120, 100, 150, 180, 200, 220, 180, 140],\n        licenseTerms: ['Full Commercial Rights', 'Worldwide Distribution'],\n        tags: ['license', 'commercial', 'business']\n      },\n      {\n        id: '0x4567890123456789012345678901234567890123',\n        name: 'NFT Collection Genesis',\n        owner: '0xdefa4567890123456789012345678901234567defa',\n        type: 'NFT Collection',\n        revenue: 5240.60,\n        derivatives: 12,\n        createdAt: '2023-12-10T16:20:00Z',\n        totalRevenue: 8900.30,\n        monthlyRevenue: [800, 750, 680, 720, 650, 580, 620, 680, 720, 780, 850, 920],\n        licenseTerms: ['Holder Rights', 'Commercial Use Allowed', 'Resale Rights'],\n        tags: ['nft', 'collection', 'pfp', 'community']\n      },\n      {\n        id: '0x5678901234567890123456789012345678901234',\n        name: 'Music Remix Track',\n        owner: '0xefab5678901234567890123456789012345678efab',\n        type: 'Music Derivative',\n        revenue: 670.40,\n        derivatives: 2,\n        createdAt: '2024-03-05T11:30:00Z',\n        totalRevenue: 820.15,\n        monthlyRevenue: [0, 0, 80, 120, 100, 90, 110, 130, 120, 100, 80, 60],\n        licenseTerms: ['Streaming Rights', 'Attribution Required'],\n        tags: ['music', 'remix', 'audio', 'streaming']\n      },\n      {\n        id: '0x6789012345678901234567890123456789012345',\n        name: 'AI Generated Art Series',\n        owner: '0xfabc6789012345678901234567890123456789fabc',\n        type: 'AI Generated',\n        revenue: 1890.75,\n        derivatives: 6,\n        createdAt: '2024-01-08T13:45:00Z',\n        totalRevenue: 2340.90,\n        monthlyRevenue: [180, 220, 200, 180, 160, 140, 180, 200, 220, 240, 200, 180],\n        licenseTerms: ['AI Disclosure Required', 'Commercial Use'],\n        tags: ['ai-art', 'generated', 'series', 'technology']\n      }\n    ];\n\n    // Store IP assets\n    mockIPs.forEach(ip => {\n      this.mockDatabase.set(ip.id, ip);\n      \n      // Generate revenue data\n      this.revenueDatabase.set(ip.id, {\n        totalRevenue: ip.totalRevenue || ip.revenue || 0,\n        monthlyRevenue: ip.monthlyRevenue || [],\n        topEarningDerivatives: this.generateTopEarningDerivatives(ip.derivatives || 0),\n        revenueBreakdown: {\n          directSales: (ip.revenue || 0) * 0.6,\n          royalties: (ip.revenue || 0) * 0.3,\n          licensing: (ip.revenue || 0) * 0.1\n        }\n      });\n    });\n\n    // Initialize relationship mappings\n    this.initializeRelationships();\n  }\n\n  private generateTopEarningDerivatives(count: number): Array<{id: string, name: string, revenue: number, royaltyPaid: number}> {\n    const derivatives = [];\n    for (let i = 0; i < Math.min(count, 5); i++) {\n      const revenue = Math.random() * 500 + 50;\n      derivatives.push({\n        id: '0x' + Math.random().toString(16).substr(2, 40),\n        name: `Top Derivative #${i + 1}`,\n        revenue: revenue,\n        royaltyPaid: revenue * 0.1 // 10% royalty\n      });\n    }\n    return derivatives.sort((a, b) => b.revenue - a.revenue);\n  }\n\n  private initializeRelationships(): void {\n    // Complex relationship network\n    const relationships = {\n      '0x1234567890123456789012345678901234567890': [\n        {\n          type: 'derivative' as const,\n          source: '0x1234567890123456789012345678901234567890',\n          target: '0x2345678901234567890123456789012345678901',\n          name: 'Remix Collection #1',\n          owner: '0xbcde2345678901234567890123456789012345bcde',\n          revenue: 890.25,\n          licenseType: 'Creative Commons',\n          royaltyRate: 0.15,\n          createdAt: '2024-02-20T14:15:00Z'\n        },\n        {\n          type: 'license' as const,\n          source: '0x1234567890123456789012345678901234567890',\n          target: '0x3456789012345678901234567890123456789012',\n          name: 'Commercial License Pro',\n          owner: '0xcdef3456789012345678901234567890123456cdef',\n          revenue: 1580.90,\n          licenseType: 'Commercial',\n          royaltyRate: 0.20,\n          createdAt: '2024-01-28T09:45:00Z'\n        },\n        {\n          type: 'derivative' as const,\n          source: '0x1234567890123456789012345678901234567890',\n          target: '0x5678901234567890123456789012345678901234',\n          name: 'Music Remix Track',\n          owner: '0xefab5678901234567890123456789012345678efab',\n          revenue: 670.40,\n          licenseType: 'Attribution',\n          royaltyRate: 0.12,\n          createdAt: '2024-03-05T11:30:00Z'\n        }\n      ],\n      '0x4567890123456789012345678901234567890123': [\n        {\n          type: 'derivative' as const,\n          source: '0x4567890123456789012345678901234567890123',\n          target: '0x6789012345678901234567890123456789012345',\n          name: 'AI Generated Art Series',\n          owner: '0xfabc6789012345678901234567890123456789fabc',\n          revenue: 1890.75,\n          licenseType: 'AI Commons',\n          royaltyRate: 0.18,\n          createdAt: '2024-01-08T13:45:00Z'\n        }\n      ],\n      '0x6789012345678901234567890123456789012345': [\n        {\n          type: 'parent' as const,\n          source: '0x4567890123456789012345678901234567890123',\n          target: '0x6789012345678901234567890123456789012345',\n          name: 'NFT Collection Genesis',\n          owner: '0xdefa4567890123456789012345678901234567defa',\n          revenue: 5240.60,\n          licenseType: 'NFT Rights',\n          royaltyRate: 0.25,\n          createdAt: '2023-12-10T16:20:00Z'\n        }\n      ]\n    };\n\n    // Store relationships\n    Object.entries(relationships).forEach(([ipId, rels]) => {\n      this.relationshipDatabase.set(ipId, rels);\n    });\n  }\n\n  async getIPAsset(ipId: string): Promise<IPAssetData> {\n    // Simulate API delay\n    await new Promise(resolve => setTimeout(resolve, 600 + Math.random() * 400));\n    \n    // Check if we have this IP in our mock database\n    const mockIP = this.mockDatabase.get(ipId);\n    if (mockIP) {\n      return mockIP;\n    }\n\n    // Generate dynamic mock data for unknown IPs\n    const types = ['Original Artwork', 'Derivative Work', 'License Agreement', 'NFT Collection', 'Music Track', 'AI Generated'];\n    const mockData: IPAssetData = {\n      id: ipId,\n      name: `IP Asset ${ipId.slice(0, 8)}...`,\n      owner: '0x' + Math.random().toString(16).substr(2, 40),\n      type: types[Math.floor(Math.random() * types.length)],\n      revenue: Math.random() * 1000,\n      derivatives: Math.floor(Math.random() * 8),\n      createdAt: new Date(Date.now() - Math.random() * 365 * 24 * 60 * 60 * 1000).toISOString(),\n      totalRevenue: Math.random() * 1500,\n      monthlyRevenue: Array.from({length: 12}, () => Math.random() * 200),\n      licenseTerms: ['Standard License', 'Attribution Required'],\n      tags: ['generated', 'mock', 'test'],\n      metadata: {\n        title: `Sample IP Asset ${ipId.slice(0, 8)}`,\n        description: 'This is a dynamically generated IP Asset for demonstration',\n        createdAt: new Date().toISOString(),\n        tags: ['digital', 'blockchain', 'ip']\n      }\n    };\n\n    return mockData;\n  }\n\n  async getIPRelationships(ipId: string): Promise<IPRelationship[]> {\n    await new Promise(resolve => setTimeout(resolve, 400 + Math.random() * 300));\n    \n    // Check for predefined relationships\n    const relationships = this.relationshipDatabase.get(ipId);\n    if (relationships) {\n      return relationships;\n    }\n\n    // Generate random relationships for unknown IPs\n    const relationshipTypes: Array<'parent' | 'derivative' | 'license' | 'remix' | 'commercial'> = \n      ['parent', 'derivative', 'license', 'remix', 'commercial'];\n    const generatedRelationships: IPRelationship[] = [];\n    const relationshipCount = Math.floor(Math.random() * 5) + 1;\n    \n    for (let i = 0; i < relationshipCount; i++) {\n      const type = relationshipTypes[Math.floor(Math.random() * relationshipTypes.length)];\n      const isParent = type === 'parent';\n      const relatedId = '0x' + Math.random().toString(16).substr(2, 40);\n      \n      generatedRelationships.push({\n        type,\n        source: isParent ? relatedId : ipId,\n        target: isParent ? ipId : relatedId,\n        name: `${type.charAt(0).toUpperCase() + type.slice(1)} ${i + 1}`,\n        owner: '0x' + Math.random().toString(16).substr(2, 40),\n        revenue: Math.random() * 500,\n        derivatives: Math.floor(Math.random() * 4),\n        licenseType: ['Creative Commons', 'Commercial', 'Attribution', 'Share Alike'][Math.floor(Math.random() * 4)],\n        royaltyRate: Math.random() * 0.3,\n        createdAt: new Date(Date.now() - Math.random() * 180 * 24 * 60 * 60 * 1000).toISOString()\n      });\n    }\n\n    return generatedRelationships;\n  }\n\n  async getRevenueData(ipId: string): Promise<RevenueData> {\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    const revenueData = this.revenueDatabase.get(ipId);\n    if (revenueData) {\n      return revenueData;\n    }\n\n    // Generate mock revenue data\n    const totalRevenue = Math.random() * 2000;\n    return {\n      totalRevenue,\n      monthlyRevenue: Array.from({length: 12}, () => Math.random() * 200),\n      topEarningDerivatives: this.generateTopEarningDerivatives(Math.floor(Math.random() * 5)),\n      revenueBreakdown: {\n        directSales: totalRevenue * 0.6,\n        royalties: totalRevenue * 0.3,\n        licensing: totalRevenue * 0.1\n      }\n    };\n  }\n\n  async getRandomIP(): Promise<string> {\n    const knownIPs = Array.from(this.mockDatabase.keys());\n    return knownIPs[Math.floor(Math.random() * knownIPs.length)];\n  }\n\n  async searchIPAssets(query: string): Promise<IPAssetData[]> {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    \n    const results: IPAssetData[] = [];\n    \n    // Search in mock database\n    for (const [id, asset] of this.mockDatabase) {\n      if (id.toLowerCase().includes(query.toLowerCase()) || \n          asset.name?.toLowerCase().includes(query.toLowerCase()) ||\n          asset.tags?.some(tag => tag.toLowerCase().includes(query.toLowerCase()))) {\n        results.push(asset);\n      }\n    }\n    \n    // Add some random results if not enough found\n    while (results.length < 3) {\n      const randomRevenue = Math.random() * 1000;\n      results.push({\n        id: '0x' + Math.random().toString(16).substr(2, 40),\n        name: `Search Result ${results.length + 1}`,\n        owner: '0x' + Math.random().toString(16).substr(2, 40),\n        type: 'IP Asset',\n        revenue: randomRevenue,\n        derivatives: Math.floor(Math.random() * 5),\n        totalRevenue: randomRevenue * 1.2,\n        tags: ['search', 'result', 'mock']\n      });\n    }\n    \n    return results.slice(0, 5);\n  }\n\n  async getIPAnalytics(ipId: string): Promise<any> {\n    await new Promise(resolve => setTimeout(resolve, 700));\n    \n    const revenueData = await this.getRevenueData(ipId);\n    const relationships = await this.getIPRelationships(ipId);\n    \n    return {\n      totalRevenue: revenueData.totalRevenue,\n      totalDerivatives: relationships.filter(r => r.type === 'derivative').length,\n      monthlyRevenue: revenueData.monthlyRevenue,\n      topDerivatives: revenueData.topEarningDerivatives,\n      revenueGrowth: this.calculateRevenueGrowth(revenueData.monthlyRevenue),\n      licenseTypes: relationships.map(r => r.licenseType).filter(Boolean),\n      averageRoyaltyRate: relationships.reduce((sum, r) => sum + (r.royaltyRate || 0), 0) / relationships.length,\n      creationTrend: this.generateCreationTrend(relationships)\n    };\n  }\n\n  private calculateRevenueGrowth(monthlyRevenue: number[]): number {\n    if (monthlyRevenue.length < 2) return 0;\n    const recent = monthlyRevenue.slice(-3).reduce((a, b) => a + b, 0) / 3;\n    const previous = monthlyRevenue.slice(-6, -3).reduce((a, b) => a + b, 0) / 3;\n    return previous > 0 ? ((recent - previous) / previous) * 100 : 0;\n  }\n\n  private generateCreationTrend(relationships: IPRelationship[]): Array<{month: string, count: number}> {\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    return months.map(month => ({\n      month,\n      count: Math.floor(Math.random() * 5)\n    }));\n  }\n\n  isValidIPId(ipId: string): boolean {\n    return /^0x[a-fA-F0-9]{40}$/.test(ipId);\n  }\n\n  getNetworkInfo(): { name: string; chainId: string; explorer: string } {\n    return {\n      name: 'Story Aeneid Testnet',\n      chainId: '1315',\n      explorer: 'https://aeneid.storyscan.io'\n    };\n  }\n\n  // New method for getting IP ecosystem overview\n  async getEcosystemOverview(): Promise<{\n    totalIPs: number;\n    totalRevenue: number;\n    totalDerivatives: number;\n    topPerformers: IPAssetData[];\n    recentActivity: Array<{type: string, ipId: string, timestamp: string}>;\n  }> {\n    await new Promise(resolve => setTimeout(resolve, 800));\n    \n    const allIPs = Array.from(this.mockDatabase.values());\n    const totalRevenue = allIPs.reduce((sum, ip) => sum + (ip.totalRevenue || 0), 0);\n    const totalDerivatives = allIPs.reduce((sum, ip) => sum + (ip.derivatives || 0), 0);\n    \n    return {\n      totalIPs: allIPs.length,\n      totalRevenue,\n      totalDerivatives,\n      topPerformers: allIPs.sort((a, b) => (b.totalRevenue || 0) - (a.totalRevenue || 0)).slice(0, 3),\n      recentActivity: [\n        { type: 'derivative_created', ipId: '0x1234567890123456789012345678901234567890', timestamp: new Date().toISOString() },\n        { type: 'license_granted', ipId: '0x4567890123456789012345678901234567890123', timestamp: new Date(Date.now() - 3600000).toISOString() },\n        { type: 'revenue_received', ipId: '0x2345678901234567890123456789012345678901', timestamp: new Date(Date.now() - 7200000).toISOString() }\n      ]\n    };\n  }\n}","// src/popup/modules/analytics-dashboard.ts\nexport interface AnalyticsData {\n  totalIPs: number;\n  totalRelationships: number;\n  avgDerivatives: number;\n  totalRevenue: number;\n  searchCount: number;\n  visualizationCount: number;\n  topSearchedIPs: Array<{\n    id: string;\n    name: string;\n    searchCount: number;\n    lastSearched: string;\n  }>;\n  performanceMetrics: {\n    avgLoadTime: number;\n    successRate: number;\n    errorRate: number;\n  };\n  usageStats: {\n    dailyActive: number;\n    weeklyActive: number;\n    totalSessions: number;\n    avgSessionDuration: number;\n  };\n  networkStats: {\n    mostConnectedIP: {\n      id: string;\n      name: string;\n      connections: number;\n    };\n    largestNetwork: {\n      rootId: string;\n      nodeCount: number;\n      depth: number;\n    };\n    averageNetworkSize: number;\n  };\n  revenueAnalytics: {\n    totalEcosystemRevenue: number;\n    averageIPRevenue: number;\n    topRevenueGenerators: Array<{\n      id: string;\n      name: string;\n      revenue: number;\n      growth: number;\n    }>;\n    revenueDistribution: {\n      original: number;\n      derivatives: number;\n      licenses: number;\n    };\n  };\n  timeSeriesData: {\n    searchActivity: Array<{\n      date: string;\n      searches: number;\n      visualizations: number;\n    }>;\n    revenueGrowth: Array<{\n      month: string;\n      revenue: number;\n      growth: number;\n    }>;\n    networkGrowth: Array<{\n      month: string;\n      newIPs: number;\n      newRelationships: number;\n    }>;\n  };\n}\n\nexport class AnalyticsDashboard {\n  private container: HTMLElement;\n  private data: AnalyticsData;\n  private charts: Map<string, any> = new Map();\n\n  constructor(container: HTMLElement) {\n    this.container = container;\n    this.data = this.initializeAnalyticsData();\n    this.setupEventListeners();\n  }\n\n  private initializeAnalyticsData(): AnalyticsData {\n    // Load from localStorage or initialize with defaults\n    const savedData = localStorage.getItem('ip-graph-analytics');\n    if (savedData) {\n      return JSON.parse(savedData);\n    }\n\n    return {\n      totalIPs: 0,\n      totalRelationships: 0,\n      avgDerivatives: 0,\n      totalRevenue: 0,\n      searchCount: 0,\n      visualizationCount: 0,\n      topSearchedIPs: [],\n      performanceMetrics: {\n        avgLoadTime: 0,\n        successRate: 100,\n        errorRate: 0\n      },\n      usageStats: {\n        dailyActive: 1,\n        weeklyActive: 1,\n        totalSessions: 1,\n        avgSessionDuration: 0\n      },\n      networkStats: {\n        mostConnectedIP: {\n          id: '',\n          name: '',\n          connections: 0\n        },\n        largestNetwork: {\n          rootId: '',\n          nodeCount: 0,\n          depth: 0\n        },\n        averageNetworkSize: 0\n      },\n      revenueAnalytics: {\n        totalEcosystemRevenue: 0,\n        averageIPRevenue: 0,\n        topRevenueGenerators: [],\n        revenueDistribution: {\n          original: 0,\n          derivatives: 0,\n          licenses: 0\n        }\n      },\n      timeSeriesData: {\n        searchActivity: this.generateMockTimeSeriesData('search'),\n        revenueGrowth: this.generateMockTimeSeriesData('revenue'),\n        networkGrowth: this.generateMockTimeSeriesData('network')\n      }\n    };\n  }\n\n  private generateMockTimeSeriesData(type: string): any[] {\n    const data = [];\n    const now = new Date();\n    \n    for (let i = 29; i >= 0; i--) {\n      const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);\n      \n      switch (type) {\n        case 'search':\n          data.push({\n            date: date.toISOString().split('T')[0],\n            searches: Math.floor(Math.random() * 20) + 5,\n            visualizations: Math.floor(Math.random() * 15) + 3\n          });\n          break;\n        case 'revenue':\n          data.push({\n            month: date.toLocaleDateString('en', { month: 'short' }),\n            revenue: Math.random() * 1000 + 500,\n            growth: (Math.random() - 0.5) * 20\n          });\n          break;\n        case 'network':\n          data.push({\n            month: date.toLocaleDateString('en', { month: 'short' }),\n            newIPs: Math.floor(Math.random() * 10) + 2,\n            newRelationships: Math.floor(Math.random() * 25) + 5\n          });\n          break;\n      }\n    }\n    \n    return data;\n  }\n\n  public render(): void {\n    this.container.innerHTML = `\n      <div class=\"analytics-dashboard\">\n        ${this.renderOverviewCards()}\n        ${this.renderPerformanceMetrics()}\n        ${this.renderUsageStatistics()}\n        ${this.renderNetworkAnalytics()}\n        ${this.renderRevenueAnalytics()}\n        ${this.renderTimeSeriesCharts()}\n        ${this.renderTopSearchedIPs()}\n      </div>\n    `;\n\n    this.addStyles();\n    this.initializeCharts();\n  }\n\n  private renderOverviewCards(): string {\n    return `\n      <div class=\"overview-cards\">\n        <div class=\"analytics-card primary\">\n          <div class=\"card-icon\"></div>\n          <div class=\"card-content\">\n            <div class=\"card-value\">${this.data.totalIPs.toLocaleString()}</div>\n            <div class=\"card-label\">Total IPs Analyzed</div>\n            <div class=\"card-change positive\">+${Math.floor(Math.random() * 20)}% this week</div>\n          </div>\n        </div>\n        \n        <div class=\"analytics-card secondary\">\n          <div class=\"card-icon\"></div>\n          <div class=\"card-content\">\n            <div class=\"card-value\">${this.data.totalRelationships.toLocaleString()}</div>\n            <div class=\"card-label\">Relationships Found</div>\n            <div class=\"card-change positive\">+${Math.floor(Math.random() * 15)}% this week</div>\n          </div>\n        </div>\n        \n        <div class=\"analytics-card success\">\n          <div class=\"card-icon\"></div>\n          <div class=\"card-content\">\n            <div class=\"card-value\">$${this.data.totalRevenue.toLocaleString()}</div>\n            <div class=\"card-label\">Total Revenue Tracked</div>\n            <div class=\"card-change positive\">+${Math.floor(Math.random() * 25)}% this month</div>\n          </div>\n        </div>\n        \n        <div class=\"analytics-card info\">\n          <div class=\"card-icon\"></div>\n          <div class=\"card-content\">\n            <div class=\"card-value\">${this.data.searchCount.toLocaleString()}</div>\n            <div class=\"card-label\">Total Searches</div>\n            <div class=\"card-change neutral\">${this.data.avgDerivatives.toFixed(1)} avg derivatives</div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderPerformanceMetrics(): string {\n    return `\n      <div class=\"performance-section\">\n        <h3> Performance Metrics</h3>\n        <div class=\"metrics-grid\">\n          <div class=\"metric-item\">\n            <div class=\"metric-label\">Average Load Time</div>\n            <div class=\"metric-value\">${this.data.performanceMetrics.avgLoadTime.toFixed(2)}s</div>\n            <div class=\"metric-bar\">\n              <div class=\"metric-fill\" style=\"width: ${Math.min(this.data.performanceMetrics.avgLoadTime * 20, 100)}%\"></div>\n            </div>\n          </div>\n          \n          <div class=\"metric-item\">\n            <div class=\"metric-label\">Success Rate</div>\n            <div class=\"metric-value\">${this.data.performanceMetrics.successRate.toFixed(1)}%</div>\n            <div class=\"metric-bar\">\n              <div class=\"metric-fill success\" style=\"width: ${this.data.performanceMetrics.successRate}%\"></div>\n            </div>\n          </div>\n          \n          <div class=\"metric-item\">\n            <div class=\"metric-label\">Error Rate</div>\n            <div class=\"metric-value\">${this.data.performanceMetrics.errorRate.toFixed(1)}%</div>\n            <div class=\"metric-bar\">\n              <div class=\"metric-fill error\" style=\"width: ${this.data.performanceMetrics.errorRate}%\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderUsageStatistics(): string {\n    return `\n      <div class=\"usage-section\">\n        <h3> Usage Statistics</h3>\n        <div class=\"usage-stats\">\n          <div class=\"usage-stat\">\n            <div class=\"stat-icon\"></div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">${this.data.usageStats.dailyActive}</div>\n              <div class=\"stat-label\">Daily Active</div>\n            </div>\n          </div>\n          \n          <div class=\"usage-stat\">\n            <div class=\"stat-icon\"></div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">${this.data.usageStats.totalSessions}</div>\n              <div class=\"stat-label\">Total Sessions</div>\n            </div>\n          </div>\n          \n          <div class=\"usage-stat\">\n            <div class=\"stat-icon\"></div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">${Math.floor(this.data.usageStats.avgSessionDuration / 60)}m</div>\n              <div class=\"stat-label\">Avg Session</div>\n            </div>\n          </div>\n          \n          <div class=\"usage-stat\">\n            <div class=\"stat-icon\"></div>\n            <div class=\"stat-content\">\n              <div class=\"stat-value\">${this.data.visualizationCount}</div>\n              <div class=\"stat-label\">Visualizations</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderNetworkAnalytics(): string {\n    return `\n      <div class=\"network-section\">\n        <h3> Network Analytics</h3>\n        <div class=\"network-stats\">\n          <div class=\"network-stat-card\">\n            <h4>Most Connected IP</h4>\n            <div class=\"network-detail\">\n              <div class=\"ip-name\">${this.data.networkStats.mostConnectedIP.name || 'Digital Art Masterpiece'}</div>\n              <div class=\"ip-id\">${this.data.networkStats.mostConnectedIP.id || '0x1234...7890'}</div>\n              <div class=\"connection-count\">${this.data.networkStats.mostConnectedIP.connections || 8} connections</div>\n            </div>\n          </div>\n          \n          <div class=\"network-stat-card\">\n            <h4>Largest Network</h4>\n            <div class=\"network-detail\">\n              <div class=\"network-size\">${this.data.networkStats.largestNetwork.nodeCount || 12} nodes</div>\n              <div class=\"network-depth\">Depth: ${this.data.networkStats.largestNetwork.depth || 4} levels</div>\n              <div class=\"network-root\">Root: ${this.data.networkStats.largestNetwork.rootId.slice(0, 10) || '0x4567...0123'}...</div>\n            </div>\n          </div>\n          \n          <div class=\"network-stat-card\">\n            <h4>Average Network Size</h4>\n            <div class=\"network-detail\">\n              <div class=\"avg-size\">${this.data.networkStats.averageNetworkSize.toFixed(1) || '5.2'} nodes</div>\n              <div class=\"network-trend\"> Growing</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderRevenueAnalytics(): string {\n    const revenueData = this.data.revenueAnalytics;\n    return `\n      <div class=\"revenue-section\">\n        <h3> Revenue Analytics</h3>\n        <div class=\"revenue-overview\">\n          <div class=\"revenue-total\">\n            <div class=\"total-amount\">$${revenueData.totalEcosystemRevenue.toLocaleString() || '24,580'}</div>\n            <div class=\"total-label\">Total Ecosystem Revenue</div>\n          </div>\n          \n          <div class=\"revenue-distribution\">\n            <div class=\"distribution-item\">\n              <span class=\"dist-label\">Original Works</span>\n              <span class=\"dist-value\">$${revenueData.revenueDistribution.original.toLocaleString() || '15,200'}</span>\n              <div class=\"dist-bar\">\n                <div class=\"dist-fill original\" style=\"width: ${(revenueData.revenueDistribution.original / revenueData.totalEcosystemRevenue) * 100 || 62}%\"></div>\n              </div>\n            </div>\n            \n            <div class=\"distribution-item\">\n              <span class=\"dist-label\">Derivatives</span>\n              <span class=\"dist-value\">$${revenueData.revenueDistribution.derivatives.toLocaleString() || '7,380'}</span>\n              <div class=\"dist-bar\">\n                <div class=\"dist-fill derivative\" style=\"width: ${(revenueData.revenueDistribution.derivatives / revenueData.totalEcosystemRevenue) * 100 || 30}%\"></div>\n              </div>\n            </div>\n            \n            <div class=\"distribution-item\">\n              <span class=\"dist-label\">Licenses</span>\n              <span class=\"dist-value\">$${revenueData.revenueDistribution.licenses.toLocaleString() || '2,000'}</span>\n              <div class=\"dist-bar\">\n                <div class=\"dist-fill license\" style=\"width: ${(revenueData.revenueDistribution.licenses / revenueData.totalEcosystemRevenue) * 100 || 8}%\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderTimeSeriesCharts(): string {\n    return `\n      <div class=\"charts-section\">\n        <h3> Activity Trends</h3>\n        <div class=\"charts-container\">\n          <div class=\"chart-card\">\n            <h4>Search Activity (Last 30 Days)</h4>\n            <div id=\"search-activity-chart\" class=\"chart-placeholder\">\n              <div class=\"chart-loading\">Loading chart...</div>\n            </div>\n          </div>\n          \n          <div class=\"chart-card\">\n            <h4>Network Growth</h4>\n            <div id=\"network-growth-chart\" class=\"chart-placeholder\">\n              <div class=\"chart-loading\">Loading chart...</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderTopSearchedIPs(): string {\n    const topIPs = this.data.topSearchedIPs.length > 0 ? this.data.topSearchedIPs : [\n      { id: '0x1234567890123456789012345678901234567890', name: 'Digital Art Masterpiece', searchCount: 15, lastSearched: '2024-08-05T10:30:00Z' },\n      { id: '0x4567890123456789012345678901234567890123', name: 'NFT Collection Genesis', searchCount: 12, lastSearched: '2024-08-05T09:15:00Z' },\n      { id: '0x6789012345678901234567890123456789012345', name: 'AI Generated Art Series', searchCount: 8, lastSearched: '2024-08-05T08:45:00Z' }\n    ];\n\n    return `\n      <div class=\"top-searches-section\">\n        <h3> Most Searched IPs</h3>\n        <div class=\"top-searches-list\">\n          ${topIPs.map((ip, index) => `\n            <div class=\"search-item\" data-ip-id=\"${ip.id}\">\n              <div class=\"search-rank\">#${index + 1}</div>\n              <div class=\"search-details\">\n                <div class=\"search-name\">${ip.name}</div>\n                <div class=\"search-id\">${ip.id.slice(0, 10)}...${ip.id.slice(-8)}</div>\n                <div class=\"search-meta\">\n                  <span class=\"search-count\">${ip.searchCount} searches</span>\n                  <span class=\"last-searched\">Last: ${new Date(ip.lastSearched).toLocaleDateString()}</span>\n                </div>\n              </div>\n              <div class=\"search-actions\">\n                <button class=\"search-again-btn\" data-ip-id=\"${ip.id}\"></button>\n              </div>\n            </div>\n          `).join('')}\n        </div>\n      </div>\n    `;\n  }\n\n  private initializeCharts(): void {\n    // Simple chart implementation using CSS and DOM manipulation\n    this.renderSearchActivityChart();\n    this.renderNetworkGrowthChart();\n  }\n\n  private renderSearchActivityChart(): void {\n    const container = document.getElementById('search-activity-chart');\n    if (!container) return;\n\n    const data = this.data.timeSeriesData.searchActivity.slice(-7); // Last 7 days\n    const maxValue = Math.max(...data.map(d => Math.max(d.searches, d.visualizations)));\n\n    container.innerHTML = `\n      <div class=\"simple-chart\">\n        ${data.map((d, i) => `\n          <div class=\"chart-day\">\n            <div class=\"chart-bars\">\n              <div class=\"chart-bar searches\" style=\"height: ${(d.searches / maxValue) * 100}%\" title=\"Searches: ${d.searches}\"></div>\n              <div class=\"chart-bar visualizations\" style=\"height: ${(d.visualizations / maxValue) * 100}%\" title=\"Visualizations: ${d.visualizations}\"></div>\n            </div>\n            <div class=\"chart-label\">${new Date(d.date).toLocaleDateString('en', { weekday: 'short' })}</div>\n          </div>\n        `).join('')}\n      </div>\n      <div class=\"chart-legend\">\n        <div class=\"legend-item\">\n          <div class=\"legend-color searches\"></div>\n          <span>Searches</span>\n        </div>\n        <div class=\"legend-item\">\n          <div class=\"legend-color visualizations\"></div>\n          <span>Visualizations</span>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderNetworkGrowthChart(): void {\n    const container = document.getElementById('network-growth-chart');\n    if (!container) return;\n\n    const data = this.data.timeSeriesData.networkGrowth.slice(-6); // Last 6 months\n    const maxValue = Math.max(...data.map(d => Math.max(d.newIPs, d.newRelationships)));\n\n    container.innerHTML = `\n      <div class=\"simple-chart\">\n        ${data.map((d, i) => `\n          <div class=\"chart-month\">\n            <div class=\"chart-bars\">\n              <div class=\"chart-bar new-ips\" style=\"height: ${(d.newIPs / maxValue) * 100}%\" title=\"New IPs: ${d.newIPs}\"></div>\n              <div class=\"chart-bar new-relationships\" style=\"height: ${(d.newRelationships / maxValue) * 100}%\" title=\"New Relationships: ${d.newRelationships}\"></div>\n            </div>\n            <div class=\"chart-label\">${d.month}</div>\n          </div>\n        `).join('')}\n      </div>\n      <div class=\"chart-legend\">\n        <div class=\"legend-item\">\n          <div class=\"legend-color new-ips\"></div>\n          <span>New IPs</span>\n        </div>\n        <div class=\"legend-item\">\n          <div class=\"legend-color new-relationships\"></div>\n          <span>New Relationships</span>\n        </div>\n      </div>\n    `;\n  }\n\n  private setupEventListeners(): void {\n    // Listen for search again button clicks\n    document.addEventListener('click', (e) => {\n      const target = e.target as HTMLElement;\n      if (target.classList.contains('search-again-btn')) {\n        const ipId = target.getAttribute('data-ip-id');\n        if (ipId) {\n          this.handleSearchAgain(ipId);\n        }\n      }\n    });\n  }\n\n  private handleSearchAgain(ipId: string): void {\n    // Dispatch custom event to trigger search\n    const event = new CustomEvent('searchIP', {\n      detail: { ipId }\n    });\n    document.dispatchEvent(event);\n  }\n\n  // Public methods for updating analytics\n  public trackSearch(ipId: string, ipName: string): void {\n    this.data.searchCount++;\n    this.data.totalIPs++;\n    \n    // Update top searched IPs\n    const existingIndex = this.data.topSearchedIPs.findIndex(ip => ip.id === ipId);\n    if (existingIndex >= 0) {\n      this.data.topSearchedIPs[existingIndex].searchCount++;\n      this.data.topSearchedIPs[existingIndex].lastSearched = new Date().toISOString();\n    } else {\n      this.data.topSearchedIPs.push({\n        id: ipId,\n        name: ipName,\n        searchCount: 1,\n        lastSearched: new Date().toISOString()\n      });\n    }\n    \n    // Sort by search count\n    this.data.topSearchedIPs.sort((a, b) => b.searchCount - a.searchCount);\n    this.data.topSearchedIPs = this.data.topSearchedIPs.slice(0, 10); // Keep top 10\n    \n    this.saveData();\n  }\n\n  public trackVisualization(relationshipCount: number): void {\n    this.data.visualizationCount++;\n    this.data.totalRelationships += relationshipCount;\n    this.data.avgDerivatives = this.data.totalRelationships / this.data.totalIPs;\n    \n    this.saveData();\n  }\n\n  public trackPerformance(loadTime: number, success: boolean): void {\n    const currentAvg = this.data.performanceMetrics.avgLoadTime;\n    const currentCount = this.data.searchCount;\n    \n    this.data.performanceMetrics.avgLoadTime = \n      (currentAvg * (currentCount - 1) + loadTime) / currentCount;\n    \n    if (success) {\n      this.data.performanceMetrics.successRate = \n        (this.data.performanceMetrics.successRate * (currentCount - 1) + 100) / currentCount;\n    } else {\n      this.data.performanceMetrics.errorRate = \n        (this.data.performanceMetrics.errorRate * (currentCount - 1) + 100) / currentCount;\n    }\n    \n    this.saveData();\n  }\n\n  public updateRevenue(revenue: number): void {\n    this.data.totalRevenue += revenue;\n    this.data.revenueAnalytics.totalEcosystemRevenue += revenue;\n    this.data.revenueAnalytics.averageIPRevenue = \n      this.data.revenueAnalytics.totalEcosystemRevenue / this.data.totalIPs;\n    \n    this.saveData();\n  }\n\n  private saveData(): void {\n    localStorage.setItem('ip-graph-analytics', JSON.stringify(this.data));\n  }\n\n  public exportData(): string {\n    return JSON.stringify(this.data, null, 2);\n  }\n\n  public clearData(): void {\n    localStorage.removeItem('ip-graph-analytics');\n    this.data = this.initializeAnalyticsData();\n    this.render();\n  }\n\n  private addStyles(): void {\n    if (document.getElementById('analytics-dashboard-styles')) return;\n\n    const style = document.createElement('style');\n    style.id = 'analytics-dashboard-styles';\n    style.textContent = `\n      .analytics-dashboard {\n        padding: 20px;\n        background: #f8f9fa;\n        border-radius: 12px;\n        margin: 15px 0;\n      }\n\n      .overview-cards {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 15px;\n        margin-bottom: 25px;\n      }\n\n      .analytics-card {\n        background: white;\n        border-radius: 12px;\n        padding: 20px;\n        display: flex;\n        align-items: center;\n        gap: 15px;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n        transition: transform 0.2s ease;\n      }\n\n      .analytics-card:hover {\n        transform: translateY(-2px);\n      }\n\n      .analytics-card.primary { border-left: 4px solid #667eea; }\n      .analytics-card.secondary { border-left: 4px solid #764ba2; }\n      .analytics-card.success { border-left: 4px solid #10b981; }\n      .analytics-card.info { border-left: 4px solid #3b82f6; }\n\n      .card-icon {\n        font-size: 24px;\n        opacity: 0.8;\n      }\n\n      .card-content {\n        flex: 1;\n      }\n\n      .card-value {\n        font-size: 24px;\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 4px;\n      }\n\n      .card-label {\n        font-size: 12px;\n        color: #666;\n        margin-bottom: 4px;\n      }\n\n      .card-change {\n        font-size: 11px;\n        font-weight: 600;\n      }\n\n      .card-change.positive { color: #10b981; }\n      .card-change.negative { color: #ef4444; }\n      .card-change.neutral { color: #6b7280; }\n\n      .performance-section,\n      .usage-section,\n      .network-section,\n      .revenue-section,\n      .charts-section,\n      .top-searches-section {\n        background: white;\n        border-radius: 12px;\n        padding: 20px;\n        margin-bottom: 20px;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n      }\n\n      .performance-section h3,\n      .usage-section h3,\n      .network-section h3,\n      .revenue-section h3,\n      .charts-section h3,\n      .top-searches-section h3 {\n        margin: 0 0 20px 0;\n        color: #333;\n        font-size: 16px;\n      }\n\n      .metrics-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 15px;\n      }\n\n      .metric-item {\n        padding: 15px;\n        background: #f8f9fa;\n        border-radius: 8px;\n      }\n\n      .metric-label {\n        font-size: 12px;\n        color: #666;\n        margin-bottom: 8px;\n      }\n\n      .metric-value {\n        font-size: 18px;\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 10px;\n      }\n\n      .metric-bar {\n        height: 6px;\n        background: #e5e7eb;\n        border-radius: 3px;\n        overflow: hidden;\n      }\n\n      .metric-fill {\n        height: 100%;\n        background: #667eea;\n        transition: width 0.3s ease;\n      }\n\n      .metric-fill.success { background: #10b981; }\n      .metric-fill.error { background: #ef4444; }\n\n      .usage-stats {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n        gap: 15px;\n      }\n\n      .usage-stat {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 15px;\n        background: #f8f9fa;\n        border-radius: 8px;\n      }\n\n      .stat-icon {\n        font-size: 20px;\n        opacity: 0.8;\n      }\n\n      .stat-value {\n        font-size: 20px;\n        font-weight: bold;\n        color: #333;\n      }\n\n      .stat-label {\n        font-size: 11px;\n        color: #666;\n      }\n\n      .network-stats {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 15px;\n      }\n\n      .network-stat-card {\n        padding: 15px;\n        background: #f8f9fa;\n        border-radius: 8px;\n      }\n\n      .network-stat-card h4 {\n        margin: 0 0 12px 0;\n        font-size: 14px;\n        color: #333;\n      }\n\n      .network-detail {\n        font-size: 12px;\n      }\n\n      .ip-name, .network-size, .avg-size {\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 4px;\n      }\n\n      .ip-id, .network-depth, .network-root, .network-trend {\n        color: #666;\n        margin-bottom: 2px;\n      }\n\n      .revenue-overview {\n        display: grid;\n        grid-template-columns: 1fr 2fr;\n        gap: 20px;\n        align-items: start;\n      }\n\n      .revenue-total {\n        text-align: center;\n        padding: 20px;\n        background: linear-gradient(135deg, #667eea, #764ba2);\n        color: white;\n        border-radius: 12px;\n      }\n\n      .total-amount {\n        font-size: 28px;\n        font-weight: bold;\n        margin-bottom: 8px;\n      }\n\n      .total-label {\n        font-size: 12px;\n        opacity: 0.9;\n      }\n\n      .revenue-distribution {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n      }\n\n      .distribution-item {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n      }\n\n      .dist-label {\n        flex: 1;\n        font-size: 12px;\n        color: #666;\n      }\n\n      .dist-value {\n        font-size: 12px;\n        font-weight: 600;\n        color: #333;\n        min-width: 80px;\n        text-align: right;\n      }\n\n      .dist-bar {\n        flex: 2;\n        height: 8px;\n        background: #e5e7eb;\n        border-radius: 4px;\n        overflow: hidden;\n      }\n\n      .dist-fill {\n        height: 100%;\n        transition: width 0.3s ease;\n      }\n\n      .dist-fill.original { background: #667eea; }\n      .dist-fill.derivative { background: #10b981; }\n      .dist-fill.license { background: #f59e0b; }\n\n      .charts-container {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n        gap: 20px;\n      }\n\n      .chart-card {\n        background: #f8f9fa;\n        border-radius: 8px;\n        padding: 15px;\n      }\n\n      .chart-card h4 {\n        margin: 0 0 15px 0;\n        font-size: 14px;\n        color: #333;\n      }\n\n      .chart-placeholder {\n        height: 200px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: white;\n        border-radius: 6px;\n      }\n\n      .simple-chart {\n        display: flex;\n        align-items: end;\n        gap: 8px;\n        height: 150px;\n        padding: 10px;\n      }\n\n      .chart-day, .chart-month {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 5px;\n      }\n\n      .chart-bars {\n        display: flex;\n        align-items: end;\n        gap: 2px;\n        height: 120px;\n      }\n\n      .chart-bar {\n        width: 12px;\n        border-radius: 2px 2px 0 0;\n        min-height: 2px;\n        transition: all 0.3s ease;\n      }\n\n      .chart-bar.searches, .chart-bar.new-ips { background: #667eea; }\n      .chart-bar.visualizations, .chart-bar.new-relationships { background: #10b981; }\n\n      .chart-label {\n        font-size: 10px;\n        color: #666;\n        text-align: center;\n      }\n\n      .chart-legend {\n        display: flex;\n        justify-content: center;\n        gap: 20px;\n        margin-top: 10px;\n      }\n\n      .legend-item {\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        font-size: 11px;\n        color: #666;\n      }\n\n      .legend-color {\n        width: 12px;\n        height: 12px;\n        border-radius: 2px;\n      }\n\n      .legend-color.searches, .legend-color.new-ips { background: #667eea; }\n      .legend-color.visualizations, .legend-color.new-relationships { background: #10b981; }\n\n      .top-searches-list {\n        display: flex;\n        flex-direction: column;\n        gap: 10px;\n      }\n\n      .search-item {\n        display: flex;\n        align-items: center;\n        gap: 15px;\n        padding: 15px;\n        background: #f8f9fa;\n        border-radius: 8px;\n        cursor: pointer;\n        transition: background 0.2s ease;\n      }\n\n      .search-item:hover {\n        background: #e9ecef;\n      }\n\n      .search-rank {\n        font-size: 16px;\n        font-weight: bold;\n        color: #667eea;\n        min-width: 30px;\n      }\n\n      .search-details {\n        flex: 1;\n      }\n\n      .search-name {\n        font-size: 13px;\n        font-weight: 600;\n        color: #333;\n        margin-bottom: 4px;\n      }\n\n      .search-id {\n        font-size: 11px;\n        font-family: monospace;\n        color: #666;\n        margin-bottom: 4px;\n      }\n\n      .search-meta {\n        display: flex;\n        gap: 15px;\n        font-size: 10px;\n        color: #888;\n      }\n\n      .search-actions {\n        display: flex;\n        gap: 8px;\n      }\n\n      .search-again-btn {\n        background: #667eea;\n        color: white;\n        border: none;\n        border-radius: 6px;\n        padding: 8px 12px;\n        cursor: pointer;\n        font-size: 12px;\n        transition: background 0.2s ease;\n      }\n\n      .search-again-btn:hover {\n        background: #5a67d8;\n      }\n\n      @media (max-width: 768px) {\n        .overview-cards {\n          grid-template-columns: 1fr;\n        }\n        \n        .revenue-overview {\n          grid-template-columns: 1fr;\n        }\n        \n        .charts-container {\n          grid-template-columns: 1fr;\n          max-width: 100%;\n        }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n}","// src/popup/popup.ts\nimport { connectWallet, disconnectWallet, updateWalletUI, getCurrentWallet } from './modules/wallet-integration';\nimport { IPGraphVisualizer } from './modules/ip-graph-visualizer';\nimport { StoryAPI } from './modules/story-api';\nimport { AnalyticsDashboard } from './modules/analytics-dashboard';\nimport icon from '../assets/icons/icon32.png';\n\n// Global variables\nlet graphVisualizer: IPGraphVisualizer | null = null;\nlet storyAPI: StoryAPI | null = null;\nlet analyticsDashboard: AnalyticsDashboard | null = null;\nlet analyticsData = {\n  totalIPs: 0,\n  totalRelationships: 0,\n  avgDerivatives: 0\n};\n\n// Initialize when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', async () => {\n  console.log('IP Graph Extension popup loaded');\n  \nconst prefersDark = localStorage.getItem('darkMode') === 'true';\nif (prefersDark) {\n  document.body.classList.add('dark-mode');\n}\n\nconst logoImg = document.getElementById('logo-icon') as HTMLImageElement;\n  if (logoImg) {\n    logoImg.src = icon;\n  }\n\n  // Initialize components\n  initializeTabs();\n  initializeSearch();\n  initializeWallet();\n  initializeAnalytics();\n  \n  // Initialize API\n  storyAPI = new StoryAPI();\n  \n  // Initialize graph visualizer\n  const graphCanvas = document.getElementById('graph-canvas');\n  if (graphCanvas) {\n    graphVisualizer = new IPGraphVisualizer(graphCanvas);\n  }\n  \n  // Check for stored IP from context menu or content script\n  checkForStoredIP();\n  \n  // Update wallet UI\n  updateWalletUI();\n});\n\nfunction initializeTabs(): void {\n  const tabButtons = document.querySelectorAll('.tab-button');\n  const tabContents = document.querySelectorAll('.tab-content');\n  \n  tabButtons.forEach(button => {\n    button.addEventListener('click', (e) => {\n      const target = (e.target as HTMLElement).getAttribute('data-tab');\n      \n      // Remove active class from all tabs\n      tabButtons.forEach(btn => btn.classList.remove('active'));\n      tabContents.forEach(content => content.classList.remove('active'));\n      \n      // Add active class to clicked tab\n      button.classList.add('active');\n      const targetContent = document.getElementById(target!);\n      if (targetContent) {\n        targetContent.classList.add('active');\n      }\n    });\n  });\n}\n\nfunction initializeSearch(): void {\n  const searchInput = document.getElementById('search') as HTMLInputElement;\n  const visualizeBtn = document.getElementById('visualize') as HTMLButtonElement;\n  const randomBtn = document.getElementById('random-ip') as HTMLButtonElement;\n  const clearBtn = document.getElementById('clear-graph') as HTMLButtonElement;\n  \n  // Visualize button\n  visualizeBtn?.addEventListener('click', async () => {\n    const ipId = searchInput?.value.trim();\n    if (ipId) {\n      await analyzeIP(ipId);\n    }\n  });\n  \n  // Enter key in search input\n  searchInput?.addEventListener('keypress', async (e) => {\n    if (e.key === 'Enter') {\n      const ipId = searchInput.value.trim();\n      if (ipId) {\n        await analyzeIP(ipId);\n      }\n    }\n  });\n  \n  // Random IP button\n  randomBtn?.addEventListener('click', async () => {\n    const randomIP = await getRandomIP();\n    if (randomIP && searchInput) {\n      searchInput.value = randomIP;\n      await analyzeIP(randomIP);\n    }\n  });\n  \n  // Clear graph button\n  clearBtn?.addEventListener('click', () => {\n    clearGraph();\n  });\n}\n\nfunction initializeWallet(): void {\n  const connectBtn = document.getElementById('connect-wallet') as HTMLButtonElement;\n  const disconnectBtn = document.getElementById('disconnect-wallet') as HTMLButtonElement;\n  \n  // Use the correct function name\n  connectBtn?.addEventListener('click', async () => {\n    try {\n      await connectWallet(); // Changed from connectWalletConnect\n    } catch (error) {\n      console.error('Failed to connect wallet:', error);\n    }\n  });\n  \n  disconnectBtn?.addEventListener('click', async () => {\n    try {\n      await disconnectWallet();\n    } catch (error) {\n      console.error('Failed to disconnect wallet:', error);\n    }\n  });\n}\n\n// Update initializeAnalytics function\nfunction initializeAnalytics(): void {\n  const analyticsContainer = document.getElementById('analytics-content');\n  if (analyticsContainer) {\n    analyticsDashboard = new AnalyticsDashboard(analyticsContainer);\n    analyticsDashboard.render();\n  }\n\n  // Listen for search events\n  document.addEventListener('searchIP', (e: any) => {\n    const { ipId } = e.detail;\n    const searchInput = document.getElementById('search') as HTMLInputElement;\n    if (searchInput) {\n      searchInput.value = ipId;\n      analyzeIP(ipId);\n    }\n  });\n}\n\n// Update analyzeIP function to track analytics\nasync function analyzeIP(ipId: string): Promise<void> {\n  if (!graphVisualizer || !storyAPI) return;\n  \n  const startTime = performance.now();\n  let success = false;\n  \n  try {\n    showLoading(true);\n    \n    // Fetch IP data from Story Protocol\n    const ipData = await storyAPI.getIPAsset(ipId);\n    const relationships = await storyAPI.getIPRelationships(ipId);\n    \n    // Track analytics\n    if (analyticsDashboard) {\n      analyticsDashboard.trackSearch(ipId, ipData.name || 'Unknown IP');\n      analyticsDashboard.trackVisualization(relationships.length);\n      analyticsDashboard.updateRevenue(ipData.revenue || 0);\n    }\n    \n    // Update analytics display\n    analyticsData.totalIPs++;\n    analyticsData.totalRelationships += relationships.length;\n    analyticsData.avgDerivatives = analyticsData.totalRelationships / analyticsData.totalIPs;\n    updateAnalyticsDisplay();\n    \n    // Visualize the graph\n    await graphVisualizer.loadIPRelationships(ipId, ipData, relationships);\n    \n    // Update details panel\n    updateDetailsPanel(ipData, relationships);\n    \n    success = true;\n    showLoading(false);\n    \n  } catch (error) {\n    console.error('Failed to analyze IP:', error);\n    showError('Failed to analyze IP. Please check the ID and try again.');\n    showLoading(false);\n  } finally {\n    // Track performance\n    const loadTime = (performance.now() - startTime) / 1000;\n    if (analyticsDashboard) {\n      analyticsDashboard.trackPerformance(loadTime, success);\n    }\n  }\n}\n\nasync function getRandomIP(): Promise<string | null> {\n  if (!storyAPI) return null;\n  \n  try {\n    return await storyAPI.getRandomIP();\n  } catch (error) {\n    console.error('Failed to get random IP:', error);\n    return null;\n  }\n}\n\nfunction clearGraph(): void {\n  if (graphVisualizer) {\n    graphVisualizer.clear();\n  }\n  \n  const detailsPanel = document.getElementById('ip-details');\n  if (detailsPanel) {\n    detailsPanel.innerHTML = `\n      <div class=\"placeholder\">\n        <span class=\"placeholder-icon\"></span>\n        <p>Search for an IP Asset to see its relationship graph</p>\n      </div>\n    `;\n  }\n  \n  const searchInput = document.getElementById('search') as HTMLInputElement;\n  if (searchInput) {\n    searchInput.value = '';\n  }\n}\n\nfunction updateDetailsPanel(ipData: any, relationships: any[]): void {\n  const detailsPanel = document.getElementById('ip-details');\n  if (!detailsPanel) return;\n  \n  let html = `\n    <div class=\"ip-info\">\n      <h3> IP Asset Details</h3>\n      <div class=\"info-grid\">\n        <div class=\"info-item\">\n          <span class=\"label\">ID:</span>\n          <span class=\"value\">${ipData.id}</span>\n        </div>\n        <div class=\"info-item\">\n          <span class=\"label\">Owner:</span>\n          <span class=\"value\">${ipData.owner || 'Unknown'}</span>\n        </div>\n        <div class=\"info-item\">\n          <span class=\"label\">Type:</span>\n          <span class=\"value\">${ipData.type || 'IP Asset'}</span>\n        </div>\n        <div class=\"info-item\">\n          <span class=\"label\">Derivatives:</span>\n          <span class=\"value\">${relationships.filter(r => r.type === 'derivative').length}</span>\n        </div>\n      </div>\n    </div>\n  `;\n  \n  if (relationships.length > 0) {\n    html += `\n      <div class=\"relationships\">\n        <h4> Relationships (${relationships.length})</h4>\n        <div class=\"relationship-list\">\n    `;\n    \n    relationships.forEach(rel => {\n      html += `\n        <div class=\"relationship-item\">\n          <span class=\"rel-type\">${rel.type}</span>\n          <span class=\"rel-target\">${rel.target}</span>\n        </div>\n      `;\n    });\n    \n    html += `\n        </div>\n      </div>\n    `;\n  }\n  \n  detailsPanel.innerHTML = html;\n}\n\nfunction updateAnalyticsDisplay(): void {\n  const totalIPsEl = document.getElementById('total-ips');\n  const totalRelsEl = document.getElementById('total-relationships');\n  const avgDerivsEl = document.getElementById('avg-derivatives');\n  \n  if (totalIPsEl) totalIPsEl.textContent = analyticsData.totalIPs.toString();\n  if (totalRelsEl) totalRelsEl.textContent = analyticsData.totalRelationships.toString();\n  if (avgDerivsEl) {\n    const avg = analyticsData.totalIPs > 0 ? \n      (analyticsData.totalRelationships / analyticsData.totalIPs).toFixed(1) : '0';\n    avgDerivsEl.textContent = avg;\n  }\n}\n\nfunction showLoading(show: boolean): void {\n  const loading = document.getElementById('graph-loading');\n  if (loading) {\n    loading.classList.toggle('hidden', !show);\n  }\n}\n\nfunction showError(message: string): void {\n  const detailsPanel = document.getElementById('ip-details');\n  if (detailsPanel) {\n    detailsPanel.innerHTML = `\n      <div class=\"error-message\">\n        <span class=\"error-icon\"></span>\n        <p>${message}</p>\n      </div>\n    `;\n  }\n}\n\n// Add to popup.ts - update checkForStoredIP function\nasync function checkForStoredIP(): Promise<void> {\n  try {\n    const result = await chrome.runtime.sendMessage({ action: 'getStoredIP' });\n    console.log('Stored IP data:', result);\n    \n    if (result.selectedIP) {\n      const searchInput = document.getElementById('search') as HTMLInputElement;\n      if (searchInput) {\n        searchInput.value = result.selectedIP;\n        \n        // Show context information if available\n        if (result.fromContextMenu) {\n          showContextInfo(result);\n        }\n        \n        // Handle page detection results\n        if (result.fromPageDetection && result.detectedIPs) {\n          showDetectedIPsPanel(result.detectedIPs);\n        }\n        \n        // Auto-analyze the IP\n        await analyzeIP(result.selectedIP);\n      }\n    }\n    \n    // Handle multiple detected IPs\n    if (result.detectedIPs && result.detectedIPs.length > 0) {\n      showDetectedIPsPanel(result.detectedIPs);\n    }\n    \n  } catch (error) {\n    console.error('Failed to check stored IP:', error);\n  }\n}\n\n// Show context information\nfunction showContextInfo(data: any): void {\n  const contextPanel = document.createElement('div');\n  contextPanel.className = 'context-info-panel';\n  contextPanel.innerHTML = `\n    <div class=\"context-header\">\n      <span class=\"context-icon\"></span>\n      <span class=\"context-title\">IP Detected from Context Menu</span>\n      <button class=\"context-close\"></button>\n    </div>\n    <div class=\"context-details\">\n      ${data.sourceTitle ? `<div class=\"context-item\"><strong>Source:</strong> ${data.sourceTitle}</div>` : ''}\n      ${data.sourceUrl ? `<div class=\"context-item\"><strong>URL:</strong> ${data.sourceUrl}</div>` : ''}\n      ${data.ipType ? `<div class=\"context-item\"><strong>Type:</strong> ${data.ipType}</div>` : ''}\n      ${data.selectionContext ? `<div class=\"context-item\"><strong>Context:</strong> \"${data.selectionContext}\"</div>` : ''}\n      <div class=\"context-item\"><strong>Detected:</strong> ${new Date(data.timestamp).toLocaleString()}</div>\n    </div>\n  `;\n\n  // Add styles\n  contextPanel.style.cssText = `\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    color: white;\n    border-radius: 8px;\n    padding: 15px;\n    margin: 10px 0;\n    font-size: 12px;\n  `;\n\n  // Insert before search section\n  const searchSection = document.querySelector('.search-section');\n  if (searchSection) {\n    searchSection.parentNode?.insertBefore(contextPanel, searchSection);\n  }\n\n  // Add close functionality\n  const closeBtn = contextPanel.querySelector('.context-close');\n  closeBtn?.addEventListener('click', () => {\n    contextPanel.remove();\n  });\n\n  // Auto-remove after 10 seconds\n  setTimeout(() => {\n    if (contextPanel.parentNode) {\n      contextPanel.remove();\n    }\n  }, 10000);\n}\n\n// Show detected IPs panel\nfunction showDetectedIPsPanel(detectedIPs: any[]): void {\n  const detectedPanel = document.createElement('div');\n  detectedPanel.className = 'detected-ips-panel';\n  detectedPanel.innerHTML = `\n    <div class=\"detected-header\">\n      <span class=\"detected-icon\"></span>\n      <span class=\"detected-title\">Detected IPs (${detectedIPs.length})</span>\n      <button class=\"detected-close\"></button>\n    </div>\n    <div class=\"detected-list\">\n      ${detectedIPs.slice(0, 10).map((ip, index) => `\n        <div class=\"detected-item\" data-ip=\"${ip.ip}\">\n          <div class=\"detected-ip\">${ip.ip.slice(0, 12)}...${ip.ip.slice(-8)}</div>\n          <div class=\"detected-type\">${ip.type}</div>\n          <div class=\"detected-context\">${ip.context?.slice(0, 40)}...</div>\n          <button class=\"analyze-ip-btn\" data-ip=\"${ip.ip}\"></button>\n        </div>\n      `).join('')}\n      ${detectedIPs.length > 10 ? `<div class=\"detected-more\">+${detectedIPs.length - 10} more IPs detected</div>` : ''}\n    </div>\n  `;\n\n  // Add styles\n  detectedPanel.style.cssText = `\n    background: white;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    margin: 10px 0;\n    max-height: 300px;\n    overflow-y: auto;\n  `;\n\n  // Insert after search section\n  const searchSection = document.querySelector('.search-section');\n  if (searchSection) {\n    searchSection.parentNode?.insertBefore(detectedPanel, searchSection.nextSibling);\n  }\n\n  // Add event listeners\n  const analyzeButtons = detectedPanel.querySelectorAll('.analyze-ip-btn');\n  analyzeButtons.forEach(btn => {\n    btn.addEventListener('click', (e) => {\n      e.stopPropagation();\n      const ip = btn.getAttribute('data-ip');\n      if (ip) {\n        const searchInput = document.getElementById('search') as HTMLInputElement;\n        if (searchInput) {\n          searchInput.value = ip;\n          analyzeIP(ip);\n        }\n      }\n    });\n  });\n\n  // Add close functionality\n  const closeBtn = detectedPanel.querySelector('.detected-close');\n  closeBtn?.addEventListener('click', () => {\n    detectedPanel.remove();\n  });\n}\n\n  // Dark Mode Toggle Handler\nconst toggleDarkMode = document.getElementById(\"dark-mode-toggle\");\ntoggleDarkMode?.addEventListener(\"click\", () => {\n  const isDark = document.body.classList.toggle(\"dark-mode\");\n  localStorage.setItem(\"darkMode\", isDark.toString());\n});\n\n\n// Export functions for use in other modules\n(window as any).analyzeIP = analyzeIP;\n(window as any).clearGraph = clearGraph;"],"names":["__webpack_require__","g","globalThis","this","Function","e","window","scriptUrl","importScripts","location","document","currentScript","tagName","toUpperCase","src","scripts","getElementsByTagName","length","i","test","Error","replace","p","currentWallet","STORY_AENEID_CHAIN_ID","handleDisconnection","updateConnectionStatus","updateWalletUI","ipDetails","getElementById","innerHTML","notification","createNotification","body","appendChild","setTimeout","remove","showDisconnectionMessage","walletStatus","connectionStatus","walletAddress","walletBalance","walletNetwork","connectBtn","disconnectBtn","addressItem","balanceItem","networkItem","connected","className","textContent","address","slice","balance","style","display","status","message","type","createElement","cssText","background","success","error","info","none","selector","querySelector","empty","querySelectorAll","matches","childMatcher","node","head","find","Array","prototype","childFirst","firstElementChild","filter","children","from","update","EnterNode","parent","datum","ownerDocument","namespaceURI","_next","_parent","__data__","bindIndex","group","enter","exit","data","groupLength","dataLength","bindKey","key","keyValue","nodeByKeyValue","Map","keyValues","call","has","set","get","delete","arraylike","ascending","a","b","NaN","constructor","child","insertBefore","next","xhtml","svg","xlink","xml","xmlns","name","prefix","indexOf","namespaces","hasOwnProperty","space","local","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","attrConstant","value","setAttribute","attrConstantNS","setAttributeNS","attrFunction","v","apply","arguments","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","trim","split","classList","ClassList","_node","_names","getAttribute","classedAdd","names","list","n","add","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","raise","nextSibling","parentNode","lower","previousSibling","firstChild","creatorInherit","uri","documentElement","createElementNS","creatorFixed","namespace","constantNull","removeChild","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","onRemove","typename","on","__on","o","j","m","removeEventListener","listener","options","onAdd","event","contextListener","addEventListener","push","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","join","splice","contains","root","Selection","groups","parents","_groups","_parents","selection","select","subgroups","subnode","subgroup","selectAll","x","isArray","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","bind","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","map","sparse","onenter","onupdate","onexit","append","merge","order","context","groups0","groups1","m0","m1","Math","min","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","callback","nodes","size","each","attr","getAttributeNS","property","classed","text","html","create","creator","insert","before","deep","t","typenames","parseTypenames","dispatch","Symbol","iterator","noop","_","Dispatch","c","concat","types","T","copy","that","args","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","requestAnimationFrame","f","clearNow","Timer","_call","_time","timer","delay","time","restart","wake","undefined","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","stop","TypeError","emptyOn","emptyTween","id","index","timing","schedules","__transition","self","tween","start","state","tick","duration","ease","init","schedule","active","svgNode","degrees","PI","identity","translateX","translateY","rotate","skewX","scaleX","scaleY","d","sqrt","atan2","atan","interpolateTransform","parse","pxComma","pxParen","degParen","pop","s","q","xa","ya","xb","yb","number","translate","scale","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","transform","baseVal","consolidate","matrix","tweenRemove","tween0","tween1","tweenFunction","tweenValue","transition","_id","factory","extend","definition","Object","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","l","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","r","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","max","round","toString","h","Hsl","hslConvert","clamph","clampt","hsl2rgb","m2","basis","v0","v1","v2","v3","t3","channels","assign","displayable","formatHex8","formatHsl","k","pow","clamp","nogamma","linear","rgbGamma","y","exponential","gamma","end","rgbSpline","spline","colors","values","floor","reA","reB","source","am","bm","bs","bi","lastIndex","one","zero","interpolate","value1","string00","interpolate0","string1","string0","string10","attrTweenNS","attrInterpolateNS","_value","attrTween","attrInterpolate","delayFunction","delayConstant","durationFunction","durationConstant","Transition","_name","newId","selection_prototype","inherit","id0","id1","on0","on1","sit","every","onFunction","styleTween","styleNull","listener0","styleMaybeRemove","styleInterpolate","textTween","textInterpolate","removeFunction","easeConstant","easeVarying","Promise","resolve","reject","cancel","interrupt","defaultTiming","abs","sourceEvent","currentTarget","ownerSVGElement","createSVGPoint","point","clientX","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","rect","left","clientLeft","top","clientTop","pageX","pageY","nonpassive","passive","nonpassivecapture","capture","stopImmediatePropagation","preventDefault","view","__noselect","MozUserSelect","yesdrag","noclick","DragEvent","subject","target","identifier","dx","dy","defineProperties","enumerable","configurable","ctrlKey","button","defaultContainer","defaultSubject","navigator","maxTouchPoints","strength","force","sx","sy","initialize","tree","xm","ym","xp","yp","right","bottom","_root","leaf","x0","_x0","y0","_y0","x1","_x1","y1","_y1","_x","_y","defaultX","defaultY","quadtree","Quadtree","addAll","leaf_copy","treeProto","random","vx","vy","nodeById","nodeId","cover","xz","yz","z","visit","extent","radius","x2","y2","x3","y3","quads","d2","retainer","removeAll","visitAfter","initialAngle","strengths","alpha","cosh","exp","zoomRho","rho","rho2","rho4","zoom","p0","p1","S","ux0","uy0","w0","ux1","uy1","w1","log","d1","b0","b1","r0","r1","coshr0","u","sinh","SQRT2","_1","_2","ZoomEvent","Transform","applyX","applyY","invert","invertX","invertY","rescaleX","domain","range","rescaleY","SVGElement","hasAttribute","viewBox","width","height","clientWidth","clientHeight","defaultTransform","__zoom","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","translateExtent","dx0","dx1","dy0","dy1","IPGraphVisualizer","container","links","initializeSVG","initializeSimulation","showPlaceholder","defs","rootGradient","parentGradient","childGradient","derivativeGradient","touchstarting","touchfirst","touchending","constrain","wheelDelta","touchable","scaleExtent","listeners","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","touchmoved","touchended","centroid","gesture","w","clean","__zooming","Gesture","taps","wheel","mouse","moved","changedTouches","k1","shiftKey","started","touches","touch0","touch1","l0","l1","dp","dl","hypot","collection","scaleBy","scaleTo","translateBy","translateTo","emit","clickDistance","simulation","alphaMin","alphaDecay","alphaTarget","velocityDecay","forces","stepper","step","lcg","iterations","forEach","fx","fy","initializeNodes","angle","cos","sin","initializeForce","randomSource","closest","distances","count","bias","link","distance","jiggle","initializeStrength","initializeDistance","_nodes","_random","distanceMin2","distanceMax2","theta2","accumulate","quad","weight","distanceMin","distanceMax","theta","radii","xi","yi","ri","ri2","prepare","rj","loadIPRelationships","ipId","ipData","relationships","console","buildGraphData","renderGraph","showError","rootIpId","rootData","owner","revenue","derivatives","rel","addDemoNodes","parentId","substr","derivativeId","mainGroup","linkElements","getLinkColor","calculateLinkWidth","nodeElements","mousedownx","mousedowny","mousemoving","gestures","drag","beforestart","mousemoved","mouseupped","nodrag","touch","dragStarted","dragged","dragEnded","getNodeRadius","getNodeColor","substring","toFixed","handleNodeClick","handleNodeHover","highlightConnectedNodes","customEvent","isEntering","connectedLinks","connectedNodeIds","Set","derivative","license","logRevenue","log10","placeholder","clear","resize","StoryAPI","mockDatabase","relationshipDatabase","revenueDatabase","initializeMockData","createdAt","totalRevenue","monthlyRevenue","licenseTerms","tags","ip","topEarningDerivatives","generateTopEarningDerivatives","revenueBreakdown","directSales","royalties","licensing","initializeRelationships","royaltyPaid","entries","licenseType","royaltyRate","rels","getIPAsset","mockIP","toISOString","metadata","title","description","getIPRelationships","relationshipTypes","generatedRelationships","relationshipCount","isParent","relatedId","charAt","getRevenueData","revenueData","getRandomIP","knownIPs","keys","searchIPAssets","query","results","asset","includes","some","tag","randomRevenue","getIPAnalytics","totalDerivatives","topDerivatives","revenueGrowth","calculateRevenueGrowth","licenseTypes","Boolean","averageRoyaltyRate","reduce","sum","creationTrend","generateCreationTrend","recent","month","isValidIPId","getNetworkInfo","chainId","explorer","getEcosystemOverview","allIPs","totalIPs","topPerformers","recentActivity","timestamp","AnalyticsDashboard","charts","initializeAnalyticsData","setupEventListeners","savedData","localStorage","getItem","JSON","totalRelationships","avgDerivatives","searchCount","visualizationCount","topSearchedIPs","performanceMetrics","avgLoadTime","successRate","errorRate","usageStats","dailyActive","weeklyActive","totalSessions","avgSessionDuration","networkStats","mostConnectedIP","connections","largestNetwork","rootId","nodeCount","depth","averageNetworkSize","revenueAnalytics","totalEcosystemRevenue","averageIPRevenue","topRevenueGenerators","revenueDistribution","original","licenses","timeSeriesData","searchActivity","generateMockTimeSeriesData","networkGrowth","date","getTime","searches","visualizations","toLocaleDateString","growth","newIPs","newRelationships","render","renderOverviewCards","renderPerformanceMetrics","renderUsageStatistics","renderNetworkAnalytics","renderRevenueAnalytics","renderTimeSeriesCharts","renderTopSearchedIPs","addStyles","initializeCharts","toLocaleString","lastSearched","renderSearchActivityChart","renderNetworkGrowthChart","maxValue","weekday","handleSearchAgain","trackSearch","ipName","existingIndex","findIndex","saveData","trackVisualization","trackPerformance","loadTime","currentAvg","currentCount","updateRevenue","setItem","stringify","exportData","clearData","removeItem","graphVisualizer","storyAPI","analyticsDashboard","analyticsData","async","analyzeIP","startTime","showLoading","totalIPsEl","totalRelsEl","avgDerivsEl","avg","updateAnalyticsDisplay","detailsPanel","updateDetailsPanel","clearGraph","searchInput","show","loading","toggle","showDetectedIPsPanel","detectedIPs","detectedPanel","searchSection","btn","stopPropagation","closeBtn","logoImg","tabButtons","tabContents","content","targetContent","initializeTabs","visualizeBtn","randomBtn","clearBtn","randomIP","initializeSearch","ethereum","accounts","request","method","switchError","code","chainName","nativeCurrency","symbol","decimals","rpcUrls","blockExplorerUrls","switchToStoryAeneid","balanceInEth","provider","network","assets","item","click","searchIP","displayUserAssets","loadUserIPAssets","showSuccessMessage","newAddress","showNetworkWarning","setupWalletEventListeners","showConnectionError","connectWallet","disconnectWallet","initializeWallet","analyticsContainer","initializeAnalytics","graphCanvas","result","chrome","runtime","sendMessage","action","selectedIP","fromContextMenu","contextPanel","sourceTitle","sourceUrl","ipType","selectionContext","showContextInfo","fromPageDetection","checkForStoredIP","toggleDarkMode","isDark"],"sourceRoot":""}